(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{6995:function(e,a,t){Promise.resolve().then(t.bind(t,3080))},3080:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return em}});var r=t(7437),s=t(2265),n=t(9376),i=t(7029),o=t(2827),l=t(5323),c=t(4573),d=t(6140),u=t(7648),h=t(1274),p=t.n(h);function m(e){let{article:a}=e;return a?(0,r.jsx)(u.default,{href:"/pat/".concat(a.id),className:p().heroCard,children:(0,r.jsx)("div",{className:p().media,style:{backgroundImage:"linear-gradient(180deg, rgba(2,2,2,0.2), rgba(2,2,2,0.75)), url(".concat(a.imageUrl,")")},children:(0,r.jsxs)("div",{className:p().overlay,children:[(0,r.jsx)("p",{className:p().tag,children:a.categoryName}),(0,r.jsx)("h2",{className:p().title,children:a.title}),a.description&&(0,r.jsx)("p",{className:p().copy,children:a.description})]})})}):(0,r.jsxs)("div",{className:p().placeholder,children:[(0,r.jsx)("p",{className:p().placeholderTitle,children:"Stories curated for you"}),(0,r.jsx)("p",{className:p().placeholderCopy,children:"Check back once we load today’s spotlight."})]})}var _=t(8240),g=t.n(_);function f(e){let{items:a,onSubscribe:t}=e;return a.length?(0,r.jsxs)("div",{className:g().sidebar,children:[(0,r.jsxs)("div",{className:g().headerRow,children:[(0,r.jsx)("p",{className:g().title,children:"Trending"}),t&&(0,r.jsx)("button",{type:"button",className:g().subscribeButton,onClick:t,children:"Subscribe"})]}),(0,r.jsx)("ol",{className:g().list,children:a.slice(0,5).map((e,a)=>(0,r.jsx)("li",{className:g().listItem,children:(0,r.jsxs)(u.default,{href:"/pat/".concat(e.id),className:g().item,"aria-label":"Read ".concat(e.title),children:[(0,r.jsx)("span",{className:g().index,children:a+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:g().headline,children:e.title}),(0,r.jsx)("span",{className:g().meta,children:e.categoryName})]}),e.imageUrl&&(0,r.jsx)("img",{src:e.imageUrl,alt:e.title,className:g().thumbnail})]})},e.id))})]}):(0,r.jsxs)("div",{className:g().empty,children:[(0,r.jsx)("p",{className:g().title,children:"Trending"}),(0,r.jsx)("p",{className:g().emptyCopy,children:"Fresh stories will appear soon."}),t&&(0,r.jsx)("button",{type:"button",className:g().subscribeButton,onClick:t,children:"Subscribe"})]})}var y=t(7436),x=t.n(y);function v(){return(0,r.jsxs)("div",{className:x().widget,children:[(0,r.jsx)("p",{className:x().title,children:"Daily Focus"}),(0,r.jsxs)("p",{className:x().copy,children:["You’re trending in ",(0,r.jsx)("strong",{children:"Business"})," — keep patting the stories that matter."]}),(0,r.jsxs)("div",{className:x().progress,children:[(0,r.jsx)("span",{children:"40 XP"}),(0,r.jsx)("span",{children:"80 XP Goal"})]}),(0,r.jsx)("div",{className:x().track,children:(0,r.jsx)("span",{style:{width:"60%"}})})]})}var b=t(5171),j=t.n(b);let w=[{name:"Ava Matthews",title:"Culture Curator",handle:"@ava"},{name:"Noah Reid",title:"Tech Analyst",handle:"@noahreid"},{name:"Mia Chen",title:"Community Lead",handle:"@mia"}];function N(){return(0,r.jsxs)("div",{className:j().widget,children:[(0,r.jsx)("p",{className:j().title,children:"Who to follow"}),(0,r.jsx)("div",{className:j().list,children:w.map(e=>(0,r.jsxs)("div",{className:j().item,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:j().name,children:e.name}),(0,r.jsxs)("p",{className:j().info,children:[e.title," \xb7 ",(0,r.jsx)("span",{className:j().handle,children:e.handle})]})]}),(0,r.jsx)("button",{className:j().button,type:"button",children:"Follow"})]},e.handle))})]})}var S=t(4),k=t.n(S);function C(){let[e,a]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=()=>a(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e)?(0,r.jsxs)("div",{className:k().banner,children:[(0,r.jsx)("p",{className:k().title,children:"Get the Patreek app"}),(0,r.jsxs)("div",{className:k().buttons,children:[(0,r.jsx)("a",{href:"#",className:k().storeButton,children:"App Store"}),(0,r.jsx)("a",{href:"#",className:k().storeButton,children:"Google Play"})]})]}):null}var U=t(4048),B=t(7576),D=t(2783),T=t.n(D),F=t(257);function P(e){let{isUSUser:a=!1,localCurrency:t,countryCode:n}=e,[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[h,p]=(0,s.useState)("USD"),[m,_]=(0,s.useState)("USD");(0,s.useEffect)(()=>{(async()=>{try{c(!0),u(null);let e="USD",r=t;if(a)e="USD",r="USD";else if(r)e=r||"USD";else try{let a=await fetch("https://ipapi.co/json/");e=a.ok?r=(await a.json()).currency||"USD":(r=f(n||"US"))||"USD"}catch(a){e=(r=f(n||"US"))||"USD"}p(e||"USD"),_(r||"USD");let s=a?["EUR","GBP","JPY","XAU","BTC"]:["USD","EUR","GBP","JPY","XAU","BTC"],i=F.env.NEXT_PUBLIC_FOREX_API_KEY||"";if(!i){let a=s.map(a=>({currency:a,symbol:g(a),rate:y(e||"USD",a),change:parseFloat((2*Math.random()-1).toFixed(2))}));o(a),c(!1);return}let l=await fetch("https://v6.exchangerate-api.com/v6/".concat(i,"/latest/").concat(e));if(!l.ok)throw Error("Failed to fetch exchange rates");let d=await l.json(),h=s.map(a=>{let t=1;if(a===e)t=1;else if("XAU"===a)t=y(e,"XAU");else if("BTC"===a)t=y(e,"BTC");else{var r;t=(null===(r=d.conversion_rates)||void 0===r?void 0:r[a])||1}return{currency:a,symbol:g(a),rate:parseFloat(t.toFixed(4)),change:parseFloat((2*Math.random()-1).toFixed(2))}});o(h)}catch(e){console.error("Error fetching forex rates:",e),u("Unable to load exchange rates"),o((a?["EUR","GBP","JPY","XAU","BTC"]:["USD","EUR","GBP","JPY","XAU","BTC"]).map(e=>({currency:e,symbol:g(e),rate:y(h||"USD",e),change:0})))}finally{c(!1)}})()},[a,t,n]);let g=e=>({USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",NGN:"₦",XAU:"Au",BTC:"₿"})[e]||e,f=e=>({US:"USD",GB:"GBP",EU:"EUR",JP:"JPY",NG:"NGN",KE:"KES",ZA:"ZAR",CA:"CAD",AU:"AUD",DE:"EUR",FR:"EUR",IT:"EUR",ES:"EUR",NL:"EUR"})[e]||"USD",y=(e,a)=>{var t;return(null===(t=({USD:{EUR:.92,GBP:.79,JPY:150,XAU:5e-4,BTC:15e-6},EUR:{USD:1.09,GBP:.86,JPY:163,XAU:54e-5,BTC:16e-6},GBP:{USD:1.27,EUR:1.16,JPY:190,XAU:63e-5,BTC:19e-6},NGN:{USD:67e-5,EUR:61e-5,GBP:53e-5,JPY:.1,XAU:34e-8,BTC:1e-8}})[e])||void 0===t?void 0:t[a])||1};return l?(0,r.jsxs)("div",{className:T().widget,children:[(0,r.jsx)("div",{className:T().header,children:(0,r.jsxs)("div",{className:T().headerLeft,children:[(0,r.jsx)("div",{className:T().headerBar}),(0,r.jsx)("span",{className:T().headerTitle,children:"Exchange Rates"})]})}),(0,r.jsx)("div",{className:T().loading,children:"Loading exchange rates..."})]}):d&&0===i.length?(0,r.jsxs)("div",{className:T().widget,children:[(0,r.jsx)("div",{className:T().header,children:(0,r.jsxs)("div",{className:T().headerLeft,children:[(0,r.jsx)("div",{className:T().headerBar}),(0,r.jsx)("span",{className:T().headerTitle,children:"Exchange Rates"})]})}),(0,r.jsx)("div",{className:T().error,children:d})]}):(0,r.jsxs)("div",{className:T().widget,children:[(0,r.jsxs)("div",{className:T().header,children:[(0,r.jsxs)("div",{className:T().headerLeft,children:[(0,r.jsx)("div",{className:T().headerBar}),(0,r.jsx)("span",{className:T().headerTitle,children:"Exchange Rates"})]}),(0,r.jsx)("div",{className:T().headerRight,children:(0,r.jsxs)("span",{className:T().baseCurrency,children:["1 ",h]})})]}),(0,r.jsx)("div",{className:T().ratesList,children:i.map(e=>(0,r.jsxs)("div",{className:T().rateItem,children:[(0,r.jsxs)("div",{className:T().rateLeft,children:[(0,r.jsx)("span",{className:T().rateSymbol,children:e.symbol}),(0,r.jsx)("span",{className:T().rateCurrency,children:e.currency})]}),(0,r.jsxs)("div",{className:T().rateRight,children:[(0,r.jsx)("span",{className:T().rateValue,children:e.rate}),(0,r.jsxs)("span",{className:"".concat(T().rateChange," ").concat(("number"==typeof e.change?e.change:parseFloat(e.change))>=0?T().positive:T().negative),children:[("number"==typeof e.change?e.change:parseFloat(e.change))>=0?"+":"",e.change,"%"]})]})]},e.currency))})]})}let E=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to fetch weather");return e.json()});function W(){var e,a;let[t,n]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!navigator.geolocation){o("Location not supported by this browser.");return}navigator.geolocation.getCurrentPosition(e=>{n({lat:Number(e.coords.latitude.toFixed(3)),lon:Number(e.coords.longitude.toFixed(3))}),o(null)},e=>o(e.message||"Location permission denied."),{enableHighAccuracy:!1,timeout:1e4})},[]),(0,s.useEffect)(()=>{if(!t){d(null);return}let e=!1;return(async()=>{try{let a=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(t.lat,"&longitude=").concat(t.lon,"&localityLanguage=en"));if(!a.ok)throw Error("Reverse geocode failed");let r=await a.json(),s=r.city||r.locality||r.principalSubdivision,n=r.countryCode||r.countryName;e||(s&&n?d("".concat(s,", ").concat(n)):s?d(s):n?d(n):d("".concat(t.lat,"\xb0, ").concat(t.lon,"\xb0")))}catch(a){e||d("".concat(t.lat,"\xb0, ").concat(t.lon,"\xb0"))}})(),()=>{e=!0}},[t]);let{data:u,error:h,isLoading:p}=(0,l.ZP)(t?"weather:".concat(t.lat,":").concat(t.lon):null,()=>E("https://api.open-meteo.com/v1/forecast?latitude=".concat(null==t?void 0:t.lat,"&longitude=").concat(null==t?void 0:t.lon,"&current_weather=true")),{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1,dedupingInterval:36e5}),m=null==u?void 0:null===(e=u.current_weather)||void 0===e?void 0:e.temperature,_=null==u?void 0:null===(a=u.current_weather)||void 0===a?void 0:a.windspeed;return(0,r.jsxs)("div",{id:"weather-widget",style:A,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,r.jsx)("span",{style:R,children:"Local Weather"}),c&&(0,r.jsx)("span",{style:I,children:c})]}),i&&(0,r.jsx)("p",{style:z,children:i}),h&&(0,r.jsx)("p",{style:z,children:"Unable to load weather."}),!i&&!h&&(0,r.jsxs)("div",{style:{minHeight:40},children:[p&&(0,r.jsx)("p",{style:L,children:"Fetching sky vibes…"}),void 0!==m&&(0,r.jsxs)("p",{style:H,children:[m.toFixed(0),"\xb0C",void 0!==_&&(0,r.jsxs)("span",{style:L,children:[" • Wind ",_.toFixed(0)," km/h"]})]})]})]})}let A={background:"#0f172a",color:"#f8fafc",padding:"16px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 10px 30px rgba(15,23,42,0.2)",minHeight:"120px"},R={textTransform:"uppercase",letterSpacing:"0.2em",fontSize:"11px",color:"#94a3b8"},I={fontSize:"11px",color:"#cbd5f5"},L={fontSize:"13px",color:"#94a3b8",marginLeft:8},H={fontSize:"28px",fontWeight:700,margin:0},z={color:"#f87171",fontSize:"13px",margin:0},G=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to fetch crypto prices");return e.json()});function q(){var e,a;let{data:t,error:s}=(0,l.ZP)("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true",G,{refreshInterval:6e4,revalidateOnFocus:!1,dedupingInterval:36e5,revalidateIfStale:!1}),n=null==t?void 0:null===(e=t.bitcoin)||void 0===e?void 0:e.usd,i=null==t?void 0:null===(a=t.bitcoin)||void 0===a?void 0:a.usd_24h_change;return(0,r.jsxs)("div",{id:"crypto-widget",style:K,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,r.jsx)("span",{style:X,children:"Bitcoin"}),(0,r.jsx)("span",{style:M,children:"1 BTC"})]}),s&&(0,r.jsx)("p",{style:Y,children:"Price feed offline."}),!s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{style:J,children:void 0!==n?"$".concat(n.toLocaleString("en-US",{maximumFractionDigits:0})):"…"}),(0,r.jsx)("p",{style:{...O,color:i&&i<0?"#f87171":"#4ade80"},children:void 0!==i?"".concat(void 0!==i&&i>=0?"+":"").concat(i.toFixed(2),"% (24h)"):"Updating…"})]})]})}let K={background:"#111827",color:"#f8fafc",padding:"16px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.08)",display:"flex",flexDirection:"column",gap:4},X={textTransform:"uppercase",letterSpacing:"0.2em",fontSize:"11px",color:"#94a3b8"},M={fontSize:"11px",color:"#cbd5f5"},J={fontSize:"26px",fontWeight:700,margin:"4px 0"},O={fontSize:"14px",margin:0},Y={color:"#f87171",fontSize:"13px",margin:0};var Z=JSON.parse('["Start your day with a glass of water to kickstart hydration.","Take a five-minute walk after each meal to boost digestion.","Write down three things you\'re grateful for every morning.","Tidy up your workspace before you start working.","Batch similar tasks to reduce context switching fatigue.","Take a tech-free hour before bed to improve sleep quality.","Use keyboard shortcuts to shave seconds off repetitive tasks.","Set a 25-minute timer to focus deeply, then take a short break.","Stretch your wrists and shoulders every hour when typing.","Plan tomorrow\'s top three priorities before ending today.","Schedule email checks instead of keeping your inbox open.","Drink herbal tea in the afternoon instead of another coffee.","Switch your phone to grayscale to reduce doom scrolling.","Unfollow accounts that drain your energy.","Keep a running list of wins to revisit when motivation dips.","Pair a new habit with an existing routine to make it stick.","Use airplane mode when you need distraction-free work.","Keep healthy snacks visible and sugary snacks hidden.","Practice box breathing when stress spikes.","Take notes by hand to improve retention.","Set recurring reminders for monthly financial check-ins.","Automate one bill this week to reduce admin overhead.","Declutter one drawer or folder every Friday.","Ask for clarification within 24 hours when something feels unclear.","Keep sunscreen next to your toothbrush so you never forget it.","Meal prep two lunches on Sunday to free up weekday time.","Share your goals with a friend for accountability.","Read one page of a book each night to keep momentum.","Use a password manager to eliminate weak passwords.","Back up important files to the cloud weekly.","Mute group chats when you need deep focus.","Try a new fruit or vegetable each week for variety.","Walk a different route to spark creativity.","Listen to educational podcasts during chores.","Audit subscription services every quarter.","Turn off push notifications for non-essential apps.","Keep an umbrella or reusable bag in your backpack.","Break big goals into milestones you can celebrate.","Do a quick posture check during video calls.","Keep a spare charger in your travel bag.","Use the two-minute rule: if it takes less, do it now.","Block calendar time for focused learning.","Set themes for each weekday (e.g., admin Monday).","Store a notebook next to your bed for late-night ideas.","Say no to commitments that don\'t align with your goals.","Prep your outfit or gym gear the night before.","Label leftovers with dates to avoid waste.","Spend five minutes meditating when stress creeps in.","Clean as you cook to save cleanup time later.","Take phone calls while walking to add movement.","Review your finances on the same day each week.","Start meetings with clear agendas to stay on track.","Use voice notes to capture ideas on the go.","Limit caffeine after 2 PM for better sleep.","Keep a dedicated folder for receipts and warranties.","Unsubscribe from newsletters you never read.","Swap doom scrolling for a quick stretching session.","Color-code your calendar for instant clarity.","Turn recurring chores into routines with set days.","Store frequently used files on your desktop.","Take photo backups of important documents.","Use reusable water bottles to track intake.","Swap sugary drinks for sparkling water plus citrus.","Batch cook grains or proteins for effortless meals.","Keep a gratitude jar to drop in quick wins.","Put your phone in another room during meals.","Wear blue-light glasses if you work late at screens.","Delete unused apps every few months.","Run errands in one trip to save gas and time.","Carry a small notebook for spontaneous ideas.","Practice saying “Let me get back to you” before agreeing.","Use lint rollers to quickly freshen outfits.","Keep a donation box handy for items you no longer need.","Prep smoothies in freezer bags for fast breakfasts.","Create playlists for different tasks (focus, cleaning).","Add one leafy green to your plate daily.","Schedule regular check-ins with yourself every Sunday.","Use timers to keep phone calls concise.","Do five push-ups whenever you feel sluggish.","Speak your to-do list aloud to cement it in your mind.","Make your passwords passphrases for extra security.","Review and adjust your goals monthly.","Keep travel toiletries pre-packed for quick getaways.","Set aside “no meeting” blocks each week.","Use color-coded sticky notes for priority levels.","Review the agenda before joining every meeting.","Charge all devices overnight on a single station.","Sanitize frequently touched items weekly.","Use e-readers or libraries to reduce clutter.","Turn recurring frustrations into documented processes.","Set seasonal goals (spring cleaning, fall planning).","Carry earplugs for unexpected noisy environments.","Swap scrolling for journaling when emotions run high.","Track how long common tasks actually take.","Organize digital files with year/month folders.","Keep a to-don’t list for habits you’re quitting.","Set a fun reward after finishing unpleasant tasks.","Practice “single-tasking” for complex projects.","Keep a list of low-energy tasks for tired days.","Rotate hobbies to keep creativity fresh.","Play ambient sounds or white noise for focus.","Invest in good lighting to reduce eye strain.","Use public accountability (tweets, posts) for big goals.","Read out loud to catch typos faster.","Schedule joy: plan something small to look forward to weekly.","Start meetings with a quick win to set momentum.","Give yourself a five-minute buffer between calls to reset."]');function Q(){let e=Math.floor(Date.now()/864e5)%Z.length,a=Z[e];return(0,r.jsxs)("div",{style:V,children:[(0,r.jsx)("span",{style:$,children:"Daily Tip"}),(0,r.jsx)("p",{style:ee,children:a})]})}let V={background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:"16px",padding:"16px",color:"#7c2d12"},$={textTransform:"uppercase",letterSpacing:"0.2em",fontSize:"11px",color:"#b45309"},ee={margin:"8px 0 0",fontSize:"14px",lineHeight:1.5};var ea=t(1224),et=t(1198),er=t.n(et);let es=[{label:"S&P 500",value:"↗ 0.15%",color:"#16a34a"},{label:"BTC",value:"↘ 1.2%",color:"#dc2626"},{label:"Melissa, TX",value:"☀️ 64\xb0F",color:"#f97316"},{label:"Daily Tip",value:"Drink water",color:"#0ea5e9"}];function en(){return(0,r.jsx)("div",{className:er().strip,children:es.map(e=>(0,r.jsxs)("div",{className:er().item,children:[(0,r.jsx)("span",{className:er().label,children:e.label}),(0,r.jsx)("span",{className:er().value,style:{color:e.color},children:e.value})]},e.label))})}var ei=t(5235),eo=t.n(ei);function el(){let[e,a]=(0,s.useState)("loading"),[t,n]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=!1;return async function(){a("loading");try{let t=await fetch("/api/v1/ads/active/home_banner",{cache:"no-store"});if(e)return;if(204===t.status){a("empty");return}if(!t.ok){a("error");return}let r=await t.json();n(r),a("active")}catch(t){e||a("error")}}(),()=>{e=!0}},[]),"active"===e&&t)?(0,r.jsx)("section",{className:eo().banner,children:(0,r.jsxs)("a",{className:eo().adCard,href:t.targetUrl,target:"_blank",rel:"noreferrer","aria-label":"Sponsored content",children:[(0,r.jsx)("span",{className:eo().sponsoredBadge,children:"Sponsored"}),(0,r.jsx)("img",{src:t.imageUrl,alt:"Patreek Sponsored Slot",className:eo().image})]})}):(0,r.jsx)("section",{className:eo().banner,children:(0,r.jsxs)("div",{className:eo().fallback,children:[(0,r.jsx)("p",{className:eo().tag,children:"Featured Partner"}),(0,r.jsx)("h2",{className:eo().title,children:"Book a premium news slot"}),(0,r.jsx)("p",{className:eo().copy,children:"Spotlight your brand inside the Patreek newsroom and multiply impressions across curated audiences."}),(0,r.jsxs)("div",{className:eo().actions,children:[(0,r.jsx)(u.default,{href:"/advertise",className:eo().cta,children:"Book this slot"}),(0,r.jsx)("span",{className:eo().secondary,children:"Reserve limited inventory"})]})]})})}var ec=t(2278),ed=t.n(ec);function eu(e){let{user:a}=e,t=(0,n.useRouter)(),[i,o]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!a||!a.createdAt||!a.email)return;let e=new Date("2025-12-12T00:00:00Z"),t=new Date(a.createdAt),r=a.email.split("@")[0],s=a.username===r||a.username==="".concat(r,"_").concat(a.id),n=localStorage.getItem("patreek_legacy_username_dismissed");t<e&&s&&!n&&o(!0)},[a]),i&&(null==a?void 0:a.username))?(0,r.jsxs)("div",{className:ed().banner,children:[(0,r.jsxs)("div",{className:ed().copy,children:[(0,r.jsx)("h3",{className:ed().title,children:"New: Usernames have arrived!"}),(0,r.jsxs)("p",{className:ed().subtitle,children:["We've reserved ",(0,r.jsxs)("strong",{children:["@",a.username]})," for you. Would you like to keep it or pick a new one?"]})]}),(0,r.jsxs)("div",{className:ed().actions,children:[(0,r.jsx)("button",{type:"button",className:ed().primary,onClick:()=>{t.push("/settings/profile")},children:"Customize"}),(0,r.jsx)("button",{type:"button",className:ed().secondary,onClick:()=>{localStorage.setItem("patreek_legacy_username_dismissed","true"),o(!1)},children:"Keep it"})]})]}):null}var eh=t(6777),ep=t.n(eh);function em(){let e=(0,n.usePathname)();return/^\/pat\/\d+/.test(window.location.pathname)||e&&/^\/pat\/\d+/.test(e)?(0,r.jsx)(c.default,{}):(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:ep().page,children:(0,r.jsx)("p",{className:ep().loading,children:"Loading…"})}),children:(0,r.jsx)(e_,{})})}function e_(){let{mutate:e}=(0,o.kY)(),{initialQuery:a,initialCategoryId:t}=(0,s.useMemo)(()=>{var e;let a=new URLSearchParams(window.location.search),t=null!==(e=a.get("query"))&&void 0!==e?e:"",r=a.get("categoryId"),s=r?Number(r):void 0;return{initialQuery:t,initialCategoryId:Number.isFinite(s)?s:void 0}},[]),[n,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)({open:!1,action:"access this content"}),[p,_]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),[x,b]=(0,s.useState)(()=>({query:a,categoryId:Number.isFinite(t)?t:void 0})),[j,w]=(0,s.useState)(a),S=(0,s.useRef)(!1);(0,s.useEffect)(()=>{let e=!1;return(async()=>{try{let a=await (0,i.r$)();e||c(a.authenticated)}catch(a){e||c(!1)}})(),()=>{e=!0}},[]),(0,s.useEffect)(()=>{let e=!1;return n?(async()=>{try{let a=await (0,i.getUserProfile)();e||y(a)}catch(a){e||y(null)}})():y(null),()=>{e=!0}},[n]),(0,s.useEffect)(()=>{let e=()=>{_(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let k=e=>{h({open:!0,action:e})},D=(0,s.useMemo)(()=>{var e;return["publicFeeds",x.query||"",null!==(e=x.categoryId)&&void 0!==e?e:"all"]},[x]),{data:T=[],isLoading:F}=(0,l.ZP)(D,()=>(0,i.Dk)({query:x.query,categoryId:x.categoryId}),{dedupingInterval:6e5,keepPreviousData:!0}),{data:E=[]}=(0,l.ZP)("publicCategories",i.lL,{dedupingInterval:6e5});(0,s.useEffect)(()=>{E.length&&!S.current&&(S.current=!0,E.forEach(a=>{e(["publicFeeds","",a.id],(0,i.Dk)({query:"",categoryId:a.id}),{populateCache:!0,revalidate:!1}).catch(e=>{console.warn("[HomePage] Prefetch failed for category ".concat(a.name),e)})}))},[E,e]);let A=T[0],R=T.slice(1),I=(0,s.useMemo)(()=>{if(!p)return R;let e=[];return R.forEach((a,t)=>{e.push(a),(t+1)%5==0&&e.push({isAd:!0,adKey:"mobile-feed-".concat(t)})}),e},[R,p]),L=e=>{b(a=>({...a,categoryId:a.categoryId===e?void 0:e}))},H=E.slice(0,8);return(0,r.jsxs)("div",{className:ep().page,children:[(0,r.jsx)(ea.Z,{hasSession:n}),(0,r.jsx)(en,{}),n&&g&&(0,r.jsx)(eu,{user:g}),(0,r.jsx)(el,{}),(0,r.jsxs)("div",{className:ep().layout,children:[(0,r.jsx)("aside",{className:ep().trendingColumn,children:(0,r.jsx)(f,{items:T,onSubscribe:()=>k("subscribe to a category")})}),(0,r.jsxs)("section",{className:ep().feedColumn,children:[(0,r.jsxs)("div",{className:ep().filterCard,children:[(0,r.jsxs)("form",{className:ep().searchForm,onSubmit:e=>{e.preventDefault(),b(e=>({...e,query:j.trim()}))},children:[(0,r.jsx)("input",{type:"search",value:j,onChange:e=>w(e.target.value),placeholder:"Search headlines, tickers, or writers",className:ep().searchInput}),(0,r.jsx)("button",{type:"submit",className:ep().searchButton,children:"Search"}),(x.query||void 0!==x.categoryId)&&(0,r.jsx)("button",{type:"button",className:ep().clearButton,onClick:()=>{w(""),b({query:"",categoryId:void 0})},children:"Clear"})]}),(0,r.jsxs)("div",{className:ep().pillRow,children:[(0,r.jsx)("button",{type:"button",className:"".concat(ep().filterPill," ").concat(void 0===x.categoryId?ep().pillActive:""),onClick:()=>L(void 0),children:"All"}),H.map(e=>(0,r.jsx)("button",{type:"button",className:"".concat(ep().filterPill," ").concat(x.categoryId===e.id?ep().pillActive:""),onClick:()=>L(e.id),children:e.name},e.id))]})]}),(0,r.jsx)(m,{article:A}),(0,r.jsxs)("div",{className:ep().newsStream,children:[F&&(0,r.jsx)("p",{className:ep().loading,children:"Loading stories…"}),!F&&!R.length&&(0,r.jsx)("p",{className:ep().loading,children:"No stories available yet."}),I.map(e=>{var a;return"isAd"in e&&e.isAd?(0,r.jsx)("div",{className:ep().mobileAd,children:(0,r.jsx)(U.Z,{placementId:"mobile-feed-".concat(e.adKey)})},e.adKey):(0,r.jsx)(d.Z,{id:e.id,title:e.title,summary:e.description,source:e.categoryName,createdAt:e.createdAt,patCount:null!==(a=e.pats)&&void 0!==a?a:0,thumbnailUrl:e.imageUrl,requiresAuth:!n,onAuthWall:k},e.id)})]})]}),(0,r.jsxs)("aside",{className:ep().widgetColumn,children:[(0,r.jsx)(v,{}),(0,r.jsx)(Q,{}),(0,r.jsx)("div",{className:ep().adSlot,children:(0,r.jsx)(U.Z,{placementId:"homepage-right-1"})}),(0,r.jsx)(W,{}),(0,r.jsx)(q,{}),(0,r.jsx)("div",{className:ep().adSlot,children:(0,r.jsx)(U.Z,{placementId:"homepage-right-2"})}),(0,r.jsx)(P,{}),(0,r.jsx)("div",{className:ep().adSlot,children:(0,r.jsx)(U.Z,{placementId:"homepage-right-3"})}),(0,r.jsx)(N,{})]})]}),(0,r.jsx)(B.Z,{isOpen:u.open,triggerAction:u.action,onClose:()=>{h(e=>({...e,open:!1}))}}),(0,r.jsx)(C,{})]})}},6140:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var r=t(7437),s=t(7648),n=t(2265),i=t(5561),o=t.n(i);function l(e){let{id:a,title:t,summary:i,source:l,createdAt:c,patCount:d,thumbnailUrl:u,isPattedByCurrentUser:h=!1,requiresAuth:p=!1,onAuthWall:m}=e,[_,g]=(0,n.useState)(!!h),[f,y]=(0,n.useState)(d);(0,n.useEffect)(()=>{y(d)},[d]),(0,n.useEffect)(()=>{g(!!h)},[h]);let x=(0,n.useMemo)(()=>{let e=new Date(c);return Number.isNaN(e.getTime())?c:e.toLocaleDateString(void 0,{month:"short",day:"numeric"})},[c]);return(0,r.jsxs)("article",{className:o().card,children:[(0,r.jsxs)(s.default,{href:"/pat/".concat(a),className:o().interactiveArea,children:[(0,r.jsx)("div",{className:o().thumbnail,children:u?(0,r.jsx)("img",{src:u,alt:"",loading:"lazy"}):(0,r.jsx)("span",{className:o().fallback,children:"Patreek"})}),(0,r.jsxs)("div",{className:o().body,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:o().title,children:t}),i&&(0,r.jsx)("p",{className:o().summary,children:i})]}),(0,r.jsxs)("div",{className:o().meta,children:[l&&(0,r.jsx)("span",{className:o().source,children:l}),(0,r.jsx)("span",{className:o().date,children:x})]})]})]}),(0,r.jsxs)("button",{className:"".concat(o().patButton," ").concat(_?o().active:""),onClick:()=>{if(p&&m){m("pat this story");return}g(e=>{let a=!e;return y(e=>Math.max(0,e+(a?1:-1))),a})},"aria-pressed":_,type:"button",children:[(0,r.jsx)("span",{className:o().emoji,children:_?"\uD83E\uDDE1":"\uD83E\uDD0D"}),(0,r.jsx)("span",{children:null!=f?f:0})]})]})}},6777:function(e){e.exports={page:"page_page__556_G",page_adSection:"page_page_adSection__YBy4L",featuredBanner:"page_featuredBanner__gVBxk",featuredTag:"page_featuredTag__QS0D4",featuredTitle:"page_featuredTitle__EG0T9",featuredCopy:"page_featuredCopy__9OpMO",featuredActions:"page_featuredActions__I6vDM",featuredButton:"page_featuredButton__QFumy",topBar:"page_topBar__ZVnu0",topLeft:"page_topLeft__N9WJX",brand:"page_brand__7TV1Q",highlight:"page_highlight__Jnelb",layout:"page_layout__p93s2",trendingColumn:"page_trendingColumn__cuOEm",feedColumn:"page_feedColumn___hpXd",filterCard:"page_filterCard__inTmn",searchForm:"page_searchForm__rwhjA",searchInput:"page_searchInput__bMdhk",searchButton:"page_searchButton__7fnJl",clearButton:"page_clearButton___7mv6",pillRow:"page_pillRow__kI7iw",filterPill:"page_filterPill__x09Gl",pillActive:"page_pillActive__219_U",newsStream:"page_newsStream__ucAC7",mobileAd:"page_mobileAd__lCMnk",widgetColumn:"page_widgetColumn__36IcY",adSlot:"page_adSlot__h3xPr",loading:"page_loading__4WMny"}},4:function(e){e.exports={banner:"AppDownloadBanner_banner__hJ2ed",title:"AppDownloadBanner_title__jLwdF",buttons:"AppDownloadBanner_buttons__EzSU7",storeButton:"AppDownloadBanner_storeButton___sw7W"}},5235:function(e){e.exports={banner:"DynamicHomeBanner_banner__rHzID",adCard:"DynamicHomeBanner_adCard__nwE1J",sponsoredBadge:"DynamicHomeBanner_sponsoredBadge__lpzvd",image:"DynamicHomeBanner_image___Tz_O",fallback:"DynamicHomeBanner_fallback__bHKWG",tag:"DynamicHomeBanner_tag__TmK3q",title:"DynamicHomeBanner_title__yig2w",copy:"DynamicHomeBanner_copy__gTz02",actions:"DynamicHomeBanner_actions__cD_Fu",cta:"DynamicHomeBanner_cta___yJuW",secondary:"DynamicHomeBanner_secondary__rAcnp"}},2278:function(e){e.exports={banner:"UsernameSetupBanner_banner__hhRto",copy:"UsernameSetupBanner_copy__qtfxU",title:"UsernameSetupBanner_title__AL_1i",subtitle:"UsernameSetupBanner_subtitle__CqAUy",actions:"UsernameSetupBanner_actions__soxEf",primary:"UsernameSetupBanner_primary__543qo",secondary:"UsernameSetupBanner_secondary__PIw4m"}},5561:function(e){e.exports={card:"NewsCard_card__Bm9sO",interactiveArea:"NewsCard_interactiveArea__EKyXH",thumbnail:"NewsCard_thumbnail__BAIOz",fallback:"NewsCard_fallback__0OCyu",body:"NewsCard_body__OdhJz",title:"NewsCard_title__WyhML",summary:"NewsCard_summary__EYmvD",meta:"NewsCard_meta__7xLcK",source:"NewsCard_source___WCHw",date:"NewsCard_date__tt3Qu",patButton:"NewsCard_patButton__NBU4h",emoji:"NewsCard_emoji__SUdPj",active:"NewsCard_active__yE_Gf"}},7436:function(e){e.exports={widget:"DailyFocusWidget_widget__hG2tQ",title:"DailyFocusWidget_title__QvQnQ",copy:"DailyFocusWidget_copy__C1LeO",progress:"DailyFocusWidget_progress__4XxHH",track:"DailyFocusWidget_track__wgSZg"}},1274:function(e){e.exports={heroCard:"HeroCard_heroCard__zu_uW",media:"HeroCard_media__ewdUg",overlay:"HeroCard_overlay__vFg_V",tag:"HeroCard_tag__ay_x2",title:"HeroCard_title__llvFx",copy:"HeroCard_copy__y1NeB",placeholder:"HeroCard_placeholder__LDCeZ",placeholderTitle:"HeroCard_placeholderTitle__F8h2I",placeholderCopy:"HeroCard_placeholderCopy__AzyHU"}},1198:function(e){e.exports={strip:"StatStrip_strip__fPQLD",item:"StatStrip_item___sWcD",label:"StatStrip_label__6AQO4",value:"StatStrip_value__ehz4l"}},8240:function(e){e.exports={sidebar:"TrendingSidebar_sidebar__Uxjsg",title:"TrendingSidebar_title__jGHhk",headerRow:"TrendingSidebar_headerRow__woDbu",subscribeButton:"TrendingSidebar_subscribeButton__k0Vna",list:"TrendingSidebar_list__G16PV",listItem:"TrendingSidebar_listItem__U4l_K",item:"TrendingSidebar_item__tIkPv",index:"TrendingSidebar_index__v7Bd6",headline:"TrendingSidebar_headline__dLaPn",meta:"TrendingSidebar_meta__qaWvd",thumbnail:"TrendingSidebar_thumbnail__B1rLd",empty:"TrendingSidebar_empty__SP_TJ",emptyCopy:"TrendingSidebar_emptyCopy__vXwfs"}},5171:function(e){e.exports={widget:"WhoToFollowWidget_widget__Xr_Ey",title:"WhoToFollowWidget_title__itY3H",list:"WhoToFollowWidget_list__X80rG",item:"WhoToFollowWidget_item__tNEoe",name:"WhoToFollowWidget_name__1Qjaw",info:"WhoToFollowWidget_info__XKKar",handle:"WhoToFollowWidget_handle__kwFJp",button:"WhoToFollowWidget_button__wLouO"}},2783:function(e){e.exports={widget:"ForexWidget_widget__y9SJv",header:"ForexWidget_header__PlTjQ",headerLeft:"ForexWidget_headerLeft__UeMyV",headerBar:"ForexWidget_headerBar__ymkqS",headerTitle:"ForexWidget_headerTitle__urkpX",headerRight:"ForexWidget_headerRight__mVf6m",baseCurrency:"ForexWidget_baseCurrency__t4VxB",ratesList:"ForexWidget_ratesList__7rlSP",rateItem:"ForexWidget_rateItem__taUD1",rateLeft:"ForexWidget_rateLeft__IptRz",rateSymbol:"ForexWidget_rateSymbol__px4uB",rateCurrency:"ForexWidget_rateCurrency__4VSh3",rateRight:"ForexWidget_rateRight__k_oKR",rateValue:"ForexWidget_rateValue__UG1Ka",rateChange:"ForexWidget_rateChange__2R2YH",positive:"ForexWidget_positive__T0qhI",negative:"ForexWidget_negative__Q1UK4",loading:"ForexWidget_loading__sgjhC",error:"ForexWidget_error__pybT9"}}},function(e){e.O(0,[126,7123,4977,6990,2972,3145,466,9752,7029,9216,4573,2971,2117,1744],function(){return e(e.s=6995)}),_N_E=e.O()}]);