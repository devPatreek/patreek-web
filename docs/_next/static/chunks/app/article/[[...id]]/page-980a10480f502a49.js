(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{2705:function(e,t,r){Promise.resolve().then(r.bind(r,4440))},4440:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var a=r(7437),n=r(2265),c=r(5475),l=r(9116);let i="patreek_article_";function o(){try{let e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){let a=localStorage.key(r);if(null==a?void 0:a.startsWith(i))try{let r=localStorage.getItem(a);if(r){let n=JSON.parse(r);e-n.timestamp>6048e5&&t.push(a)}}catch(e){t.push(a)}}t.forEach(e=>localStorage.removeItem(e))}catch(e){console.error("Error clearing expired cache:",e)}}o();var s=r(7648),d=r(3145),u=r(1402),h=r.n(u),_=r(7398),m=r.n(_);function f(e){var t;let{article:r}=e,[c,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");l(e.matches);let t=e=>l(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);let i=(t=r.createdAt,m()(t).isSame(m()(),"day"))?"Today in":m()(r.createdAt).format("MMM DD");return(0,a.jsxs)("div",{className:"".concat(h().container," ").concat(c?h().dark:""),children:[(0,a.jsx)("header",{className:h().header,children:(0,a.jsxs)("div",{className:h().headerInner,children:[(0,a.jsxs)(s.default,{href:"/",className:h().logoLink,children:[(0,a.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:50,height:50,className:h().logo}),(0,a.jsx)("span",{className:h().brandName,children:"PATREEK"})]}),(0,a.jsxs)("div",{className:h().headerCenter,children:[(0,a.jsx)("h1",{className:h().categoryName,children:r.categoryName}),(0,a.jsx)("p",{className:h().date,children:i})]})]})}),(0,a.jsx)("main",{className:h().main,children:(0,a.jsxs)("article",{className:h().article,children:[r.imageUrl&&(0,a.jsx)("div",{className:h().imageWrapper,children:(0,a.jsx)("img",{src:r.imageUrl,alt:r.title,className:h().image})}),(0,a.jsx)("h1",{className:h().title,children:r.title}),r.description&&(0,a.jsx)("p",{className:h().description,children:r.description}),(0,a.jsx)("div",{className:h().content,dangerouslySetInnerHTML:{__html:r.content}}),(0,a.jsx)("div",{className:h().unlockBanner,children:(0,a.jsxs)("div",{className:h().unlockBannerContent,children:[(0,a.jsx)("p",{className:h().unlockText,children:"UNLOCK YOUR NEWS FEED"}),(0,a.jsxs)("p",{className:h().unlockDescription,children:["Register to get the latest updates from the topics"," ",(0,a.jsx)("span",{className:h().unlockUnderline,children:"you"})," care about"]}),(0,a.jsxs)("div",{className:h().unlockButtons,children:[(0,a.jsx)("a",{href:"https://apps.apple.com/us/app/patreek/id6547858283",target:"_blank",rel:"noopener noreferrer",className:h().createAccountButton,children:"Create account"}),(0,a.jsx)("span",{className:h().or,children:"or"}),(0,a.jsx)("a",{href:"https://apps.apple.com/us/app/patreek/id6547858283",target:"_blank",rel:"noopener noreferrer",className:h().loginButton,children:"Login"})]})]})})]})})]})}function p(){let e=(0,c.usePathname)(),[t,r]=(0,n.useState)(null),[s,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);return((0,n.useEffect)(()=>{async function t(){let t=null==e?void 0:e.match(/\/article\/(\d+)/);if(!t){h("Invalid article ID"),d(!1);return}let a=parseInt(t[1],10);if(isNaN(a)||a<=0){h("Invalid article ID"),d(!1);return}try{d(!0);let e=function(e){try{let t="".concat(i).concat(e),r=localStorage.getItem(t);if(!r)return null;let a=JSON.parse(r);if(Date.now()-a.timestamp>6048e5)return localStorage.removeItem(t),null;return a.data}catch(e){return console.error("Error reading from cache:",e),null}}(a);if(e){console.log("[ArticlePage] Using cached article ".concat(a)),r(e),h(null),d(!1);return}console.log("[ArticlePage] Fetching article ".concat(a," from API"));let t=await (0,l.S)(a);t?(function(e,t){let r="".concat(i).concat(e),a={data:t,timestamp:Date.now()};try{localStorage.setItem(r,JSON.stringify(a))}catch(e){if(console.error("Error writing to cache:",e),e instanceof DOMException&&"QuotaExceededError"===e.name){o();try{localStorage.setItem(r,JSON.stringify(a))}catch(e){console.error("Failed to cache after cleanup:",e)}}}}(a,t),r(t),h(null)):h("Article not found or not available")}catch(e){console.error("Failed to load article:",e),h("Failed to load article. Please try again later.")}finally{d(!1)}}e&&t()},[e]),s)?(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333"},children:(0,a.jsx)("p",{children:"Loading article..."})}):u||!t?(0,a.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333",padding:"20px"},children:[(0,a.jsx)("p",{children:u||"Article not found"}),(0,a.jsx)("a",{href:"/",style:{marginTop:"16px",color:"#667eea",textDecoration:"underline"},children:"‚Üê Back to Home"})]}):(0,a.jsx)(f,{article:t})}},9116:function(e,t,r){"use strict";r.d(t,{D:function(){return n},S:function(){return c}});let a="https://patreekbackend-env.eba-ifvfvi7q.us-east-1.elasticbeanstalk.com";async function n(){try{let e=await fetch("".concat(a,"/api/v1/feeds/public"),{cache:"default",headers:{"Cache-Control":"public, max-age=3600"}});if(!e.ok)throw Error("Failed to fetch public feeds: ".concat(e.status));return((await e.json()).content||[]).slice(0,30)}catch(e){return console.error("Error fetching public feeds:",e),[]}}async function c(e){try{let t=await fetch("".concat(a,"/api/v1/feeds/public/").concat(e),{cache:"default",headers:{"Cache-Control":"public, max-age=604800"}});if(!t.ok){if(404===t.status||403===t.status)return null;throw Error("Failed to fetch public feed: ".concat(t.status))}return await t.json()}catch(e){return console.error("Error fetching public feed:",e),null}}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var a=r(2972),n=r.n(a)},1402:function(e){e.exports={container:"ArticleReader_container__jO2L5",dark:"ArticleReader_dark__PbS6A",header:"ArticleReader_header__dbPzK",headerInner:"ArticleReader_headerInner__yrlm4",logoLink:"ArticleReader_logoLink__Kc5xR",logo:"ArticleReader_logo__Ffm7W",brandName:"ArticleReader_brandName__e35z5",headerCenter:"ArticleReader_headerCenter__ju69k",categoryName:"ArticleReader_categoryName__DrJk6",date:"ArticleReader_date__7kari",main:"ArticleReader_main__vwq7A",article:"ArticleReader_article__XHm3G",imageWrapper:"ArticleReader_imageWrapper__NI6E9",image:"ArticleReader_image__pYNG4",title:"ArticleReader_title__0ba_F",description:"ArticleReader_description__FGiUV",content:"ArticleReader_content__KVC5g",unlockBanner:"ArticleReader_unlockBanner__4dPP0",unlockBannerContent:"ArticleReader_unlockBannerContent__xQm1Q",unlockText:"ArticleReader_unlockText__XI_xN",unlockDescription:"ArticleReader_unlockDescription__D8kgb",unlockUnderline:"ArticleReader_unlockUnderline__MRWY0",unlockButtons:"ArticleReader_unlockButtons__byHAu",createAccountButton:"ArticleReader_createAccountButton__EDmQp",or:"ArticleReader_or__Lg_lu",loginButton:"ArticleReader_loginButton__IL6cP"}}},function(e){e.O(0,[872,990,972,145,971,117,744],function(){return e(e.s=2705)}),_N_E=e.O()}]);