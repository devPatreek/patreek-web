(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{2705:function(e,t,r){Promise.resolve().then(r.bind(r,4440))},4440:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var a=r(7437),c=r(2265),n=r(5475),i=r(9116);let l="patreek_article_";function o(){try{let e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){let a=localStorage.key(r);if(null==a?void 0:a.startsWith(l))try{let r=localStorage.getItem(a);if(r){let c=JSON.parse(r);e-c.timestamp>6048e5&&t.push(a)}}catch(e){t.push(a)}}t.forEach(e=>localStorage.removeItem(e))}catch(e){console.error("Error clearing expired cache:",e)}}o();var s=r(7648),d=r(1402),u=r.n(d),h=r(7398),f=r.n(h);function m(e){var t;let{article:r}=e,[n,i]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");i(e.matches);let t=e=>i(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);let l=(t=r.createdAt,f()(t).isSame(f()(),"day"))?"Today in":f()(r.createdAt).format("MMM DD");return(0,a.jsxs)("div",{className:"".concat(u().container," ").concat(n?u().dark:""),children:[(0,a.jsx)("header",{className:u().header,children:(0,a.jsxs)("div",{className:u().headerContent,children:[(0,a.jsx)(s.default,{href:"/links",className:u().backButton,children:"← Back"}),(0,a.jsxs)("div",{className:u().headerCenter,children:[(0,a.jsx)("h1",{className:u().categoryName,children:r.categoryName}),(0,a.jsx)("p",{className:u().date,children:l})]})]})}),(0,a.jsx)("main",{className:u().main,children:(0,a.jsxs)("article",{className:u().article,children:[r.imageUrl&&(0,a.jsx)("div",{className:u().imageWrapper,children:(0,a.jsx)("img",{src:r.imageUrl,alt:r.title,className:u().image})}),(0,a.jsx)("h1",{className:u().title,children:r.title}),r.description&&(0,a.jsx)("p",{className:u().description,children:r.description}),(0,a.jsx)("div",{className:u().content,dangerouslySetInnerHTML:{__html:r.content}}),(0,a.jsxs)("div",{className:u().registerBanner,children:[(0,a.jsx)("p",{className:u().registerText,children:"Register to get the latest updates from the topics you care about"}),(0,a.jsx)("a",{href:"https://apps.apple.com/us/app/patreek/id6547858283",target:"_blank",rel:"noopener noreferrer",className:u().downloadButton,children:"Download App"})]})]})})]})}function p(){let e=(0,n.usePathname)(),[t,r]=(0,c.useState)(null),[s,d]=(0,c.useState)(!0),[u,h]=(0,c.useState)(null);return((0,c.useEffect)(()=>{async function t(){let t=null==e?void 0:e.match(/\/article\/(\d+)/);if(!t){h("Invalid article ID"),d(!1);return}let a=parseInt(t[1],10);if(isNaN(a)||a<=0){h("Invalid article ID"),d(!1);return}try{d(!0);let e=function(e){try{let t="".concat(l).concat(e),r=localStorage.getItem(t);if(!r)return null;let a=JSON.parse(r);if(Date.now()-a.timestamp>6048e5)return localStorage.removeItem(t),null;return a.data}catch(e){return console.error("Error reading from cache:",e),null}}(a);if(e){console.log("[ArticlePage] Using cached article ".concat(a)),r(e),h(null),d(!1);return}console.log("[ArticlePage] Fetching article ".concat(a," from API"));let t=await (0,i.S)(a);t?(function(e,t){let r="".concat(l).concat(e),a={data:t,timestamp:Date.now()};try{localStorage.setItem(r,JSON.stringify(a))}catch(e){if(console.error("Error writing to cache:",e),e instanceof DOMException&&"QuotaExceededError"===e.name){o();try{localStorage.setItem(r,JSON.stringify(a))}catch(e){console.error("Failed to cache after cleanup:",e)}}}}(a,t),r(t),h(null)):h("Article not found or not available")}catch(e){console.error("Failed to load article:",e),h("Failed to load article. Please try again later.")}finally{d(!1)}}e&&t()},[e]),s)?(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333"},children:(0,a.jsx)("p",{children:"Loading article..."})}):u||!t?(0,a.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333",padding:"20px"},children:[(0,a.jsx)("p",{children:u||"Article not found"}),(0,a.jsx)("a",{href:"/",style:{marginTop:"16px",color:"#667eea",textDecoration:"underline"},children:"← Back to Home"})]}):(0,a.jsx)(m,{article:t})}},9116:function(e,t,r){"use strict";r.d(t,{D:function(){return c},S:function(){return n}});let a="https://patreekbackend-env.eba-ifvfvi7q.us-east-1.elasticbeanstalk.com";async function c(){try{let e=await fetch("".concat(a,"/api/v1/feeds/public"),{cache:"default",headers:{"Cache-Control":"public, max-age=3600"}});if(!e.ok)throw Error("Failed to fetch public feeds: ".concat(e.status));return(await e.json()).content||[]}catch(e){return console.error("Error fetching public feeds:",e),[]}}async function n(e){try{let t=await fetch("".concat(a,"/api/v1/feeds/public/").concat(e),{cache:"default",headers:{"Cache-Control":"public, max-age=604800"}});if(!t.ok){if(404===t.status||403===t.status)return null;throw Error("Failed to fetch public feed: ".concat(t.status))}return await t.json()}catch(e){return console.error("Error fetching public feed:",e),null}}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return c.a}});var a=r(2972),c=r.n(a)},1402:function(e){e.exports={container:"ArticleReader_container__jO2L5",dark:"ArticleReader_dark__PbS6A",header:"ArticleReader_header__dbPzK",headerContent:"ArticleReader_headerContent__Cmcyo",backButton:"ArticleReader_backButton__izdvF",headerCenter:"ArticleReader_headerCenter__ju69k",categoryName:"ArticleReader_categoryName__DrJk6",date:"ArticleReader_date__7kari",main:"ArticleReader_main__vwq7A",article:"ArticleReader_article__XHm3G",imageWrapper:"ArticleReader_imageWrapper__NI6E9",image:"ArticleReader_image__pYNG4",title:"ArticleReader_title__0ba_F",description:"ArticleReader_description__FGiUV",content:"ArticleReader_content__KVC5g",registerBanner:"ArticleReader_registerBanner__cpqDj",registerText:"ArticleReader_registerText__9hCAf",downloadButton:"ArticleReader_downloadButton__Fp9N_"}}},function(e){e.O(0,[872,990,972,971,117,744],function(){return e(e.s=2705)}),_N_E=e.O()}]);