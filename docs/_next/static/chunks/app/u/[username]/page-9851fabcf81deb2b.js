(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8977],{9092:function(e,a,r){Promise.resolve().then(r.bind(r,6599))},6599:function(e,a,r){"use strict";r.d(a,{default:function(){return g}});var t=r(7437),n=r(2265),o=r(3595),l=r(8349),s=r(4482),i=r.n(s);function c(e){let{bannerUrl:a,avatarUrl:r,name:o,username:l,bio:s,joinDate:c,followersCount:d=0,followingCount:u=0,patsReceived:_=0,isFollowing:f=!1,onToggleFollow:m}=e,[h,p]=(0,n.useState)(f),[v,x]=(0,n.useState)(!1),j=async()=>{if(v)return;let e=!h;p(e),x(!0);try{await m(e)}catch(a){p(!e)}finally{x(!1)}};return(0,t.jsxs)("section",{className:i().header,children:[(0,t.jsx)("div",{className:i().banner,children:a?(0,t.jsx)("img",{src:a,alt:"".concat(o," banner")}):null}),(0,t.jsx)("div",{className:i().avatarWrapper,children:r?(0,t.jsx)("img",{src:r,alt:"".concat(o," avatar")}):(0,t.jsx)("div",{className:i().avatarFallback,children:o[0]})}),(0,t.jsxs)("div",{className:i().meta,children:[(0,t.jsxs)("div",{className:i().flexRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:o}),(0,t.jsxs)("p",{className:i().handle,children:["@",l]})]}),(0,t.jsx)("button",{className:"".concat(i().followBtn," ").concat(h?i().following:""),onClick:j,disabled:v,children:h?"Following":"Follow"})]}),s&&(0,t.jsx)("p",{className:i().bio,children:s}),(0,t.jsx)("div",{className:i().date,children:c?"Joined ".concat(c):"Joined recently"}),(0,t.jsxs)("div",{className:i().statsRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:d.toLocaleString()}),(0,t.jsx)("p",{children:"Followers"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:u.toLocaleString()}),(0,t.jsx)("p",{children:"Following"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:_.toLocaleString()}),(0,t.jsx)("p",{children:"Pats Received"})]})]})]})]})}var d=r(5535),u=r(5561),_=r.n(u);function f(e){let{title:a,summary:r,source:o,createdAt:l,patCount:s,avatarUrl:i,isPattedByCurrentUser:c=!1}=e,[d,u]=(0,n.useState)(!!c),[f,m]=(0,n.useState)(s);(0,n.useEffect)(()=>{m(s)},[s]),(0,n.useEffect)(()=>{u(!!c)},[c]);let h=(0,n.useMemo)(()=>{let e=new Date(l);return Number.isNaN(e.getTime())?l:e.toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[l]),p=(0,n.useMemo)(()=>i?null:a.split(" ").slice(0,2).map(e=>e[0]).join("").toUpperCase(),[a,i]);return(0,t.jsxs)("article",{className:_().card,children:[(0,t.jsx)("div",{className:_().avatar,children:i?(0,t.jsx)("img",{src:i,alt:"Feed avatar",loading:"lazy"}):(0,t.jsx)("span",{children:p||"X"})}),(0,t.jsxs)("div",{className:_().content,children:[(0,t.jsxs)("div",{className:_().header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:_().title,children:a}),r&&(0,t.jsx)("p",{className:_().summary,children:r})]}),(0,t.jsxs)("button",{className:"".concat(_().patButton," ").concat(d?_().active:""),onClick:()=>{u(e=>{let a=!e;return m(e=>Math.max(0,e+(a?1:-1))),a})},"aria-pressed":d,type:"button",children:[(0,t.jsx)("span",{className:_().emoji,children:d?"\uD83E\uDDE1":"\uD83E\uDD0D"}),(0,t.jsx)("span",{children:null!=f?f:0})]})]}),(0,t.jsxs)("div",{className:_().meta,children:[o&&(0,t.jsx)("span",{className:_().source,children:o}),(0,t.jsx)("span",{className:_().date,children:h})]})]})]})}let m=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to load feed page");return e.json()});function h(e){let{fetchUrl:a,queryKey:r}=e,{data:o,size:l,setSize:s,error:i,isValidating:c}=(0,d.ZP)((e,t)=>t&&0===t.content.length?null:[r,"".concat(a).concat(a.includes("?")?"&":"?","page=").concat(e,"&size=").concat(10)],m,{revalidateFirstPage:!1}),u=(0,n.useMemo)(()=>{var e;return null!==(e=null==o?void 0:o.flatMap(e=>(null==e?void 0:e.content)||[]))&&void 0!==e?e:[]},[o]),_=!o&&!i,h=c&&l>0,p=o&&o[o.length-1]&&o[o.length-1].content.length<10,v=(0,n.useRef)(null),x=(0,n.useRef)(null);return((0,n.useEffect)(()=>{var e;if(x.current)return null===(e=v.current)||void 0===e||e.disconnect(),v.current=new IntersectionObserver(e=>{!e[0].isIntersecting||h||p||s(e=>e+1)},{rootMargin:"200px"}),v.current.observe(x.current),()=>{var e;null===(e=v.current)||void 0===e||e.disconnect()}},[h,p,s,l]),i)?(0,t.jsx)("p",{style:{color:"#ef4444"},children:"Unable to load content."}):_?(0,t.jsx)("p",{children:"Loading stories…"}):(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.map(e=>{var a;return(0,t.jsx)(f,{title:e.title,summary:e.excerpt||e.body,source:e.source||e.categoryName,createdAt:e.createdAt||e.publishedAt,patCount:null!==(a=e.patCount)&&void 0!==a?a:0,avatarUrl:e.authorAvatarUrl||e.avatarUrl,isPattedByCurrentUser:e.hasPatted},e.id)}),(0,t.jsx)("div",{ref:x}),h&&(0,t.jsx)("p",{children:"Loading more…"}),p&&u.length>0&&(0,t.jsx)("p",{style:{color:"#6b7280"},children:"You’ve reached the latest posts."})]})}var p=r(7029),v=r(9799),x=r.n(v);let j=[{key:"curated",label:"Curated Feeds",endpoint:"feeds?tab=curated"},{key:"pats",label:"Pats",endpoint:"pats"},{key:"comments",label:"Comments",endpoint:"comments"}];function g(e){var a,r,s;let{params:i}=e,d=null==i?void 0:i.username,[u,_]=(0,n.useState)(null),[f,m]=(0,n.useState)(!0),[v,g]=(0,n.useState)(""),[N,b]=(0,n.useState)(j[0].key);(0,n.useEffect)(()=>{if(!d)return;let e=!1;return m(!0),g(""),(0,p.Zm)(d).then(a=>{if(!e){if(!a){g("User not found");return}_(a)}}).catch(a=>{e||(console.warn("[Profile] failed to load profile",a),g("Unable to load profile"))}).finally(()=>{e||m(!1)}),()=>{e=!0}},[d]);let w=async e=>{if(!d)throw Error("Username unavailable");if(!(await fetch("/api/v1/users/".concat(d,"/").concat(e?"follow":"unfollow"),{method:e?"POST":"DELETE",credentials:"include"})).ok)throw Error("Failed to update follow status")},k=null==u?void 0:u.bannerUrl,y=(null==u?void 0:u.createdAt)?new Date(u.createdAt).toLocaleDateString(void 0,{month:"short",year:"numeric"}):void 0,C=(0,n.useMemo)(()=>{let e=j.find(e=>e.key===N);return e&&d?"/api/v1/users/".concat(d,"/").concat(e.endpoint):""},[N,d]);return d?(0,t.jsxs)("div",{className:x().page,children:[(0,t.jsx)(o.Z,{}),(0,t.jsxs)("main",{className:x().main,children:[f&&(0,t.jsx)("div",{className:x().bannerLoading,children:"Loading profile…"}),v&&(0,t.jsx)("div",{className:x().bannerError,children:v}),!f&&u&&(0,t.jsx)(c,{bannerUrl:k,avatarUrl:u.avatarUrl,name:u.fullName||u.name||u.username||"Patreek User",username:u.username||d,bio:u.bio||u.headline,joinDate:y,followersCount:null!==(a=u.followersCount)&&void 0!==a?a:0,followingCount:null!==(r=u.followingCount)&&void 0!==r?r:0,patsReceived:null!==(s=u.totalPats)&&void 0!==s?s:0,isFollowing:u.isFollowing,onToggleFollow:w}),(0,t.jsx)("div",{className:x().tabs,children:j.map(e=>(0,t.jsx)("button",{className:"".concat(x().tab," ").concat(N===e.key?x().tabActive:""),onClick:()=>b(e.key),type:"button",children:e.label},e.key))}),C&&(0,t.jsx)("div",{className:x().feedArea,children:(0,t.jsx)(h,{fetchUrl:C,queryKey:"".concat(d,"-").concat(N)})})]}),(0,t.jsx)(l.Z,{})]}):null}},8349:function(e,a,r){"use strict";r.d(a,{Z:function(){return i}});var t=r(7437),n=r(7648),o=r(3145),l=r(1468),s=r.n(l);function i(){return(0,t.jsx)("footer",{className:s().footer,children:(0,t.jsxs)("div",{className:s().container,children:[(0,t.jsxs)("div",{className:s().footerGrid,children:[(0,t.jsx)(n.default,{href:"/",className:s().logoLink,children:(0,t.jsx)(o.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:111,height:60,className:s().footerLogo})}),(0,t.jsxs)("div",{className:s().footerColumn,children:[(0,t.jsx)("div",{className:s().columnTitle,children:"Product"}),(0,t.jsx)(n.default,{href:"/",className:s().footerLink,children:"Home"}),(0,t.jsx)("a",{href:"https://patreek.com/features",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Features"}),(0,t.jsx)("a",{href:"https://patreek.com/pricing",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Pricing"})]}),(0,t.jsxs)("div",{className:s().footerColumn,children:[(0,t.jsx)("div",{className:s().columnTitle,children:"Company"}),(0,t.jsx)("a",{href:"https://patreek.com/about",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"About"}),(0,t.jsx)("a",{href:"https://patreek.com/contact",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Contact"}),(0,t.jsx)(n.default,{href:"/privacy",className:s().footerLink,children:"Privacy Policy"}),(0,t.jsx)(n.default,{href:"/terms",className:s().footerLink,children:"Terms & Conditions"})]}),(0,t.jsxs)("div",{className:s().footerColumn,children:[(0,t.jsx)("div",{className:s().columnTitle,children:"Social"}),(0,t.jsx)("a",{href:"https://x.com/",target:"_blank",rel:"noopener noreferrer",className:s().footerLink,children:"X (Twitter)"}),(0,t.jsx)("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",className:s().footerLink,children:"Instagram"}),(0,t.jsx)("a",{href:"https://www.linkedin.com/",target:"_blank",rel:"noopener noreferrer",className:s().footerLink,children:"LinkedIn"})]})]}),(0,t.jsx)("div",{className:s().divider}),(0,t.jsxs)("div",{className:s().footerBottom,children:[(0,t.jsxs)("div",{className:s().copyright,children:["\xa9 ",new Date().getFullYear()," Patreek. All rights reserved."]}),(0,t.jsx)("div",{className:s().companyInfo,children:"Patreek App is owned by Sentigraph Inc."})]})]})})}},9799:function(e){e.exports={page:"page_page__bc9x8",main:"page_main__NKoTg",bannerLoading:"page_bannerLoading__bk8_3",bannerError:"page_bannerError__8_WKb",tabs:"page_tabs__peiXs",tab:"page_tab__uQJ_s",tabActive:"page_tabActive__LVwKc",feedArea:"page_feedArea__eeevP"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",container:"Footer_container__KpDnW",footerGrid:"Footer_footerGrid__K31Dz",footerColumn:"Footer_footerColumn__kGECR",columnTitle:"Footer_columnTitle__WcnMX",footerLink:"Footer_footerLink__xz_wT",logoLink:"Footer_logoLink__Xoc6g",footerLogo:"Footer_footerLogo__4BA6d",divider:"Footer_divider__YAbaq",footerBottom:"Footer_footerBottom__YIYBj",copyright:"Footer_copyright__j4atB",companyInfo:"Footer_companyInfo__xaSgf",dark:"Footer_dark__otfV8"}},5561:function(e){e.exports={card:"NewsCard_card__Bm9sO",avatar:"NewsCard_avatar__rgeGd",content:"NewsCard_content__ExVVW",header:"NewsCard_header__dmSwi",title:"NewsCard_title__WyhML",summary:"NewsCard_summary__EYmvD",meta:"NewsCard_meta__7xLcK",source:"NewsCard_source___WCHw",date:"NewsCard_date__tt3Qu",patButton:"NewsCard_patButton__NBU4h",emoji:"NewsCard_emoji__SUdPj",active:"NewsCard_active__yE_Gf"}},4482:function(e){e.exports={header:"ProfileHeader_header__g5kUM",banner:"ProfileHeader_banner__Edbjm",avatarWrapper:"ProfileHeader_avatarWrapper__K_duL",avatarFallback:"ProfileHeader_avatarFallback__LuCn4",meta:"ProfileHeader_meta__U5wn_",flexRow:"ProfileHeader_flexRow__JbUlk",handle:"ProfileHeader_handle__Tgfeg",bio:"ProfileHeader_bio__6Y4vv",date:"ProfileHeader_date__kQPnO",statsRow:"ProfileHeader_statsRow__g3e5L",followBtn:"ProfileHeader_followBtn__wQY_g",following:"ProfileHeader_following__4NyFh"}}},function(e){e.O(0,[3370,9494,2972,5726,8703,7029,3595,2971,2117,1744],function(){return e(e.s=9092)}),_N_E=e.O()}]);