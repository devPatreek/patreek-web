(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6995:function(e,a,t){Promise.resolve().then(t.bind(t,3360))},4038:function(e,a,t){"use strict";t.d(a,{default:function(){return o}});var l=t(7437),s=t(2265),i=t(9376),n=t(9116),r=t(4422),c=t(5148);function o(){let e=(0,i.usePathname)(),[a,t]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async function(){let a=null;{let e=window.location.pathname,t=e.match(/\/article\/(\d+)/);if(t&&(a=parseInt(t[1],10),console.log("[ArticlePage] Extracted article ID from window.location.pathname: ".concat(a," (path: ").concat(e,")"))),!a){let e=window.location.href.match(/\/article\/(\d+)/);e&&(a=parseInt(e[1],10),console.log("[ArticlePage] Extracted article ID from window.location.href: ".concat(a)))}}if(!a&&e){let t=e.match(/\/article\/(\d+)/);t&&(a=parseInt(t[1],10),console.log("[ArticlePage] Extracted article ID from pathname: ".concat(a)))}if(!a||isNaN(a)||a<=0){console.error("[ArticlePage] Invalid article ID:",{articleId:a,pathname:e,windowPathname:window.location.pathname,windowHref:window.location.href,userAgent:window.navigator.userAgent}),h("Invalid article ID"),d(!1);return}try{d(!0),console.log("[ArticlePage] Loading article ".concat(a,"..."));let e=(0,r.A)(a);if(e){console.log("[ArticlePage] Using cached article ".concat(a)),t(e),h(null),d(!1);return}console.log("[ArticlePage] Fetching article ".concat(a," from API"));let l=await (0,n.ST)(a);if(!l){let e=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);console.log("[ArticlePage] Article ".concat(a," not found or not public (returned null). Safari: ").concat(e)),e&&console.warn("[ArticlePage] Safari detected - this might be a CORS or fetch issue. Check network tab."),h("Article not found or not available"),setTimeout(()=>{window.location.href="https://patreek.com/public/pats/"},2e3);return}(0,r.t)(a,l),t(l),h(null),console.log("[ArticlePage] Successfully loaded article ".concat(a,": ").concat(l.title))}catch(e){console.error("[ArticlePage] Failed to load article:",e),h("Failed to load article. Please try again later.")}finally{d(!1)}})()},[e]),o)?(0,l.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333"},children:(0,l.jsx)("p",{children:"Loading article..."})}):u||!a?(0,l.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333",padding:"20px"},children:[(0,l.jsx)("p",{children:u||"Article not found"}),(0,l.jsx)("a",{href:"/",style:{marginTop:"16px",color:"#667eea",textDecoration:"underline"},children:"← Back to Home"})]}):(0,l.jsx)(c.Z,{article:a})}},3360:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var l=t(7437),s=t(2265),i=t(9376),n=t(9116),r=t(6777),c=t.n(r),o=t(3145),d=t(8349),u=t(7715),h=t.n(u);function m(e){let{open:a,onClose:t,onSuccess:i}=e,[r,c]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[p,g]=(0,s.useState)([]),[f,x]=(0,s.useState)([]),[j,_]=(0,s.useState)(!1),[N,y]=(0,s.useState)(!1),[S,b]=(0,s.useState)({type:"idle"});if((0,s.useEffect)(()=>{if(!a)return;let e=!0;return _(!0),(0,n.CP)().then(a=>{e&&g(a||[])}).finally(()=>{e&&_(!1)}),()=>{e=!1}},[a]),(0,s.useEffect)(()=>{a||(b({type:"idle"}),y(!1))},[a]),!a)return null;let v=f.length<5,w=e=>{f.includes(e)?x(f.filter(a=>a!==e)):v&&x([...f,e])},C=async e=>{if(e.preventDefault(),!r.trim()||!o.trim()||!u.trim()){b({type:"error",message:"Please fill in name, email, and password."});return}if(0===f.length){b({type:"error",message:"Pick at least one category (up to 5)."});return}y(!0),b({type:"idle"});let a={name:r.trim(),email:o.trim(),password:u,categoryIds:f};try{await (0,n.a$)(a),b({type:"success",message:"Account created! Redirecting…"}),null==i||i()}catch(e){b({type:"error",message:e instanceof Error?e.message:"Unable to sign up right now. Please try again."})}finally{y(!1)}},k=e=>{let a=window.location.origin+"/",t=(0,n.Bu)(e,a);window.location.href=t},M=(0,s.useMemo)(()=>j?(0,l.jsx)("div",{className:h().muted,children:"Loading categories…"}):p.length?(0,l.jsx)("div",{className:h().categoryGrid,children:p.map(e=>{let a=f.includes(e.id),t=!a&&!v;return(0,l.jsx)("button",{type:"button",className:[h().chip,a?h().chipSelected:"",t?h().chipDisabled:""].join(" "),onClick:()=>w(e.id),disabled:t,"aria-pressed":a,children:e.name},e.id)})}):(0,l.jsx)("div",{className:h().muted,children:"Categories will load here once available."}),[p,f,v,j]);return(0,l.jsx)("div",{className:h().backdrop,role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:h().modal,children:[(0,l.jsx)("div",{className:h().side,children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:h().sideTitle,children:"Personalized pats in minutes."}),(0,l.jsx)("p",{className:h().sideText,children:"Sign up, choose up to 5 categories, and we'll build your lane of headlines—just like the mobile experience."}),(0,l.jsxs)("ul",{className:h().sideList,children:[(0,l.jsx)("li",{className:h().sideListItem,children:"⚡ Instant access"}),(0,l.jsx)("li",{className:h().sideListItem,children:"\uD83D\uDCF1 Mirror mobile onboarding"}),(0,l.jsx)("li",{className:h().sideListItem,children:"\uD83C\uDFAF Curated by your picks"})]})]})}),(0,l.jsxs)("div",{className:h().main,children:[(0,l.jsxs)("div",{className:h().header,children:[(0,l.jsx)("h2",{className:h().title,children:"Create your Patreek account"}),(0,l.jsx)("button",{className:h().closeButton,"aria-label":"Close signup",onClick:t,children:"\xd7"})]}),(0,l.jsxs)("form",{className:h().form,onSubmit:C,children:[(0,l.jsxs)("div",{className:h().fieldGroup,children:[(0,l.jsx)("label",{className:h().label,htmlFor:"name",children:"Full name"}),(0,l.jsx)("input",{id:"name",className:h().input,value:r,onChange:e=>c(e.target.value),placeholder:"Jane Doe",autoComplete:"name"})]}),(0,l.jsxs)("div",{className:h().fieldGroup,children:[(0,l.jsx)("label",{className:h().label,htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{id:"email",className:h().input,value:o,onChange:e=>d(e.target.value),placeholder:"you@example.com",autoComplete:"email",type:"email"})]}),(0,l.jsxs)("div",{className:h().fieldGroup,children:[(0,l.jsx)("label",{className:h().label,htmlFor:"password",children:"Password"}),(0,l.jsx)("input",{id:"password",className:h().input,value:u,onChange:e=>m(e.target.value),placeholder:"••••••••",type:"password",autoComplete:"new-password"})]}),(0,l.jsxs)("div",{className:h().fieldGroup,children:[(0,l.jsx)("div",{className:h().label,children:"Pick up to 5 categories"}),(0,l.jsx)("div",{className:h().categories,children:M}),(0,l.jsxs)("div",{className:h().muted,children:[f.length," / 5 selected"]})]}),"success"===S.type&&(0,l.jsx)("div",{className:h().status,children:S.message}),"error"===S.type&&(0,l.jsx)("div",{className:"".concat(h().status," ").concat(h().error),children:S.message}),(0,l.jsxs)("div",{className:h().actions,children:[(0,l.jsx)("button",{type:"submit",className:h().primaryButton,disabled:N,children:N?"Signing you up…":"Sign up"}),(0,l.jsx)("button",{type:"button",className:h().secondaryButton,onClick:()=>k("google"),children:"Continue with Google"}),(0,l.jsx)("button",{type:"button",className:h().secondaryButton,onClick:()=>k("apple"),children:"Continue with Apple"})]})]})]})]})})}var p=t(5857),g=t(4038);function f(){let e=(0,i.usePathname)();return/^\/pat\/\d+/.test(window.location.pathname)||e&&/^\/pat\/\d+/.test(e)?(0,l.jsx)(g.default,{}):(0,l.jsx)(x,{})}function x(){let e=(0,i.useRouter)(),[a,t]=(0,s.useState)([]),[r,u]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[f,x]=(0,s.useState)(!1),j=(0,s.useRef)(null),[_,N]=(0,s.useState)(!1),[y,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{!async function(){try{u(!0),g(null);let e=await (0,n.Dk)();t(e)}catch(e){console.warn("[HomePage] Failed to load feeds:",e),t([])}finally{u(!1)}}()},[]);let b=(0,s.useMemo)(()=>{let e=new Map;return a.forEach(a=>{let t=a.categoryName||"Other",l=e.get(t)||[];l.push(a),e.set(t,l)}),Array.from(e.entries()).map(e=>{let[a,t]=e;return{category:a,items:[...t].sort((e,a)=>{let t=e.createdAt?new Date(e.createdAt).getTime():0;return(a.createdAt?new Date(a.createdAt).getTime():0)-t})}})},[a]),v=p.default,w=e=>p[e]||v,C=a=>{e.push("/pat/".concat(a))},k=()=>{let e=j.current;if(!e)return;let{scrollLeft:a,clientWidth:t,scrollWidth:l}=e;N(a>8),S(a+t<l-8)};(0,s.useEffect)(()=>{k();let e=j.current;if(!e)return;let a=()=>k();return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)},[b.length]);let M=e=>{let a=j.current;if(!a)return;let t=a.querySelector(".".concat(c().categoryCard)),l=t?t.offsetWidth+16:320;a.scrollBy({left:"left"===e?-l:l,behavior:"smooth"})};return(0,l.jsxs)("div",{className:c().container,children:[(0,l.jsx)(m,{open:f,onClose:()=>x(!1),onSuccess:()=>x(!1)}),(0,l.jsx)("header",{className:c().header,children:(0,l.jsxs)("div",{className:c().headerInner,children:[(0,l.jsx)("div",{className:c().logoSection,children:(0,l.jsx)(o.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:60,height:60,className:c().logo,priority:!0})}),(0,l.jsxs)("div",{className:c().headerTitle,children:[(0,l.jsx)("h2",{className:c().title,children:"Latest pats by category"}),(0,l.jsx)("p",{className:c().subtitle,children:"Compact lanes of what's trending now"})]})]})}),(0,l.jsxs)("div",{className:c().signupBanner,children:[(0,l.jsxs)("div",{className:c().signupBannerText,children:[(0,l.jsx)("p",{className:c().signupHeadline,children:"Sign up to get personalized pats specially curated for you!"}),(0,l.jsx)("p",{className:c().signupSubhead,children:"Mirror the mobile experience with category picks, SSO, and your own timeline."})]}),(0,l.jsx)("button",{className:c().signupButton,onClick:()=>x(!0),children:"Sign Up"})]}),(0,l.jsxs)("main",{className:"".concat(c().main," ").concat(c().mainRow),children:[(0,l.jsx)("div",{className:c().mainColumn,children:r?(0,l.jsx)("div",{className:c().loadingState,children:(0,l.jsx)("p",{children:"Loading articles..."})}):h?(0,l.jsxs)("div",{className:c().emptyState,children:[(0,l.jsx)("p",{children:h}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:c().retryButton,children:"Retry"})]}):0===b.length?(0,l.jsxs)("div",{className:c().emptyState,children:[(0,l.jsx)("p",{children:"No articles available at the moment."}),(0,l.jsx)("p",{className:c().registerPrompt,children:"Register to get the latest updates from the topics you care about"})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:c().carouselShell,children:[(0,l.jsx)("button",{className:"".concat(c().navButton," ").concat(_?"":c().navButtonDisabled),onClick:()=>M("left"),"aria-label":"Scroll categories left",disabled:!_,children:"‹"}),(0,l.jsx)("div",{className:c().categoryTrack,ref:j,onScroll:k,children:b.map(e=>{let[a,...t]=e.items;return a?(0,l.jsxs)("div",{className:c().categoryCard,children:[(0,l.jsxs)("div",{className:c().categoryHeader,children:[(0,l.jsx)("span",{className:c().categoryIcon,dangerouslySetInnerHTML:{__html:w(e.category)},"aria-hidden":"true"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:c().categoryLabel,children:"Category"}),(0,l.jsx)("h3",{className:c().categoryTitle,children:e.category})]})]}),(0,l.jsxs)("button",{className:c().hero,onClick:()=>C(a.id),"aria-label":"Open ".concat(a.title),children:[(0,l.jsx)("div",{className:c().heroImageWrapper,children:(0,l.jsx)("img",{src:a.imageUrl||"https://insideskills.pl/wp-content/uploads/2024/01/placeholder-6.png",alt:a.title,className:c().heroImage})}),(0,l.jsx)("div",{className:c().heroContent,children:(0,l.jsx)("h4",{className:c().heroTitle,children:a.title})})]}),(0,l.jsx)("div",{className:c().headlines,children:t.map(e=>(0,l.jsxs)("button",{className:c().headlineRow,onClick:()=>C(e.id),children:[(0,l.jsx)("span",{className:c().headlineBullet,children:"•"}),(0,l.jsx)("span",{className:c().headlineText,children:e.title})]},e.id))})]},e.category):null})}),(0,l.jsx)("button",{className:"".concat(c().navButton," ").concat(y?"":c().navButtonDisabled),onClick:()=>M("right"),"aria-label":"Scroll categories right",disabled:!y,children:"›"})]})})}),(0,l.jsx)("aside",{className:c().rightRail,"aria-label":"Sponsored",children:(0,l.jsx)("a",{href:"",rel:"nofollow noopener",target:"_blank",children:(0,l.jsx)("img",{src:"https://landings-cdn.adsterratech.com/referralBanners/png/160%20x%20600%20px.png",alt:"Sponsored banner",className:c().rightRailImage})})})]}),(0,l.jsx)(d.Z,{})]})}},7715:function(e){e.exports={backdrop:"SignupModal_backdrop__Tz3qR",modal:"SignupModal_modal__cSh5M",side:"SignupModal_side__fTJNm",sideTitle:"SignupModal_sideTitle__9fTCT",sideText:"SignupModal_sideText__WKkOo",sideList:"SignupModal_sideList__2Paeo",sideListItem:"SignupModal_sideListItem__udgs9",main:"SignupModal_main__8o56v",header:"SignupModal_header__wRrlG",title:"SignupModal_title__JwKrZ",closeButton:"SignupModal_closeButton__1Ei2W",form:"SignupModal_form__RRIk6",fieldGroup:"SignupModal_fieldGroup__D_2lu",label:"SignupModal_label__HgDgw",input:"SignupModal_input__jUVr1",categories:"SignupModal_categories__DIUSt",categoryGrid:"SignupModal_categoryGrid__2uvBb",chip:"SignupModal_chip__pfZuq",chipSelected:"SignupModal_chipSelected__tsQ3h",chipDisabled:"SignupModal_chipDisabled__hjWcq",actions:"SignupModal_actions__ICZHX",primaryButton:"SignupModal_primaryButton__f1Z4Q",secondaryButton:"SignupModal_secondaryButton__qhZ3g",muted:"SignupModal_muted__P5DC3",status:"SignupModal_status__kD0QR",error:"SignupModal_error__G_h6A"}}},function(e){e.O(0,[891,990,972,726,662,761,971,117,744],function(){return e(e.s=6995)}),_N_E=e.O()}]);