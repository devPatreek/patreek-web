(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9781],{97:function(e,t,n){Promise.resolve().then(n.bind(n,9153))},9153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7437),r=n(2265),i=n(7648),s=n(1224),o=n(1664),l=n.n(o);function c(){let[e,t]=(0,r.useState)(""),[n,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),p=async t=>{if(t.preventDefault(),e){o(!0),u(""),d("");try{let t=await fetch("/api/v1/auth/reset-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.trim()})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error((null==e?void 0:e.message)||"Unable to send reset link. Please try again.")}u("If that email exists, a reset link has been sent. Please check your inbox.")}catch(e){d((null==e?void 0:e.message)||"Unable to send reset link. Please try again.")}finally{o(!1)}}};return(0,a.jsxs)("div",{className:l().page,children:[(0,a.jsx)(s.Z,{}),(0,a.jsx)("div",{className:l().content,children:(0,a.jsxs)("div",{className:l().card,children:[(0,a.jsx)("h1",{className:l().title,children:"Reset your password"}),(0,a.jsx)("p",{className:l().subtitle,children:"Enter the email linked to your Patreek account. We'll send a secure link to reset your password."}),(0,a.jsxs)("form",{className:l().form,onSubmit:p,children:[(0,a.jsxs)("label",{className:l().label,children:["Email",(0,a.jsx)("input",{className:l().input,type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"you@example.com",required:!0})]}),(0,a.jsx)("button",{className:l().button,type:"submit",disabled:n,children:n?"Sending...":"Send reset link"})]}),c&&(0,a.jsx)("div",{className:"".concat(l().card," ").concat(l().success),children:c}),h&&(0,a.jsx)("div",{className:l().card,style:{borderColor:"#f87171",color:"#991b1b",background:"#fef2f2"},children:h}),(0,a.jsxs)("p",{className:l().note,children:["Remembered it? ",(0,a.jsx)(i.default,{className:l().link,href:"/registration",children:"Back to sign in"})]})]})})]})}},1224:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(7437),r=n(2265),i=n(7648),s=n(9376),o=n(6914),l=n.n(o),c=n(7029);function u(e){let{hasSession:t=!1,active:n}=e,o=(0,s.useRouter)(),u=(0,s.usePathname)(),[h,d]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),m=(0,r.useMemo)(()=>null==n?void 0:n.toLowerCase(),[n]),_=[{label:"Coins",path:"/coins"},{label:"Community",path:"/community"},{label:"Shop",path:"https://shop.patreek.com"},{label:"Opinion",path:"/opinion"},{label:"Write",path:"/write"}];(0,r.useEffect)(()=>{(async()=>{if(t)try{if(!(await (0,c.r$)()).authenticated)return;let e=await (0,c.getUserProfile)();(null==e?void 0:e.username)&&d(e.username)}catch(e){d(null)}})()},[t]);let b=e=>!!(m&&m===e.label.toLowerCase()||u&&e.path.startsWith("/")&&u.startsWith(e.path));return(0,a.jsxs)("header",{className:l().header,children:[(0,a.jsx)("div",{className:l().brand,onClick:()=>o.push("/"),children:"Patreek"}),(0,a.jsx)("nav",{className:l().nav,children:_.map(e=>(0,a.jsx)(i.default,{href:e.path,className:"".concat(l().navLink," ").concat(b(e)?l().activeLink:""),target:e.path.startsWith("http")?"_blank":void 0,children:e.label},e.label))}),(0,a.jsxs)("div",{className:l().actions,children:[(0,a.jsx)("button",{type:"button",className:l().iconButton,"aria-label":"Search Patreek",children:"\uD83D\uDD0D"}),(0,a.jsx)("button",{type:"button",className:l().profileCircle,onClick:()=>{t&&h?o.push("/u/".concat(h)):o.push("/registration")},"aria-label":"Open profile",children:h?h[0].toUpperCase():"P"}),(0,a.jsxs)("button",{type:"button",className:l().hamburger,onClick:()=>f(e=>!e),"aria-label":"Toggle navigation",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})]}),p&&(0,a.jsx)("div",{className:l().mobileNav,children:_.map(e=>(0,a.jsx)(i.default,{href:e.path,className:l().mobileNavItem,onClick:()=>f(!1),children:e.label},e.label))})]})}},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(2972),r=n.n(a)},9376:function(e,t,n){"use strict";var a=n(5475);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},257:function(e,t,n){"use strict";var a,r;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,a,r=e.exports={};function i(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l=[],c=!1,u=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=o(h);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}},s=!0;try{t[e](i,i.exports,a),s=!1}finally{s&&delete n[e]}return i.exports}a.ab="//";var r=a(229);e.exports=r}()},1664:function(e){e.exports={page:"page_page__w_1C7",content:"page_content__AkpDa",card:"page_card__GCMP2",title:"page_title__c397v",subtitle:"page_subtitle__6gPmI",form:"page_form__59jZ8",label:"page_label__mwSXG",input:"page_input__OpxZH",button:"page_button__TFXq1",success:"page_success__BhBoC",note:"page_note___0AkQ",link:"page_link__FLaPj"}},6914:function(e){e.exports={header:"MainHeader_header__v29oY",brand:"MainHeader_brand__PWSjn",nav:"MainHeader_nav__OWvbh",navLink:"MainHeader_navLink__NUd27",activeLink:"MainHeader_activeLink__YR7BN",actions:"MainHeader_actions__jUZ_j",iconButton:"MainHeader_iconButton__6RFhG",profileCircle:"MainHeader_profileCircle__654Xs",hamburger:"MainHeader_hamburger__9fVCh",mobileNav:"MainHeader_mobileNav__RVDMJ",mobileNavItem:"MainHeader_mobileNavItem__n0yAB"}}},function(e){e.O(0,[7123,2972,7029,2971,2117,1744],function(){return e(e.s=97)}),_N_E=e.O()}]);