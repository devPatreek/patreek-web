(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4616],{8557:function(e,a,s){Promise.resolve().then(s.bind(s,7223))},7223:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return h}});var n=s(7437),l=s(2265),r=s(9376),o=s(7576),i=s(8349),t=s(1224),c=s(3772),d=s(7029),u=s(8706),m=s.n(u);let _=["Gold","Silver","Bronze"],p=["#facc15","#cbd5f5","#f97316"];function h(){let e=(0,r.useRouter)(),[a,s]=(0,l.useState)(!1),[u,h]=(0,l.useState)(null),[x,b]=(0,l.useState)([]),[g,N]=(0,l.useState)(!0),[j,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{var e,a;let n=await (0,d.r$)();s(n.authenticated),h(null!==(e=n.userId)&&void 0!==e?e:null),w(null!==(a=n.username)&&void 0!==a?a:null)}catch(e){s(!1),h(null)}})()},[]),(0,l.useEffect)(()=>{(async()=>{try{N(!0);let e=await (0,d.U$)("pats",20);b(e)}catch(e){console.error("Failed to load community leaderboard",e),b([])}finally{N(!1)}})()},[]),(0,l.useEffect)(()=>{v(!a)},[a]);let k=(0,l.useMemo)(()=>x.slice(0,3),[x]),f=(0,l.useMemo)(()=>x.slice(3,20),[x]),C=a=>{a&&e.push("/u/".concat(a))};return(0,n.jsxs)("div",{className:m().page,children:[(0,n.jsx)(t.Z,{active:"community",hasSession:a}),(0,n.jsxs)("main",{className:m().main,children:[(0,n.jsxs)("section",{className:m().hero,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:m().eyebrow,children:"Patreek Arena"}),(0,n.jsx)("h1",{className:m().title,children:"Community Standings"}),(0,n.jsx)("p",{className:m().subtitle,children:"A live scoreboard of the top Patreek contributors. Tap any user to inspect their story."})]}),(0,n.jsxs)("div",{className:m().heroBadge,children:[(0,n.jsx)("span",{className:m().dot}),"Real-time ranks"]})]}),(0,n.jsxs)("div",{className:m().townGrid,children:[(0,n.jsx)("div",{className:m().skyscraper,children:"Vertical Ad Space"}),(0,n.jsxs)("div",{className:m().arenaColumn,children:[(0,n.jsxs)("div",{className:m().sponsorBanner,children:[(0,n.jsxs)("div",{className:m().bannerText,children:[(0,n.jsx)("span",{className:m().bannerLabel,children:"Top Sponsor"}),(0,n.jsx)("p",{className:m().bannerHeadline,children:"Boost your community drop with Spotlight Ads."})]}),(0,n.jsx)("div",{className:m().bannerCta,children:"Reserve Slot"})]}),(0,n.jsxs)("section",{className:m().arena,children:[(0,n.jsx)("div",{className:m().podium,children:g?Array.from({length:3}).map((e,a)=>(0,n.jsxs)("div",{className:m().podiumCard,children:[(0,n.jsxs)("div",{className:m().podiumRank,children:["#",a+1]}),(0,n.jsx)("div",{className:m().podiumAvatar}),(0,n.jsx)("div",{className:m().podiumName,children:"Loading…"}),(0,n.jsx)("div",{className:m().podiumMeta,children:"Loading XP"})]},"placeholder-".concat(a))):k.map((e,a)=>{var s,l;return(0,n.jsxs)("button",{className:m().podiumCard,style:{borderColor:p[a]},onClick:()=>C(e.username),type:"button",children:[(0,n.jsxs)("span",{className:m().podiumRank,children:["#",e.rank]}),(0,n.jsx)("div",{className:m().podiumAvatar,"aria-hidden":"true",style:{background:0===a?"linear-gradient(135deg, #fbbf24, #f97316)":"#94a3b8"},children:(null===(s=e.displayName)||void 0===s?void 0:s.charAt(0))||(null===(l=e.username)||void 0===l?void 0:l.charAt(0))||"P"}),(0,n.jsxs)("div",{className:m().podiumDetails,children:[(0,n.jsx)("p",{className:m().podiumName,children:e.displayName||e.username}),(0,n.jsxs)("p",{className:m().podiumMeta,children:[e.total.toLocaleString()," XP"]})]}),(0,n.jsx)("span",{className:m().podiumLabel,children:_[a]})]},"".concat(e.username,"-").concat(e.rank))})}),(0,n.jsxs)("div",{className:m().tableSection,children:[(0,n.jsxs)("div",{className:m().tableHeader,children:[(0,n.jsx)("h2",{children:"Ranks 4–20"}),(0,n.jsx)("p",{children:"Tap a row to visit a creator’s profile."})]}),(0,n.jsxs)("div",{className:m().tableBody,children:[g?(0,n.jsx)("p",{className:m().muted,children:"Loading leaderboard…"}):f.map(e=>(0,n.jsxs)("button",{className:m().tableRow,type:"button",onClick:()=>C(e.username),children:[(0,n.jsxs)("span",{className:m().rowRank,children:["#",e.rank]}),(0,n.jsxs)("div",{className:m().rowUser,children:[(0,n.jsx)("div",{className:m().rowAvatar,children:(e.displayName||e.username||"?").slice(0,1)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:m().rowName,children:e.displayName||e.username}),(0,n.jsxs)("p",{className:m().rowHandle,children:["@",e.username]})]})]}),(0,n.jsxs)("span",{className:m().rowXp,children:[e.total.toLocaleString()," XP"]})]},"".concat(e.username,"-").concat(e.rank))),!g&&0===f.length&&(0,n.jsx)("p",{className:m().muted,children:"More Pat community members are coming soon."})]})]})]}),(0,n.jsxs)("div",{className:m().squareBannerRow,children:[(0,n.jsxs)("div",{className:m().squareBanner,children:[(0,n.jsx)("span",{children:"Creator Toolkit"}),(0,n.jsx)("strong",{children:"Reserve a featured block"})]}),(0,n.jsxs)("div",{className:m().squareBanner,children:[(0,n.jsx)("span",{children:"Town Hall"}),(0,n.jsx)("strong",{children:"Host a space with Pat Coins"})]})]})]}),(0,n.jsx)("div",{className:m().chatColumn,children:(0,n.jsx)("div",{className:m().chatShell,children:a?(0,n.jsx)(c.Z,{channelId:"town-square-channel",currentUserId:null!=u?u:void 0,currentUsername:y,title:"Town Square Chat",subtitle:"Live firehose from Pat citizens",composerPlaceholder:"Drop your take…"}):(0,n.jsxs)("div",{className:m().chatLocked,children:[(0,n.jsx)("p",{children:"Sign in to join the Town Square chat."}),(0,n.jsx)("button",{type:"button",onClick:()=>e.push("/registration"),children:"Join Patreek"})]})})})]})]}),(0,n.jsx)(i.Z,{}),(0,n.jsx)(o.Z,{isOpen:j,triggerAction:"view the community leaderboard",disableClose:!0,onClose:()=>e.push("/")})]})}},7576:function(e,a,s){"use strict";s.d(a,{Z:function(){return i}});var n=s(7437),l=s(9376),r=s(7011),o=s.n(r);function i(e){let{isOpen:a,triggerAction:s,onClose:r,onRegister:i,disableClose:t=!1}=e,c=(0,l.useRouter)();if(!a)return null;let d=()=>{c.push("/registration"),null==r||r()};return(0,n.jsx)("div",{className:o().backdrop,role:"dialog","aria-modal":"true",children:(0,n.jsxs)("div",{className:o().modal,children:[(0,n.jsxs)("div",{className:o().header,children:[(0,n.jsx)("p",{className:o().eyebrow,children:"Members only"}),(0,n.jsxs)("h3",{children:["Unlock this ",s]}),!t&&r&&(0,n.jsx)("button",{type:"button",className:o().close,onClick:r,"aria-label":"Close modal",children:"\xd7"})]}),(0,n.jsx)("p",{className:o().copy,children:"Signing in gives you access to full articles, leaderboard chats, and private categories."}),(0,n.jsxs)("div",{className:o().actions,children:[(0,n.jsx)("button",{type:"button",className:o().primary,onClick:d,children:"Sign In"}),(0,n.jsx)("button",{type:"button",className:o().secondary,onClick:null!=i?i:d,children:"Register"}),(0,n.jsx)("button",{type:"button",className:o().link,onClick:()=>{c.push("/"),null==r||r()},children:"Go home"})]})]})})}},8706:function(e){e.exports={page:"page_page__Li5F9",main:"page_main__xiEsg",hero:"page_hero__5F3WV",eyebrow:"page_eyebrow___3Y_w",title:"page_title__R1RyO",subtitle:"page_subtitle__Lo1Em",heroBadge:"page_heroBadge__xKfr4",dot:"page_dot__bIPHb",townGrid:"page_townGrid__Nsp99",skyscraper:"page_skyscraper__r0npv",arenaColumn:"page_arenaColumn__KVDep",chatColumn:"page_chatColumn__2kvaT",chatShell:"page_chatShell__OH5Md",sponsorBanner:"page_sponsorBanner__O843K",bannerText:"page_bannerText__s5g6m",bannerLabel:"page_bannerLabel__aaz5u",bannerHeadline:"page_bannerHeadline__gI0fm",bannerCta:"page_bannerCta__7Vv9X",squareBannerRow:"page_squareBannerRow__IN0TM",squareBanner:"page_squareBanner__gSd5I",arena:"page_arena__DaXdv",podium:"page_podium__mF5D2",podiumCard:"page_podiumCard__uFG8T",podiumRank:"page_podiumRank__xCpbj",podiumAvatar:"page_podiumAvatar__yHpxQ",podiumDetails:"page_podiumDetails__yHwva",podiumName:"page_podiumName__Ns2gx",podiumMeta:"page_podiumMeta__m_wGS",podiumLabel:"page_podiumLabel__vHn9b",tableSection:"page_tableSection__ptIzC",tableHeader:"page_tableHeader__4QURG",tableBody:"page_tableBody__dsCxn",tableRow:"page_tableRow__Mmn_d",rowRank:"page_rowRank__J_vmG",rowUser:"page_rowUser__TDxPi",rowAvatar:"page_rowAvatar__NSXkA",rowName:"page_rowName__oufxd",rowHandle:"page_rowHandle__irZze",rowXp:"page_rowXp__gzbAR",muted:"page_muted__TIZWN",chatLocked:"page_chatLocked__vvl1j"}},7011:function(e){e.exports={backdrop:"AuthWallModal_backdrop__GPqpR",modal:"AuthWallModal_modal__fYr6S",header:"AuthWallModal_header__aq9BM",eyebrow:"AuthWallModal_eyebrow__U8I7N",close:"AuthWallModal_close__VjpfS",copy:"AuthWallModal_copy___qp9V",actions:"AuthWallModal_actions__HzRdw",primary:"AuthWallModal_primary__ZefXv",secondary:"AuthWallModal_secondary__ra701",link:"AuthWallModal_link__ggpfm"}}},function(e){e.O(0,[4937,6313,2972,9752,6547,7029,8659,2971,2117,1744],function(){return e(e.s=8557)}),_N_E=e.O()}]);