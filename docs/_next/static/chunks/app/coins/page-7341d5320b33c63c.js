(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5252],{4493:function(e,a,n){Promise.resolve().then(n.bind(n,3028))},3028:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return m}});var t=n(7437),i=n(2265),r=n(9376),s=n(3885),o=n.n(s),c=n(8349),l=n(1224),u=n(3877),d=n.n(u);function p(e){let{title:a,coins:n,priceLabel:i,description:r,isPopular:s=!1,onSelect:o,disabled:c=!1}=e;return(0,t.jsxs)("article",{className:"".concat(d().card," ").concat(s?d().popular:""),children:[s&&(0,t.jsx)("span",{className:d().ribbon,children:"Most Popular"}),(0,t.jsxs)("header",{className:d().header,children:[(0,t.jsx)("p",{className:d().title,children:a}),(0,t.jsxs)("p",{className:d().coins,children:[n.toLocaleString()," Coins"]})]}),(0,t.jsx)("p",{className:d().price,children:i}),r&&(0,t.jsx)("p",{className:d().description,children:r}),(0,t.jsx)("button",{type:"button",className:"".concat(d().action," ").concat(c?d().disabled:""),onClick:o,disabled:c,children:c?"Processing…":"Buy now"})]})}var h=n(7029);let _=[{id:"coins_100",title:"Small Bundle",coins:100,price:.99,description:"Kickstart your pat streak with a small boost."},{id:"coins_550",title:"Medium Bundle",coins:550,price:4.99,description:"Popular choice for creators and comment champions.",popular:!0},{id:"coins_1200",title:"Large Bundle",coins:1200,price:9.99,description:"Best value for heavy tasters and community builders."}];function m(){var e;let a=(0,r.useRouter)(),[n,s]=(0,i.useState)(!1),[u,d]=(0,i.useState)(null),[m,b]=(0,i.useState)(!0),[f,g]=(0,i.useState)(null),[v,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{if(!(await (0,h.r$)()).authenticated){s(!1);return}s(!0);let e=await (0,h.getUserProfile)();d(e)}catch(e){console.warn(e)}finally{b(!1)}})()},[]);let j=async e=>{g(null),x(e.id);try{var a;let n=await fetch("/api/v1/payment/create-intent",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({bundleId:e.id})});if(!n.ok)throw Error("Unable to start payment.");let t=await n.json(),i=(null===(a=t.data)||void 0===a?void 0:a.id)||t.id||"",r=await fetch("/api/v1/payment/mock-confirm",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({paymentIntentId:i,bundleId:e.id})});if(!r.ok)throw Error("Unable to confirm payment.");let s=await r.json();if(s.success){let a=await (0,h.getUserProfile)();if(a){d(a);let n=void 0!==a.coins?a.coins:"—";g("Success! ".concat(e.coins," Pat Coins added. New balance: ").concat(n))}else g("Success! ".concat(e.coins," Pat Coins added."))}else throw Error(s.error||"Payment confirmation failed.")}catch(e){g(e instanceof Error?e.message:"Purchase failed.")}finally{x(null)}};return(0,i.useEffect)(()=>{if(!f)return;let e=setTimeout(()=>g(null),4e3);return()=>clearTimeout(e)},[f]),(0,t.jsxs)("div",{className:o().page,children:[(0,t.jsx)(l.Z,{active:"coins",hasSession:n}),(0,t.jsxs)("main",{className:o().main,children:[(0,t.jsxs)("section",{className:o().heroRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:o().heading,children:"Pat Coins Store"}),(0,t.jsx)("p",{className:o().subhead,children:"Top up instantly and keep your community shining."})]}),(0,t.jsx)("div",{className:o().badge,children:"Earn 1 Pat = $0.01 inside Patreek"})]}),f&&(0,t.jsx)("div",{className:o().toast,children:f}),m?(0,t.jsx)("div",{className:o().loading,children:"Checking your session…"}):n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("section",{className:o().balanceCard,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:o().balanceLabel,children:"Your balance"}),(0,t.jsx)("h2",{className:o().balanceValue,children:(null!==(e=null==u?void 0:u.coins)&&void 0!==e?e:0).toLocaleString()}),(0,t.jsx)("p",{className:o().balanceMeta,children:"Pat Coins"})]}),(0,t.jsxs)("div",{className:o().balanceSupplement,children:[(0,t.jsx)("p",{className:o().balanceSupplementLabel,children:"Earning boosts"}),(0,t.jsx)("p",{className:o().balanceSupplementCopy,children:"Complete daily challenges to earn extra coins."})]})]}),(0,t.jsxs)("section",{className:o().bundleSection,children:[(0,t.jsxs)("div",{className:o().sectionHeader,children:[(0,t.jsx)("h2",{className:o().sectionTitle,children:"Coin bundles"}),(0,t.jsx)("p",{className:o().sectionSubtitle,children:"All purchases go through secure payment and confirm automatically."})]}),(0,t.jsx)("div",{className:o().bundleGrid,children:_.map(e=>(0,t.jsx)(p,{title:e.title,coins:e.coins,priceLabel:"$".concat(e.price.toFixed(2)),description:e.description,isPopular:!!e.popular,onSelect:()=>j(e),disabled:v===e.id},e.id))})]})]}):(0,t.jsxs)("div",{className:o().signInPrompt,children:[(0,t.jsx)("p",{className:o().promptText,children:"Sign in to unlock coin balances and instant payments."}),(0,t.jsx)("button",{className:o().signInButton,onClick:()=>a.push("/registration"),children:"Sign up or Sign in"})]})]}),(0,t.jsx)(c.Z,{})]})}},8349:function(e,a,n){"use strict";n.d(a,{Z:function(){return l}});var t=n(7437),i=n(7648),r=n(1468),s=n.n(r);let o=[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"},{label:"Help",href:"/help"},{label:"About",href:"/about"}],c=[{label:"X",href:"https://x.com/patreek",aria:"Open Patreek on X"},{label:"Facebook",href:"https://facebook.com",aria:"Open Patreek on Facebook"},{label:"Instagram",href:"https://instagram.com",aria:"Open Patreek on Instagram"}];function l(){let e=new Date().getFullYear();return(0,t.jsxs)("footer",{className:s().footer,children:[(0,t.jsx)("div",{className:s().links,children:o.map(e=>(0,t.jsx)(i.default,{href:e.href,className:s().link,children:e.label},e.label))}),(0,t.jsxs)("div",{className:s().right,children:[(0,t.jsxs)("span",{className:s().copy,children:["\xa9 ",e," Patreek"]}),(0,t.jsx)("div",{className:s().socials,children:c.map(e=>(0,t.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.aria,className:s().socialButton,children:"X"===e.label?"X":e.label.charAt(0)},e.label))})]})]})}},1224:function(e,a,n){"use strict";n.d(a,{Z:function(){return u}});var t=n(7437),i=n(2265),r=n(7648),s=n(9376),o=n(6914),c=n.n(o),l=n(7029);function u(e){let{hasSession:a=!1,active:n}=e,o=(0,s.useRouter)(),u=(0,s.usePathname)(),[d,p]=(0,i.useState)(null),[h,_]=(0,i.useState)(!1),m=(0,i.useMemo)(()=>null==n?void 0:n.toLowerCase(),[n]),b=[{label:"Coins",path:"/coins"},{label:"Community",path:"/community"},{label:"Shop",path:"https://shop.patreek.com"},{label:"Opinion",path:"/opinion"},{label:"Write",path:"/write"}];(0,i.useEffect)(()=>{(async()=>{if(a)try{if(!(await (0,l.r$)()).authenticated)return;let e=await (0,l.getUserProfile)();(null==e?void 0:e.username)&&p(e.username)}catch(e){p(null)}})()},[a]);let f=e=>!!(m&&m===e.label.toLowerCase()||u&&e.path.startsWith("/")&&u.startsWith(e.path));return(0,t.jsxs)("header",{className:c().header,children:[(0,t.jsx)("div",{className:c().brand,onClick:()=>o.push("/"),children:"Patreek"}),(0,t.jsx)("nav",{className:c().nav,children:b.map(e=>(0,t.jsx)(r.default,{href:e.path,className:"".concat(c().navLink," ").concat(f(e)?c().activeLink:""),target:e.path.startsWith("http")?"_blank":void 0,children:e.label},e.label))}),(0,t.jsxs)("div",{className:c().actions,children:[(0,t.jsx)("button",{type:"button",className:c().iconButton,"aria-label":"Search Patreek",children:"\uD83D\uDD0D"}),(0,t.jsx)("button",{type:"button",className:c().profileCircle,onClick:()=>{a&&d?o.push("/u/".concat(d)):o.push("/registration")},"aria-label":"Open profile",children:d?d[0].toUpperCase():"P"}),(0,t.jsxs)("button",{type:"button",className:c().hamburger,onClick:()=>_(e=>!e),"aria-label":"Toggle navigation",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})]}),h&&(0,t.jsx)("div",{className:c().mobileNav,children:b.map(e=>(0,t.jsx)(r.default,{href:e.path,className:c().mobileNavItem,onClick:()=>_(!1),children:e.label},e.label))})]})}},7648:function(e,a,n){"use strict";n.d(a,{default:function(){return i.a}});var t=n(2972),i=n.n(t)},9376:function(e,a,n){"use strict";var t=n(5475);n.o(t,"usePathname")&&n.d(a,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(a,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(a,{useSearchParams:function(){return t.useSearchParams}})},257:function(e,a,n){"use strict";var t,i;e.exports=(null==(t=n.g.process)?void 0:t.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(4227)},4227:function(e){!function(){var a={229:function(e){var a,n,t,i=e.exports={};function r(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function o(e){if(a===setTimeout)return setTimeout(e,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(n){try{return a.call(null,e,0)}catch(n){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:r}catch(e){a=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c=[],l=!1,u=-1;function d(){l&&t&&(l=!1,t.length?c=t.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=o(d);l=!0;for(var a=c.length;a;){for(t=c,c=[];++u<a;)t&&t[u].run();u=-1,a=c.length}t=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(a){try{return n.call(null,e)}catch(a){return n.call(this,e)}}}(e)}}function h(e,a){this.fun=e,this.array=a}function _(){}i.nextTick=function(e){var a=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)a[n-1]=arguments[n];c.push(new h(e,a)),1!==c.length||l||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function t(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}},s=!0;try{a[e](r,r.exports,t),s=!1}finally{s&&delete n[e]}return r.exports}t.ab="//";var i=t(229);e.exports=i}()},3885:function(e){e.exports={page:"page_page__0Tisy",main:"page_main__d_Mtc",heroRow:"page_heroRow___2TSA",heading:"page_heading__9_OwE",subhead:"page_subhead__g_Bcn",badge:"page_badge__xl6_S",loading:"page_loading___wU0_",signInPrompt:"page_signInPrompt__Fok94",promptText:"page_promptText__qGBEr",signInButton:"page_signInButton__OtZF2",balanceCard:"page_balanceCard__ZLBG3",balanceLabel:"page_balanceLabel__8Hp9o",balanceValue:"page_balanceValue__0x5vr",balanceMeta:"page_balanceMeta__eP32e",balanceSupplement:"page_balanceSupplement__sUu2P",balanceSupplementLabel:"page_balanceSupplementLabel__jAuD_",balanceSupplementCopy:"page_balanceSupplementCopy__8mEWB",bundleSection:"page_bundleSection__3NaP8",sectionHeader:"page_sectionHeader__YtJ14",sectionTitle:"page_sectionTitle__udEmd",sectionSubtitle:"page_sectionSubtitle__2Oe90",bundleGrid:"page_bundleGrid__lsg_d",toast:"page_toast___Q__R"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",links:"Footer_links__cFiYr",link:"Footer_link__TBOP7",right:"Footer_right__s6ko6",copy:"Footer_copy__KUC9W",socials:"Footer_socials__Arjjf",socialButton:"Footer_socialButton__owWdN"}},6914:function(e){e.exports={header:"MainHeader_header__v29oY",brand:"MainHeader_brand__PWSjn",nav:"MainHeader_nav__OWvbh",navLink:"MainHeader_navLink__NUd27",activeLink:"MainHeader_activeLink__YR7BN",actions:"MainHeader_actions__jUZ_j",iconButton:"MainHeader_iconButton__6RFhG",profileCircle:"MainHeader_profileCircle__654Xs",hamburger:"MainHeader_hamburger__9fVCh",mobileNav:"MainHeader_mobileNav__RVDMJ",mobileNavItem:"MainHeader_mobileNavItem__n0yAB"}},3877:function(e){e.exports={card:"PricingCard_card__IzpBi",popular:"PricingCard_popular__mEGE_",ribbon:"PricingCard_ribbon__k5r7y",header:"PricingCard_header___M7L8",title:"PricingCard_title__gpRkn",coins:"PricingCard_coins__8eRnp",price:"PricingCard_price__F5O6K",description:"PricingCard_description__WSaXv",action:"PricingCard_action__9v3xs",disabled:"PricingCard_disabled__HCcym"}}},function(e){e.O(0,[9058,83,7123,2972,7029,2971,2117,1744],function(){return e(e.s=4493)}),_N_E=e.O()}]);