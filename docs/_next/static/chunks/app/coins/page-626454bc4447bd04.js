(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5252],{4493:function(e,a,n){Promise.resolve().then(n.bind(n,3028))},3028:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return m}});var t=n(7437),i=n(2265),r=n(9376),s=n(3885),c=n.n(s),o=n(8349),l=n(1224),u=n(3877),d=n.n(u);function p(e){let{title:a,coins:n,priceLabel:i,description:r,isPopular:s=!1,onSelect:c,disabled:o=!1}=e;return(0,t.jsxs)("article",{className:"".concat(d().card," ").concat(s?d().popular:""),children:[s&&(0,t.jsx)("span",{className:d().ribbon,children:"Most Popular"}),(0,t.jsxs)("header",{className:d().header,children:[(0,t.jsx)("p",{className:d().title,children:a}),(0,t.jsxs)("p",{className:d().coins,children:[n.toLocaleString()," Coins"]})]}),(0,t.jsx)("p",{className:d().price,children:i}),r&&(0,t.jsx)("p",{className:d().description,children:r}),(0,t.jsx)("button",{type:"button",className:"".concat(d().action," ").concat(o?d().disabled:""),onClick:c,disabled:o,children:o?"Processing…":"Buy now"})]})}var h=n(7029);let _=[{id:"coins_100",title:"Small Bundle",coins:100,price:.99,description:"Kickstart your pat streak with a small boost."},{id:"coins_550",title:"Medium Bundle",coins:550,price:4.99,description:"Popular choice for creators and comment champions.",popular:!0},{id:"coins_1200",title:"Large Bundle",coins:1200,price:9.99,description:"Best value for heavy tasters and community builders."}];function m(){var e;let a=(0,r.useRouter)(),[n,s]=(0,i.useState)(!1),[u,d]=(0,i.useState)(null),[m,f]=(0,i.useState)(!0),[b,g]=(0,i.useState)(null),[x,v]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{if(!(await (0,h.r$)()).authenticated){s(!1);return}s(!0);let e=await (0,h.getUserProfile)();d(e)}catch(e){console.warn(e)}finally{f(!1)}})()},[]);let j=async e=>{g(null),v(e.id);try{var a;let n=await fetch("/api/v1/payment/create-intent",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({bundleId:e.id})});if(!n.ok)throw Error("Unable to start payment.");let t=await n.json(),i=(null===(a=t.data)||void 0===a?void 0:a.id)||t.id||"",r=await fetch("/api/v1/payment/mock-confirm",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({paymentIntentId:i,bundleId:e.id})});if(!r.ok)throw Error("Unable to confirm payment.");let s=await r.json();if(s.success){let a=await (0,h.getUserProfile)();if(a){d(a);let n=void 0!==a.coins?a.coins:"—";g("Success! ".concat(e.coins," Pat Coins added. New balance: ").concat(n))}else g("Success! ".concat(e.coins," Pat Coins added."))}else throw Error(s.error||"Payment confirmation failed.")}catch(e){g(e instanceof Error?e.message:"Purchase failed.")}finally{v(null)}};return(0,i.useEffect)(()=>{if(!b)return;let e=setTimeout(()=>g(null),4e3);return()=>clearTimeout(e)},[b]),(0,t.jsxs)("div",{className:c().page,children:[(0,t.jsx)(l.Z,{active:"coins",hasSession:n}),(0,t.jsxs)("main",{className:c().main,children:[(0,t.jsxs)("section",{className:c().heroRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:c().heading,children:"Pat Coins Store"}),(0,t.jsx)("p",{className:c().subhead,children:"Top up instantly and keep your community shining."})]}),(0,t.jsx)("div",{className:c().badge,children:"Earn 1 Pat = $0.01 inside Patreek"})]}),b&&(0,t.jsx)("div",{className:c().toast,children:b}),m?(0,t.jsx)("div",{className:c().loading,children:"Checking your session…"}):n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("section",{className:c().balanceCard,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:c().balanceLabel,children:"Your balance"}),(0,t.jsx)("h2",{className:c().balanceValue,children:(null!==(e=null==u?void 0:u.coins)&&void 0!==e?e:0).toLocaleString()}),(0,t.jsx)("p",{className:c().balanceMeta,children:"Pat Coins"})]}),(0,t.jsxs)("div",{className:c().balanceSupplement,children:[(0,t.jsx)("p",{className:c().balanceSupplementLabel,children:"Earning boosts"}),(0,t.jsx)("p",{className:c().balanceSupplementCopy,children:"Complete daily challenges to earn extra coins."})]})]}),(0,t.jsxs)("section",{className:c().bundleSection,children:[(0,t.jsxs)("div",{className:c().sectionHeader,children:[(0,t.jsx)("h2",{className:c().sectionTitle,children:"Coin bundles"}),(0,t.jsx)("p",{className:c().sectionSubtitle,children:"All purchases go through secure payment and confirm automatically."})]}),(0,t.jsx)("div",{className:c().bundleGrid,children:_.map(e=>(0,t.jsx)(p,{title:e.title,coins:e.coins,priceLabel:"$".concat(e.price.toFixed(2)),description:e.description,isPopular:!!e.popular,onSelect:()=>j(e),disabled:x===e.id},e.id))})]})]}):(0,t.jsxs)("div",{className:c().signInPrompt,children:[(0,t.jsx)("p",{className:c().promptText,children:"Sign in to unlock coin balances and instant payments."}),(0,t.jsx)("button",{className:c().signInButton,onClick:()=>a.push("/registration"),children:"Sign up or Sign in"})]})]}),(0,t.jsx)(o.Z,{})]})}},8349:function(e,a,n){"use strict";n.d(a,{Z:function(){return l}});var t=n(7437),i=n(7648),r=n(1468),s=n.n(r);let c=[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"},{label:"Help",href:"/help"},{label:"About",href:"/about"}],o=[{label:"X",href:"https://x.com/patreek",aria:"Open Patreek on X"},{label:"Facebook",href:"https://facebook.com",aria:"Open Patreek on Facebook"},{label:"Instagram",href:"https://instagram.com",aria:"Open Patreek on Instagram"}];function l(){let e=new Date().getFullYear();return(0,t.jsxs)("footer",{className:s().footer,children:[(0,t.jsx)("div",{className:s().links,children:c.map(e=>(0,t.jsx)(i.default,{href:e.href,className:s().link,children:e.label},e.label))}),(0,t.jsxs)("div",{className:s().right,children:[(0,t.jsxs)("span",{className:s().copy,children:["\xa9 ",e," Patreek"]}),(0,t.jsx)("div",{className:s().socials,children:o.map(e=>(0,t.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.aria,className:s().socialButton,children:"X"===e.label?"X":e.label.charAt(0)},e.label))})]})]})}},1224:function(e,a,n){"use strict";n.d(a,{Z:function(){return u}});var t=n(7437),i=n(2265),r=n(7648),s=n(9376),c=n(6914),o=n.n(c),l=n(7029);function u(e){let{hasSession:a=!1,active:n}=e,c=(0,s.useRouter)(),u=(0,s.usePathname)(),[p,h]=(0,i.useState)(null),[_,m]=(0,i.useState)(!1),[f,b]=(0,i.useState)(null),g=(0,i.useMemo)(()=>null==n?void 0:n.toLowerCase(),[n]),x=[{label:"Coins",path:"/coins"},{label:"Community",path:"/community"},{label:"Shop",path:"https://shop.patreek.com"},{label:"Opinion",path:"/opinion"},{label:"Write",path:"/write"}];(0,i.useEffect)(()=>{(async()=>{if(a)try{if(!(await (0,l.r$)()).authenticated)return;let e=await (0,l.getUserProfile)();(null==e?void 0:e.username)&&h(e.username)}catch(e){h(null)}})()},[a]),(0,i.useEffect)(()=>{let e=!1;return(async()=>{try{let a=await (0,l.$0)();!e&&a&&Number.isFinite(a.unitPrice)&&b(a.unitPrice)}catch(e){console.warn("[Header] Failed to load Pat Coin price",e)}})(),()=>{e=!0}},[]);let v=e=>!!(g&&g===e.label.toLowerCase()||u&&e.path.startsWith("/")&&u.startsWith(e.path)),j=(0,i.useMemo)(()=>{let e=null!=f?f:.01;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(e)},[f]);return(0,t.jsxs)("header",{className:o().header,children:[(0,t.jsx)("div",{className:o().brand,onClick:()=>c.push("/"),children:"Patreek"}),(0,t.jsx)("nav",{className:o().nav,children:x.map(e=>(0,t.jsx)(r.default,{href:e.path,className:"".concat(o().navLink," ").concat(v(e)?o().activeLink:""),target:e.path.startsWith("http")?"_blank":void 0,children:e.label},e.label))}),(0,t.jsxs)("div",{className:o().actions,children:[(0,t.jsxs)(r.default,{href:"/coins",className:o().coinWidget,"aria-label":"Open Pat Coins — 1 P equals ".concat(j),children:[(0,t.jsx)(d,{className:o().coinIcon}),(0,t.jsxs)("div",{className:o().coinText,children:[(0,t.jsx)("span",{className:o().coinLabel,children:"Pat Coin"}),(0,t.jsxs)("span",{className:o().coinValue,children:["1\xa0P = ",j]})]})]}),(0,t.jsx)("button",{type:"button",className:o().profileCircle,onClick:()=>{a&&p?c.push("/u/".concat(p)):c.push("/registration")},"aria-label":"Open profile",children:p?p[0].toUpperCase():"P"}),(0,t.jsxs)("button",{type:"button",className:o().hamburger,onClick:()=>m(e=>!e),"aria-label":"Toggle navigation",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})]}),_&&(0,t.jsx)("div",{className:o().mobileNav,children:x.map(e=>(0,t.jsx)(r.default,{href:e.path,className:o().mobileNavItem,onClick:()=>m(!1),children:e.label},e.label))})]})}function d(e){let{className:a}=e,n=(0,i.useId)();return(0,t.jsxs)("svg",{className:a,viewBox:"0 0 32 32",role:"presentation","aria-hidden":"true",focusable:"false",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#a855f7"}),(0,t.jsx)("stop",{offset:"45%",stopColor:"#6366f1"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#2563eb"})]})}),(0,t.jsx)("circle",{cx:"16",cy:"16",r:"15",fill:"url(#".concat(n,")")}),(0,t.jsx)("circle",{cx:"16",cy:"16",r:"14",fill:"none",stroke:"rgba(255,255,255,0.35)",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M11.5 9h6.2c3 0 5.3 2.2 5.3 4.9 0 2.6-2.3 4.9-5.3 4.9h-3.1v4.2h-3.1V9zm6 7.1c1.3 0 2.2-.9 2.2-2.1s-.9-2-2.2-2h-2.9v4.1z",fill:"#fff"})]})}},7648:function(e,a,n){"use strict";n.d(a,{default:function(){return i.a}});var t=n(2972),i=n.n(t)},9376:function(e,a,n){"use strict";var t=n(5475);n.o(t,"usePathname")&&n.d(a,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(a,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(a,{useSearchParams:function(){return t.useSearchParams}})},257:function(e,a,n){"use strict";var t,i;e.exports=(null==(t=n.g.process)?void 0:t.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(4227)},4227:function(e){!function(){var a={229:function(e){var a,n,t,i=e.exports={};function r(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function c(e){if(a===setTimeout)return setTimeout(e,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(n){try{return a.call(null,e,0)}catch(n){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:r}catch(e){a=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var o=[],l=!1,u=-1;function d(){l&&t&&(l=!1,t.length?o=t.concat(o):u=-1,o.length&&p())}function p(){if(!l){var e=c(d);l=!0;for(var a=o.length;a;){for(t=o,o=[];++u<a;)t&&t[u].run();u=-1,a=o.length}t=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(a){try{return n.call(null,e)}catch(a){return n.call(this,e)}}}(e)}}function h(e,a){this.fun=e,this.array=a}function _(){}i.nextTick=function(e){var a=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)a[n-1]=arguments[n];o.push(new h(e,a)),1!==o.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function t(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}},s=!0;try{a[e](r,r.exports,t),s=!1}finally{s&&delete n[e]}return r.exports}t.ab="//";var i=t(229);e.exports=i}()},3885:function(e){e.exports={page:"page_page__0Tisy",main:"page_main__d_Mtc",heroRow:"page_heroRow___2TSA",heading:"page_heading__9_OwE",subhead:"page_subhead__g_Bcn",badge:"page_badge__xl6_S",loading:"page_loading___wU0_",signInPrompt:"page_signInPrompt__Fok94",promptText:"page_promptText__qGBEr",signInButton:"page_signInButton__OtZF2",balanceCard:"page_balanceCard__ZLBG3",balanceLabel:"page_balanceLabel__8Hp9o",balanceValue:"page_balanceValue__0x5vr",balanceMeta:"page_balanceMeta__eP32e",balanceSupplement:"page_balanceSupplement__sUu2P",balanceSupplementLabel:"page_balanceSupplementLabel__jAuD_",balanceSupplementCopy:"page_balanceSupplementCopy__8mEWB",bundleSection:"page_bundleSection__3NaP8",sectionHeader:"page_sectionHeader__YtJ14",sectionTitle:"page_sectionTitle__udEmd",sectionSubtitle:"page_sectionSubtitle__2Oe90",bundleGrid:"page_bundleGrid__lsg_d",toast:"page_toast___Q__R"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",links:"Footer_links__cFiYr",link:"Footer_link__TBOP7",right:"Footer_right__s6ko6",copy:"Footer_copy__KUC9W",socials:"Footer_socials__Arjjf",socialButton:"Footer_socialButton__owWdN"}},6914:function(e){e.exports={header:"MainHeader_header__v29oY",brand:"MainHeader_brand__PWSjn",nav:"MainHeader_nav__OWvbh",navLink:"MainHeader_navLink__NUd27",activeLink:"MainHeader_activeLink__YR7BN",actions:"MainHeader_actions__jUZ_j",coinWidget:"MainHeader_coinWidget__Lwamz",coinIcon:"MainHeader_coinIcon__GoTN_",coinText:"MainHeader_coinText__soICt",coinLabel:"MainHeader_coinLabel__rEQWV",coinValue:"MainHeader_coinValue__U9zIq",profileCircle:"MainHeader_profileCircle__654Xs",hamburger:"MainHeader_hamburger__9fVCh",mobileNav:"MainHeader_mobileNav__RVDMJ",mobileNavItem:"MainHeader_mobileNavItem__n0yAB"}},3877:function(e){e.exports={card:"PricingCard_card__IzpBi",popular:"PricingCard_popular__mEGE_",ribbon:"PricingCard_ribbon__k5r7y",header:"PricingCard_header___M7L8",title:"PricingCard_title__gpRkn",coins:"PricingCard_coins__8eRnp",price:"PricingCard_price__F5O6K",description:"PricingCard_description__WSaXv",action:"PricingCard_action__9v3xs",disabled:"PricingCard_disabled__HCcym"}}},function(e){e.O(0,[4977,7123,2972,7029,2971,2117,1744],function(){return e(e.s=4493)}),_N_E=e.O()}]);