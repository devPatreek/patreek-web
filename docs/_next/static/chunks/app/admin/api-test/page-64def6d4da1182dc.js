(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2037],{6596:function(e,t,a){Promise.resolve().then(a.bind(a,8662))},8662:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(7437),n=a(2265),l=a(9376),o=a(3595),i=a(8349),r=a(721),c=a.n(r);let d=a(257).env.NEXT_PUBLIC_API_URL||"https://api.patreek.com";function p(){(0,l.useRouter)();let[e,t]=(0,n.useState)({method:"GET",endpoint:"/api/v1/feeds/public",headers:"{}",body:""}),[a,r]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1),[h,_]=(0,n.useState)(null),m=a=>{t({...e,method:a})},x=a=>{t({...e,endpoint:a.startsWith("/")?a:"/".concat(a)})},g=a=>{t({...e,headers:a})},N=a=>{t({...e,body:a})},b=async()=>{u(!0),_(null),r(null);try{let t,a={};try{a=JSON.parse(e.headers||"{}")}catch(e){throw Error("Invalid JSON in headers")}let s="".concat(d).concat(e.endpoint),n={method:e.method,headers:{"Content-Type":"application/json",Accept:"application/json",...a}};if(e.body&&["POST","PATCH","PUT"].includes(e.method))try{JSON.parse(e.body),n.body=e.body}catch(e){throw Error("Invalid JSON in request body")}let l=await fetch(s,n),o=l.headers.get("content-type");t=(null==o?void 0:o.includes("application/json"))?await l.json():await l.text(),r({status:l.status,statusText:l.statusText,headers:Object.fromEntries(l.headers.entries()),data:t})}catch(e){_(e.message||"Request failed")}finally{u(!1)}},j=e=>{t({method:e.method,endpoint:e.endpoint,headers:"{}",body:""})};return(0,s.jsxs)("div",{className:c().page,children:[(0,s.jsx)(o.Z,{hasSession:!0}),(0,s.jsx)("main",{className:c().main,children:(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsxs)("header",{className:c().header,children:[(0,s.jsx)("h1",{className:c().title,children:"API Testing"}),(0,s.jsx)("p",{className:c().subtitle,children:"Test backend API endpoints"}),(0,s.jsx)("a",{href:"/admin",className:c().backLink,children:"â† Back to Admin"})]}),(0,s.jsxs)("div",{className:c().content,children:[(0,s.jsxs)("div",{className:c().requestSection,children:[(0,s.jsx)("h2",{className:c().sectionTitle,children:"Request"}),(0,s.jsx)("div",{className:c().methodSelector,children:["GET","POST","PATCH","PUT","DELETE"].map(t=>(0,s.jsx)("button",{className:"".concat(c().methodButton," ").concat(e.method===t?c().active:""),onClick:()=>m(t),children:t},t))}),(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{className:c().label,children:"Endpoint"}),(0,s.jsx)("input",{type:"text",className:c().input,value:e.endpoint,onChange:e=>x(e.target.value),placeholder:"/api/v1/feeds/public"})]}),(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{className:c().label,children:"Headers (JSON)"}),(0,s.jsx)("textarea",{className:c().textarea,value:e.headers,onChange:e=>g(e.target.value),placeholder:'{"X-Custom-Header": "value"}',rows:4})]}),["POST","PATCH","PUT"].includes(e.method)&&(0,s.jsxs)("div",{className:c().inputGroup,children:[(0,s.jsx)("label",{className:c().label,children:"Body (JSON)"}),(0,s.jsx)("textarea",{className:c().textarea,value:e.body,onChange:e=>N(e.target.value),placeholder:'{"key": "value"}',rows:8})]}),(0,s.jsxs)("div",{className:c().presets,children:[(0,s.jsx)("label",{className:c().label,children:"Quick Presets"}),(0,s.jsx)("div",{className:c().presetButtons,children:[{method:"GET",endpoint:"/api/v1/feeds/public",label:"Public Feeds"},{method:"GET",endpoint:"/api/v1/categories",label:"All Categories"},{method:"GET",endpoint:"/api/v1/categories/public",label:"Public Categories"},{method:"GET",endpoint:"/api/v1/analytics/top-1-commenter",label:"Top Commenter"},{method:"GET",endpoint:"/api/v1/analytics/top-10-commenters",label:"Top 10 Commenters"},{method:"GET",endpoint:"/api/v1/analytics/top-1-sharer",label:"Top Sharer"},{method:"GET",endpoint:"/api/v1/analytics/top-10-sharers",label:"Top 10 Sharers"},{method:"GET",endpoint:"/api/v1/analytics/top-1-patter",label:"Top Patter"},{method:"GET",endpoint:"/api/v1/analytics/top-10-patters",label:"Top 10 Patters"},{method:"GET",endpoint:"/api/v1/analytics/top-coin-holder",label:"Top Coin Holder"},{method:"GET",endpoint:"/api/v1/analytics/top-10-coin-holders",label:"Top 10 Coin Holders"}].map((e,t)=>(0,s.jsx)("button",{className:c().presetButton,onClick:()=>j(e),children:e.label},t))})]}),(0,s.jsx)("button",{className:c().executeButton,onClick:b,disabled:p,children:p?"Sending...":"Execute Request"})]}),(0,s.jsxs)("div",{className:c().responseSection,children:[(0,s.jsx)("h2",{className:c().sectionTitle,children:"Response"}),h&&(0,s.jsxs)("div",{className:c().error,children:[(0,s.jsx)("strong",{children:"Error:"})," ",h]}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:c().responseMeta,children:[(0,s.jsxs)("span",{className:"".concat(c().statusBadge," ").concat(a.status>=200&&a.status<300?c().success:c().error),children:[a.status," ",a.statusText]}),(0,s.jsx)("button",{className:c().copyButton,onClick:()=>{a&&navigator.clipboard.writeText(JSON.stringify(a,null,2))},children:"Copy Response"})]}),(0,s.jsxs)("div",{className:c().responseContent,children:[(0,s.jsxs)("details",{className:c().details,children:[(0,s.jsx)("summary",{className:c().summary,children:"Headers"}),(0,s.jsx)("pre",{className:c().pre,children:JSON.stringify(a.headers,null,2)})]}),(0,s.jsxs)("details",{className:c().details,open:!0,children:[(0,s.jsx)("summary",{className:c().summary,children:"Body"}),(0,s.jsx)("pre",{className:c().pre,children:JSON.stringify(a.data,null,2)})]})]})]}),!a&&!h&&!p&&(0,s.jsx)("div",{className:c().placeholder,children:"Execute a request to see the response here"})]})]})]})}),(0,s.jsx)(i.Z,{})]})}},721:function(e){e.exports={page:"page_page__ZndDW",main:"page_main__J7x5X",container:"page_container__yCWye",header:"page_header__5UHcc",title:"page_title__10sDi",subtitle:"page_subtitle__UoWj2",backLink:"page_backLink__cJTL_",content:"page_content__o_F5f",requestSection:"page_requestSection__bU5DB",responseSection:"page_responseSection__ZidIF",sectionTitle:"page_sectionTitle__zpSoX",methodSelector:"page_methodSelector__kFQnP",methodButton:"page_methodButton__gSJXm",active:"page_active__2rHjj",inputGroup:"page_inputGroup__Imvj6",label:"page_label__9Mi15",input:"page_input__BfXkr",textarea:"page_textarea__yNRP9",presets:"page_presets___lxhB",presetButtons:"page_presetButtons__8annY",presetButton:"page_presetButton__gUrIO",executeButton:"page_executeButton__GP5hY",error:"page_error__K0Z_R",responseMeta:"page_responseMeta__4fNS_",statusBadge:"page_statusBadge__RPBtA",success:"page_success__fWGv9",copyButton:"page_copyButton__yzlvx",responseContent:"page_responseContent__XmQo1",details:"page_details__q4_Jy",summary:"page_summary__0MV_J",pre:"page_pre__zDt6Z",placeholder:"page_placeholder__pv94D"}}},function(e){e.O(0,[563,2972,5726,1908,7611,2971,2117,1744],function(){return e(e.s=6596)}),_N_E=e.O()}]);