(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2037],{6596:function(e,t,a){Promise.resolve().then(a.bind(a,8662))},8662:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=a(7437),s=a(2265),r=a(9376),i=a(1224),o=a(8349),l=a(721),c=a.n(l);function u(){(0,r.useRouter)();let[e,t]=(0,s.useState)({method:"GET",endpoint:"/api/v1/feeds/public",headers:"{}",body:""}),[a,l]=(0,s.useState)(null),[u,d]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),m=a=>{t({...e,method:a})},_=a=>{t({...e,endpoint:a.startsWith("/")?a:"/".concat(a)})},f=a=>{t({...e,headers:a})},b=a=>{t({...e,body:a})},x=async()=>{d(!0),h(null),l(null);try{let t,a={};try{a=JSON.parse(e.headers||"{}")}catch(e){throw Error("Invalid JSON in headers")}let n="".concat("http://localhost:5555/api/v1").concat(e.endpoint),s={method:e.method,headers:{"Content-Type":"application/json",Accept:"application/json",...a}};if(e.body&&["POST","PATCH","PUT"].includes(e.method))try{JSON.parse(e.body),s.body=e.body}catch(e){throw Error("Invalid JSON in request body")}let r=await fetch(n,s),i=r.headers.get("content-type");t=(null==i?void 0:i.includes("application/json"))?await r.json():await r.text(),l({status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries()),data:t})}catch(e){h(e.message||"Request failed")}finally{d(!1)}},v=e=>{t({method:e.method,endpoint:e.endpoint,headers:"{}",body:""})};return(0,n.jsxs)("div",{className:c().page,children:[(0,n.jsx)(i.Z,{hasSession:!0}),(0,n.jsx)("main",{className:c().main,children:(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsxs)("header",{className:c().header,children:[(0,n.jsx)("h1",{className:c().title,children:"API Testing"}),(0,n.jsx)("p",{className:c().subtitle,children:"Test backend API endpoints"}),(0,n.jsx)("a",{href:"/admin",className:c().backLink,children:"← Back to Admin"})]}),(0,n.jsxs)("div",{className:c().content,children:[(0,n.jsxs)("div",{className:c().requestSection,children:[(0,n.jsx)("h2",{className:c().sectionTitle,children:"Request"}),(0,n.jsx)("div",{className:c().methodSelector,children:["GET","POST","PATCH","PUT","DELETE"].map(t=>(0,n.jsx)("button",{className:"".concat(c().methodButton," ").concat(e.method===t?c().active:""),onClick:()=>m(t),children:t},t))}),(0,n.jsxs)("div",{className:c().inputGroup,children:[(0,n.jsx)("label",{className:c().label,children:"Endpoint"}),(0,n.jsx)("input",{type:"text",className:c().input,value:e.endpoint,onChange:e=>_(e.target.value),placeholder:"/api/v1/feeds/public"})]}),(0,n.jsxs)("div",{className:c().inputGroup,children:[(0,n.jsx)("label",{className:c().label,children:"Headers (JSON)"}),(0,n.jsx)("textarea",{className:c().textarea,value:e.headers,onChange:e=>f(e.target.value),placeholder:'{"X-Custom-Header": "value"}',rows:4})]}),["POST","PATCH","PUT"].includes(e.method)&&(0,n.jsxs)("div",{className:c().inputGroup,children:[(0,n.jsx)("label",{className:c().label,children:"Body (JSON)"}),(0,n.jsx)("textarea",{className:c().textarea,value:e.body,onChange:e=>b(e.target.value),placeholder:'{"key": "value"}',rows:8})]}),(0,n.jsxs)("div",{className:c().presets,children:[(0,n.jsx)("label",{className:c().label,children:"Quick Presets"}),(0,n.jsx)("div",{className:c().presetButtons,children:[{method:"GET",endpoint:"/api/v1/feeds/public",label:"Public Feeds"},{method:"GET",endpoint:"/api/v1/categories",label:"All Categories"},{method:"GET",endpoint:"/api/v1/categories/public",label:"Public Categories"},{method:"GET",endpoint:"/api/v1/analytics/top-1-commenter",label:"Top Commenter"},{method:"GET",endpoint:"/api/v1/analytics/top-10-commenters",label:"Top 10 Commenters"},{method:"GET",endpoint:"/api/v1/analytics/top-1-sharer",label:"Top Sharer"},{method:"GET",endpoint:"/api/v1/analytics/top-10-sharers",label:"Top 10 Sharers"},{method:"GET",endpoint:"/api/v1/analytics/top-1-patter",label:"Top Patter"},{method:"GET",endpoint:"/api/v1/analytics/top-10-patters",label:"Top 10 Patters"},{method:"GET",endpoint:"/api/v1/analytics/top-coin-holder",label:"Top Coin Holder"},{method:"GET",endpoint:"/api/v1/analytics/top-10-coin-holders",label:"Top 10 Coin Holders"}].map((e,t)=>(0,n.jsx)("button",{className:c().presetButton,onClick:()=>v(e),children:e.label},t))})]}),(0,n.jsx)("button",{className:c().executeButton,onClick:x,disabled:u,children:u?"Sending...":"Execute Request"})]}),(0,n.jsxs)("div",{className:c().responseSection,children:[(0,n.jsx)("h2",{className:c().sectionTitle,children:"Response"}),p&&(0,n.jsxs)("div",{className:c().error,children:[(0,n.jsx)("strong",{children:"Error:"})," ",p]}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:c().responseMeta,children:[(0,n.jsxs)("span",{className:"".concat(c().statusBadge," ").concat(a.status>=200&&a.status<300?c().success:c().error),children:[a.status," ",a.statusText]}),(0,n.jsx)("button",{className:c().copyButton,onClick:()=>{a&&navigator.clipboard.writeText(JSON.stringify(a,null,2))},children:"Copy Response"})]}),(0,n.jsxs)("div",{className:c().responseContent,children:[(0,n.jsxs)("details",{className:c().details,children:[(0,n.jsx)("summary",{className:c().summary,children:"Headers"}),(0,n.jsx)("pre",{className:c().pre,children:JSON.stringify(a.headers,null,2)})]}),(0,n.jsxs)("details",{className:c().details,open:!0,children:[(0,n.jsx)("summary",{className:c().summary,children:"Body"}),(0,n.jsx)("pre",{className:c().pre,children:JSON.stringify(a.data,null,2)})]})]})]}),!a&&!p&&!u&&(0,n.jsx)("div",{className:c().placeholder,children:"Execute a request to see the response here"})]})]})]})}),(0,n.jsx)(o.Z,{})]})}},8349:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(7437),s=a(7648),r=a(1468),i=a.n(r);let o=[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"},{label:"Help",href:"/help"},{label:"About",href:"/about"}],l=[{label:"X",href:"https://x.com/patreek",aria:"Open Patreek on X"},{label:"Facebook",href:"https://facebook.com",aria:"Open Patreek on Facebook"},{label:"Instagram",href:"https://instagram.com",aria:"Open Patreek on Instagram"}];function c(){let e=new Date().getFullYear();return(0,n.jsxs)("footer",{className:i().footer,children:[(0,n.jsx)("div",{className:i().links,children:o.map(e=>(0,n.jsx)(s.default,{href:e.href,className:i().link,children:e.label},e.label))}),(0,n.jsxs)("div",{className:i().right,children:[(0,n.jsxs)("span",{className:i().copy,children:["\xa9 ",e," Patreek"]}),(0,n.jsx)("div",{className:i().socials,children:l.map(e=>(0,n.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.aria,className:i().socialButton,children:"X"===e.label?"X":e.label.charAt(0)},e.label))})]})]})}},1224:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(7437),s=a(2265),r=a(7648),i=a(9376),o=a(6914),l=a.n(o),c=a(7029);function u(e){let{hasSession:t=!1,active:a}=e,o=(0,i.useRouter)(),u=(0,i.usePathname)(),[p,h]=(0,s.useState)(null),[m,_]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),x=(0,s.useMemo)(()=>null==a?void 0:a.toLowerCase(),[a]),v=[{label:"Coins",path:"/coins"},{label:"Community",path:"/community"},{label:"Shop",path:"https://shop.patreek.com"},{label:"Opinion",path:"/opinion"},{label:"Write",path:"/write"}];(0,s.useEffect)(()=>{(async()=>{if(t)try{if(!(await (0,c.r$)()).authenticated)return;let e=await (0,c.getUserProfile)();(null==e?void 0:e.username)&&h(e.username)}catch(e){h(null)}})()},[t]),(0,s.useEffect)(()=>{let e=!1;return(async()=>{try{let t=await (0,c.$0)();!e&&t&&Number.isFinite(t.unitPrice)&&b(t.unitPrice)}catch(e){console.warn("[Header] Failed to load Pat Coin price",e)}})(),()=>{e=!0}},[]);let g=e=>!!(x&&x===e.label.toLowerCase()||u&&e.path.startsWith("/")&&u.startsWith(e.path)),j=(0,s.useMemo)(()=>{let e=null!=f?f:.01;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(e)},[f]);return(0,n.jsxs)("header",{className:l().header,children:[(0,n.jsx)("div",{className:l().brand,onClick:()=>o.push("/"),children:"Patreek"}),(0,n.jsx)("nav",{className:l().nav,children:v.map(e=>(0,n.jsx)(r.default,{href:e.path,className:"".concat(l().navLink," ").concat(g(e)?l().activeLink:""),target:e.path.startsWith("http")?"_blank":void 0,children:e.label},e.label))}),(0,n.jsxs)("div",{className:l().actions,children:[(0,n.jsxs)(r.default,{href:"/coins",className:l().coinWidget,"aria-label":"Open Pat Coins — 1 P equals ".concat(j),children:[(0,n.jsx)(d,{className:l().coinIcon}),(0,n.jsxs)("div",{className:l().coinText,children:[(0,n.jsx)("span",{className:l().coinLabel,children:"Pat Coin"}),(0,n.jsxs)("span",{className:l().coinValue,children:["1\xa0P = ",j]})]})]}),(0,n.jsx)("button",{type:"button",className:l().profileCircle,onClick:()=>{t&&p?o.push("/u/".concat(p)):o.push("/registration")},"aria-label":"Open profile",children:p?p[0].toUpperCase():"P"}),(0,n.jsxs)("button",{type:"button",className:l().hamburger,onClick:()=>_(e=>!e),"aria-label":"Toggle navigation",children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})]}),m&&(0,n.jsx)("div",{className:l().mobileNav,children:v.map(e=>(0,n.jsx)(r.default,{href:e.path,className:l().mobileNavItem,onClick:()=>_(!1),children:e.label},e.label))})]})}function d(e){let{className:t}=e,a=(0,s.useId)();return(0,n.jsxs)("svg",{className:t,viewBox:"0 0 32 32",role:"presentation","aria-hidden":"true",focusable:"false",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:a,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#a855f7"}),(0,n.jsx)("stop",{offset:"45%",stopColor:"#6366f1"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#2563eb"})]})}),(0,n.jsx)("circle",{cx:"16",cy:"16",r:"15",fill:"url(#".concat(a,")")}),(0,n.jsx)("circle",{cx:"16",cy:"16",r:"14",fill:"none",stroke:"rgba(255,255,255,0.35)",strokeWidth:"1.5"}),(0,n.jsx)("path",{d:"M11.5 9h6.2c3 0 5.3 2.2 5.3 4.9 0 2.6-2.3 4.9-5.3 4.9h-3.1v4.2h-3.1V9zm6 7.1c1.3 0 2.2-.9 2.2-2.1s-.9-2-2.2-2h-2.9v4.1z",fill:"#fff"})]})}},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var n=a(2972),s=a.n(n)},9376:function(e,t,a){"use strict";var n=a(5475);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,t,a){"use strict";var n,s;e.exports=(null==(n=a.g.process)?void 0:n.env)&&"object"==typeof(null==(s=a.g.process)?void 0:s.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,n,s=e.exports={};function r(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&p())}function p(){if(!c){var e=o(d);c=!0;for(var t=l.length;t;){for(n=l,l=[];++u<t;)n&&n[u].run();u=-1,t=l.length}n=null,c=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];l.push(new h(e,t)),1!==l.length||c||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={exports:{}},i=!0;try{t[e](r,r.exports,n),i=!1}finally{i&&delete a[e]}return r.exports}n.ab="//";var s=n(229);e.exports=s}()},721:function(e){e.exports={page:"page_page__ZndDW",main:"page_main__J7x5X",container:"page_container__yCWye",header:"page_header__5UHcc",title:"page_title__10sDi",subtitle:"page_subtitle__UoWj2",backLink:"page_backLink__cJTL_",content:"page_content__o_F5f",requestSection:"page_requestSection__bU5DB",responseSection:"page_responseSection__ZidIF",sectionTitle:"page_sectionTitle__zpSoX",methodSelector:"page_methodSelector__kFQnP",methodButton:"page_methodButton__gSJXm",active:"page_active__2rHjj",inputGroup:"page_inputGroup__Imvj6",label:"page_label__9Mi15",input:"page_input__BfXkr",textarea:"page_textarea__yNRP9",presets:"page_presets___lxhB",presetButtons:"page_presetButtons__8annY",presetButton:"page_presetButton__gUrIO",executeButton:"page_executeButton__GP5hY",error:"page_error__K0Z_R",responseMeta:"page_responseMeta__4fNS_",statusBadge:"page_statusBadge__RPBtA",success:"page_success__fWGv9",copyButton:"page_copyButton__yzlvx",responseContent:"page_responseContent__XmQo1",details:"page_details__q4_Jy",summary:"page_summary__0MV_J",pre:"page_pre__zDt6Z",placeholder:"page_placeholder__pv94D"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",links:"Footer_links__cFiYr",link:"Footer_link__TBOP7",right:"Footer_right__s6ko6",copy:"Footer_copy__KUC9W",socials:"Footer_socials__Arjjf",socialButton:"Footer_socialButton__owWdN"}},6914:function(e){e.exports={header:"MainHeader_header__v29oY",brand:"MainHeader_brand__PWSjn",nav:"MainHeader_nav__OWvbh",navLink:"MainHeader_navLink__NUd27",activeLink:"MainHeader_activeLink__YR7BN",actions:"MainHeader_actions__jUZ_j",coinWidget:"MainHeader_coinWidget__Lwamz",coinIcon:"MainHeader_coinIcon__GoTN_",coinText:"MainHeader_coinText__soICt",coinLabel:"MainHeader_coinLabel__rEQWV",coinValue:"MainHeader_coinValue__U9zIq",profileCircle:"MainHeader_profileCircle__654Xs",hamburger:"MainHeader_hamburger__9fVCh",mobileNav:"MainHeader_mobileNav__RVDMJ",mobileNavItem:"MainHeader_mobileNavItem__n0yAB"}}},function(e){e.O(0,[7123,4977,2972,7029,2971,2117,1744],function(){return e(e.s=6596)}),_N_E=e.O()}]);