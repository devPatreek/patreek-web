(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5663],{3984:function(e,a,s){Promise.resolve().then(s.bind(s,420))},420:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return p}});var n=s(7437),t=s(2265),i=s(9376),r=s(3595),l=s(8349),o=s(7029),u=s(813),c=s.n(u);let d=s(257).env.NEXT_PUBLIC_API_URL||"https://api.patreek.com";function p(){let e=(0,i.useRouter)(),[a,s]=(0,t.useState)(""),[u,p]=(0,t.useState)(""),[m,_]=(0,t.useState)(!1),[g,h]=(0,t.useState)(null),[f,j]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{await (0,o.ng)()&&e.replace("/admin")}catch(e){console.error("Error checking admin session:",e)}finally{j(!1)}})()},[e]);let x=async s=>{if(s.preventDefault(),!a.trim()){h("Username is required");return}if(!u){h("Password is required");return}_(!0),h(null);try{var n;let s=await fetch("".concat(d,"/api/v1/admin/login"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({username:a.trim(),password:u})}),t=await s.json();s.ok&&(null===(n=t.data)||void 0===n?void 0:n.authenticated)?e.push("/admin"):(h(t.message||"Invalid username or password. Please try again."),p(""))}catch(e){h("Failed to login. Please try again."),p("")}finally{_(!1)}};return f?(0,n.jsxs)("div",{className:c().page,children:[(0,n.jsx)(r.Z,{hasSession:!1}),(0,n.jsx)("div",{className:c().loading,children:(0,n.jsx)("p",{children:"Checking authentication..."})}),(0,n.jsx)(l.Z,{})]}):(0,n.jsxs)("div",{className:c().page,children:[(0,n.jsx)(r.Z,{hasSession:!1}),(0,n.jsx)("main",{className:c().main,children:(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsx)("h1",{className:c().title,children:"Admin Login"}),(0,n.jsx)("p",{className:c().subtitle,children:"Enter your credentials to access the admin panel"}),(0,n.jsxs)("form",{onSubmit:x,className:c().form,children:[(0,n.jsxs)("div",{className:c().formGroup,children:[(0,n.jsx)("label",{htmlFor:"username",className:c().label,children:"Username"}),(0,n.jsx)("input",{id:"username",type:"text",value:a,onChange:e=>{s(e.target.value),h(null)},className:c().input,placeholder:"Enter your username",disabled:m,autoComplete:"username",autoFocus:!0})]}),(0,n.jsxs)("div",{className:c().formGroup,children:[(0,n.jsx)("label",{htmlFor:"password",className:c().label,children:"Password"}),(0,n.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>{p(e.target.value),h(null)},className:c().input,placeholder:"Enter your password",disabled:m,autoComplete:"current-password"})]}),g&&(0,n.jsx)("div",{className:c().errorMessage,children:g}),(0,n.jsx)("button",{type:"submit",className:c().submitButton,disabled:m||!a.trim()||!u,children:m?"Logging in...":"Login"})]})]})}),(0,n.jsx)(l.Z,{})]})}},813:function(e){e.exports={page:"page_page__Z7AGT",main:"page_main__PvLTi",container:"page_container__IYweu",title:"page_title__22_cS",subtitle:"page_subtitle__XwBXr",form:"page_form__mvqUF",formGroup:"page_formGroup__NZzdp",label:"page_label__wbfWt",input:"page_input__264_x",errorMessage:"page_errorMessage__1OaZ5",submitButton:"page_submitButton__7IGWt",loading:"page_loading__66yfe"}}},function(e){e.O(0,[563,2972,5726,1908,7611,2971,2117,1744],function(){return e(e.s=3984)}),_N_E=e.O()}]);