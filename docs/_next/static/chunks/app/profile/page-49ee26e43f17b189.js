(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{6384:function(e,a,s){Promise.resolve().then(s.bind(s,4153))},4153:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return v}});var t=s(7437),l=s(2265),n=s(9376),i=s(7648),r=s(3145),o=s(9924),c=s.n(o),d=s(1224),h=s(8349),u=s(7029),m=s(3726),_=s.n(m);function p(e){let{currentXp:a,targetXp:s,rankName:l,dailyXp:n,dailyCap:i}=e,r=Math.max(0,Math.floor(a)),o=Math.max(1,Math.floor(s)),c=Math.max(0,Math.floor(n)),d=Math.max(1,Math.floor(i)),h=d?Math.min(100,Math.round(c/d*100)):0,u=r>=.7*o;return(0,t.jsxs)("div",{className:_().wrapper,children:[(0,t.jsxs)("div",{className:_().titleRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:_().sectionLabel,children:"Level Progress"}),(0,t.jsx)("p",{className:_().rankName,children:l})]}),(0,t.jsxs)("p",{className:_().levelText,children:[r.toLocaleString()," / ",o.toLocaleString()," XP"]})]}),(0,t.jsx)("div",{className:_().progressTrack,"aria-label":"Level progress",children:(0,t.jsx)("div",{className:_().fill,style:{width:"".concat(o?Math.min(100,Math.round(r/o*100)):0,"%")}})}),(0,t.jsxs)("div",{className:_().dailyRow,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:_().dailyLabel,children:"Daily Focus"}),(0,t.jsxs)("p",{className:_().dailyText,children:[c.toLocaleString()," / ",d.toLocaleString()," XP today"]})]}),(0,t.jsxs)("span",{className:_().dailyPercent,children:[h,"%"]})]}),(0,t.jsx)("div",{className:_().dailyTrack,"aria-label":"Daily focus progress",children:(0,t.jsx)("div",{className:_().dailyFill,style:{width:"".concat(h,"%")}})}),(0,t.jsxs)("div",{className:_().actionsRow,children:[(0,t.jsx)("button",{type:"button",className:"".concat(_().buyButton," ").concat(u?_().buyActive:""),disabled:!u,children:"Buy Rank"}),(0,t.jsx)("span",{className:_().buyHint,children:u?"Ready to ascend":"Need more XP to unlock next tier"})]})]})}var g=s(4438);function v(){var e,a,s,o,m,_,v,x,j,N,f,b,y,k;let B=(0,n.useRouter)(),[L,w]=(0,l.useState)(!0),[P,C]=(0,l.useState)(!1),[I,S]=(0,l.useState)(null),[M,A]=(0,l.useState)(!1),[D,X]=(0,l.useState)(!1),[F,T]=(0,l.useState)(""),[R,H]=(0,l.useState)(""),[O,V]=(0,l.useState)(!1),[W,E]=(0,l.useState)(null),[U,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{if((await (0,u.r$)()).authenticated){C(!0);let e=await (0,u.getUserProfile)();S(e),T((null==e?void 0:e.name)||""),H((null==e?void 0:e.headline)||"")}else B.replace("/registration")}catch(e){console.error("Error checking session:",e),B.replace("/registration")}finally{w(!1)}})()},[B]);let G=async()=>{try{await (0,u.w7)(),window.location.href="https://patreek.com"}catch(e){console.error("Error signing out:",e),window.location.href="https://patreek.com"}},Y=async()=>{if(I){V(!0),E(null),Z(!1);try{let e={name:F.trim()||void 0,headline:R.trim()||void 0},a=await (0,u.ck)(e);S(a),X(!1),Z(!0),setTimeout(()=>Z(!1),3e3)}catch(e){E(e instanceof Error?e.message:"Failed to update profile")}finally{V(!1)}}},J=async()=>{if(I)try{let e=await fetch("/api/v1/user/rank/buy",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!e.ok)throw Error("Failed to buy rank boost");await e.json();let a=await (0,u.getUserProfile)();S(a),g.Am.success("Rank boost purchased! Check your new level.")}catch(e){g.Am.error("Purchase failed. Check your coins and try again.")}};if(L)return(0,t.jsxs)("div",{className:c().page,children:[(0,t.jsx)(d.Z,{hasSession:!0}),(0,t.jsx)("div",{className:c().loading,children:(0,t.jsx)("p",{children:"Loading your profile…"})}),(0,t.jsx)(h.Z,{})]});if(!P)return null;let z=null!==(s=null==I?void 0:null===(e=I.rank)||void 0===e?void 0:e.level)&&void 0!==s?s:1,K=null!==(o=null==I?void 0:I.xp)&&void 0!==o?o:0,Q=null!==(m=null==I?void 0:I.adSlots)&&void 0!==m?m:4,q=null!==(_=null==I?void 0:I.dailyCap)&&void 0!==_?_:200,$=null!==(y=({2:1400,3:4200,4:12e3,5:6e4,6:12e4,7:24e4,8:1/0})[z+1])&&void 0!==y?y:1/0,ee=null!==(v=null==I?void 0:null===(a=I.rank)||void 0===a?void 0:a.name)&&void 0!==v?v:"Fledgling",ea=(null==I?void 0:I.name)?I.name.split(" ").map(e=>{var a;return null===(a=e[0])||void 0===a?void 0:a.toUpperCase()}).join("").slice(0,2):"P";return(0,t.jsxs)("div",{className:c().page,children:[(0,t.jsx)(g.x7,{richColors:!0,position:"top-right"}),(0,t.jsx)(d.Z,{hasSession:!0}),(0,t.jsx)("main",{className:c().main,children:(0,t.jsxs)("div",{className:c().container,children:[(0,t.jsxs)("section",{className:c().heroCard,children:[(0,t.jsx)("div",{className:c().cover}),(0,t.jsxs)("div",{className:c().heroInner,children:[(0,t.jsx)("div",{className:c().avatar,children:(null==I?void 0:I.avatarUrl)?(0,t.jsx)(r.default,{src:I.avatarUrl,alt:I.name||"Profile",width:96,height:96,className:c().avatarImage}):(0,t.jsx)("span",{className:c().avatarInitials,children:ea})}),(0,t.jsx)("div",{className:c().heroMeta,children:D?(0,t.jsxs)("div",{className:c().editForm,children:[(0,t.jsxs)("div",{className:c().formGroup,children:[(0,t.jsx)("label",{htmlFor:"name",className:c().formLabel,children:"Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:F,onChange:e=>T(e.target.value),className:c().formInput,maxLength:255,placeholder:"Your name"})]}),(0,t.jsxs)("div",{className:c().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"headline",className:c().formLabel,children:["Headline",(0,t.jsxs)("span",{className:c().charCount,children:[R.length,"/150"]})]}),(0,t.jsx)("textarea",{id:"headline",value:R,onChange:e=>{e.target.value.length<=150&&H(e.target.value)},className:c().formTextarea,maxLength:150,placeholder:"What you do for a living (e.g., Software Engineer at Tech Corp)",rows:3})]}),W&&(0,t.jsx)("div",{className:c().errorMessage,children:W}),U&&(0,t.jsx)("div",{className:c().successMessage,children:"Profile updated successfully!"}),(0,t.jsxs)("div",{className:c().formActions,children:[(0,t.jsx)("button",{onClick:()=>{X(!1),T((null==I?void 0:I.name)||""),H((null==I?void 0:I.headline)||""),E(null),Z(!1)},className:c().cancelButton,disabled:O,children:"Cancel"}),(0,t.jsx)("button",{onClick:Y,className:c().saveButton,disabled:O,children:O?"Saving...":"Save"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:c().nameRow,children:[(0,t.jsx)("h1",{className:c().name,children:(null==I?void 0:I.name)||"Patreek User"}),(null==I?void 0:I.username)&&(0,t.jsxs)("p",{className:c().username,children:["@",I.username]})]}),(null==I?void 0:I.headline)&&(0,t.jsx)("p",{className:c().headline,children:I.headline}),(null==I?void 0:I.email)&&(0,t.jsx)("p",{className:c().email,children:I.email}),(null==I?void 0:I.createdAt)&&(0,t.jsxs)("p",{className:c().joined,children:["Joined ",new Date(I.createdAt).toLocaleDateString()]}),(0,t.jsxs)("div",{className:c().heroActions,children:[(0,t.jsx)("button",{onClick:()=>{X(!0),T((null==I?void 0:I.name)||""),H((null==I?void 0:I.headline)||""),E(null),Z(!1)},className:c().editButton,children:"Edit Profile"}),(0,t.jsx)(i.default,{href:"/home",className:c().primaryButton,children:"View your pats"}),(0,t.jsx)(i.default,{href:"/profile/categories",className:c().secondaryButton,children:"Manage categories"})]})]})})]}),(0,t.jsxs)("div",{className:c().statsRow,children:[(0,t.jsxs)("div",{className:c().statChip,children:[(0,t.jsx)("span",{className:c().statLabel,children:"Pats"}),(0,t.jsx)("span",{className:c().statValue,children:null!==(x=null==I?void 0:I.totalPats)&&void 0!==x?x:0})]}),(0,t.jsxs)("div",{className:c().statChip,children:[(0,t.jsx)("span",{className:c().statLabel,children:"Comments"}),(0,t.jsx)("span",{className:c().statValue,children:null!==(j=null==I?void 0:I.totalComments)&&void 0!==j?j:0})]}),(0,t.jsxs)("div",{className:c().statChip,children:[(0,t.jsx)("span",{className:c().statLabel,children:"Shares"}),(0,t.jsx)("span",{className:c().statValue,children:null!==(N=null==I?void 0:I.totalShares)&&void 0!==N?N:0})]}),(0,t.jsxs)("div",{className:c().statChip,children:[(0,t.jsx)("span",{className:c().statLabel,children:"Pat Coins"}),(0,t.jsx)("span",{className:c().statValue,children:null!==(f=null==I?void 0:I.coins)&&void 0!==f?f:0})]})]})]}),(0,t.jsxs)("div",{className:c().progressSection,children:[(0,t.jsx)(p,{currentXp:K,targetXp:$,rankName:ee,dailyXp:null!==(b=null==I?void 0:I.dailyXp)&&void 0!==b?b:0,dailyCap:q}),(0,t.jsxs)("div",{className:c().adLoadStatus,children:[(0,t.jsx)("span",{children:z>=5?"Ad Load: None (Premium Status Active) ✨":"Ad Load: Heavy/Medium (Reach Fledgling to remove)"}),Q>0&&(0,t.jsxs)("span",{className:c().adSlotInfo,children:[Q," ad slot",1===Q?"":"s"," active"]})]}),(0,t.jsxs)("button",{onClick:J,className:c().rankBoostButton,disabled:!(e=>{var a,s;let t=null!==(s=null==e?void 0:null===(a=e.rank)||void 0===a?void 0:a.level)&&void 0!==s?s:0;return!!e&&!(t>=7)})(I),children:["Buy Rank Boost (",null!==(k=({1:1e3,2:3e3,3:1e4,4:5e4,5:1e5,6:2e5})[z])&&void 0!==k?k:0," Pat Coins)"]})]}),(0,t.jsxs)("div",{className:c().grid,children:[(0,t.jsxs)("div",{className:c().card,children:[(0,t.jsx)("div",{className:c().cardHeader,children:(0,t.jsx)("h2",{className:c().sectionTitle,children:"Account"})}),(0,t.jsxs)("div",{className:c().settingList,children:[(0,t.jsxs)(i.default,{href:"/profile/settings",className:c().settingItem,children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83D\uDC64"}),(0,t.jsx)("span",{className:c().settingLabel,children:"Profile settings"})]}),(0,t.jsx)("span",{className:c().settingArrow,children:"→"})]}),(0,t.jsxs)(i.default,{href:"/profile/categories",className:c().settingItem,children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83D\uDCF0"}),(0,t.jsx)("span",{className:c().settingLabel,children:"News categories"})]}),(0,t.jsx)("span",{className:c().settingArrow,children:"→"})]})]})]}),(0,t.jsxs)("div",{className:c().card,children:[(0,t.jsx)("div",{className:c().cardHeader,children:(0,t.jsx)("h2",{className:c().sectionTitle,children:"Preferences"})}),(0,t.jsx)("div",{className:c().settingList,children:(0,t.jsxs)("div",{className:c().settingItem,children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83C\uDF19"}),(0,t.jsx)("span",{className:c().settingLabel,children:"Dark mode"})]}),(0,t.jsxs)("label",{className:c().toggle,children:[(0,t.jsx)("input",{type:"checkbox",checked:M,onChange:()=>{A(!M)}}),(0,t.jsx)("span",{className:c().toggleSlider})]})]})})]}),(0,t.jsxs)("div",{className:c().card,children:[(0,t.jsx)("div",{className:c().cardHeader,children:(0,t.jsx)("h2",{className:c().sectionTitle,children:"Support"})}),(0,t.jsxs)("div",{className:c().settingList,children:[(0,t.jsxs)(i.default,{href:"/terms",className:c().settingItem,children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83D\uDCC4"}),(0,t.jsx)("span",{className:c().settingLabel,children:"Terms & Conditions"})]}),(0,t.jsx)("span",{className:c().settingArrow,children:"→"})]}),(0,t.jsxs)(i.default,{href:"/contact",className:c().settingItem,children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83D\uDCAC"}),(0,t.jsx)("span",{className:c().settingLabel,children:"Help & Support"})]}),(0,t.jsx)("span",{className:c().settingArrow,children:"→"})]})]})]}),(0,t.jsxs)("div",{className:c().card,children:[(0,t.jsx)("div",{className:c().cardHeader,children:(0,t.jsx)("h2",{className:c().sectionTitle,children:"Account actions"})}),(0,t.jsxs)("div",{className:c().settingList,children:[(0,t.jsxs)("button",{onClick:G,className:"".concat(c().settingItem," ").concat(c().signOutButton),children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83D\uDEAA"}),(0,t.jsx)("span",{className:c().settingLabel,children:"Sign out"})]}),(0,t.jsx)("span",{className:c().settingArrow,children:"→"})]}),(0,t.jsxs)("button",{className:"".concat(c().settingItem," ").concat(c().deleteButton),onClick:()=>{confirm("Are you sure you want to delete your account? This action cannot be undone.")&&console.log("Delete account")},children:[(0,t.jsxs)("div",{className:c().settingLeft,children:[(0,t.jsx)("span",{className:c().settingIcon,children:"\uD83D\uDDD1️"}),(0,t.jsx)("span",{className:c().settingLabel,children:"Delete account"})]}),(0,t.jsx)("span",{className:c().settingArrow,children:"→"})]})]})]})]})]})}),(0,t.jsx)(h.Z,{})]})}},8349:function(e,a,s){"use strict";s.d(a,{Z:function(){return c}});var t=s(7437),l=s(7648),n=s(1468),i=s.n(n);let r=[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"},{label:"Help",href:"/help"},{label:"About",href:"/about"}],o=[{label:"X",href:"https://x.com/patreek",aria:"Open Patreek on X"},{label:"Facebook",href:"https://facebook.com",aria:"Open Patreek on Facebook"},{label:"Instagram",href:"https://instagram.com",aria:"Open Patreek on Instagram"}];function c(){let e=new Date().getFullYear();return(0,t.jsxs)("footer",{className:i().footer,children:[(0,t.jsx)("div",{className:i().links,children:r.map(e=>(0,t.jsx)(l.default,{href:e.href,className:i().link,children:e.label},e.label))}),(0,t.jsxs)("div",{className:i().right,children:[(0,t.jsxs)("span",{className:i().copy,children:["\xa9 ",e," Patreek"]}),(0,t.jsx)("div",{className:i().socials,children:o.map(e=>(0,t.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.aria,className:i().socialButton,children:"X"===e.label?"X":e.label.charAt(0)},e.label))})]})]})}},1224:function(e,a,s){"use strict";s.d(a,{Z:function(){return d}});var t=s(7437),l=s(2265),n=s(7648),i=s(9376),r=s(6914),o=s.n(r),c=s(7029);function d(e){let{hasSession:a=!1,active:s}=e,r=(0,i.useRouter)(),d=(0,i.usePathname)(),[h,u]=(0,l.useState)(null),[m,_]=(0,l.useState)(!1),p=(0,l.useMemo)(()=>null==s?void 0:s.toLowerCase(),[s]),g=[{label:"Coins",path:"/coins"},{label:"Community",path:"/community"},{label:"Shop",path:"https://shop.patreek.com"},{label:"Opinion",path:"/opinion"},{label:"Write",path:"/write"}];(0,l.useEffect)(()=>{(async()=>{if(a)try{if(!(await (0,c.r$)()).authenticated)return;let e=await (0,c.getUserProfile)();(null==e?void 0:e.username)&&u(e.username)}catch(e){u(null)}})()},[a]);let v=e=>!!(p&&p===e.label.toLowerCase()||d&&e.path.startsWith("/")&&d.startsWith(e.path));return(0,t.jsxs)("header",{className:o().header,children:[(0,t.jsx)("div",{className:o().brand,onClick:()=>r.push("/"),children:"Patreek"}),(0,t.jsx)("nav",{className:o().nav,children:g.map(e=>(0,t.jsx)(n.default,{href:e.path,className:"".concat(o().navLink," ").concat(v(e)?o().activeLink:""),target:e.path.startsWith("http")?"_blank":void 0,children:e.label},e.label))}),(0,t.jsxs)("div",{className:o().actions,children:[(0,t.jsx)("button",{type:"button",className:o().iconButton,"aria-label":"Search Patreek",children:"\uD83D\uDD0D"}),(0,t.jsx)("button",{type:"button",className:o().profileCircle,onClick:()=>{a&&h?r.push("/u/".concat(h)):r.push("/registration")},"aria-label":"Open profile",children:h?h[0].toUpperCase():"P"}),(0,t.jsxs)("button",{type:"button",className:o().hamburger,onClick:()=>_(e=>!e),"aria-label":"Toggle navigation",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})]}),m&&(0,t.jsx)("div",{className:o().mobileNav,children:g.map(e=>(0,t.jsx)(n.default,{href:e.path,className:o().mobileNavItem,onClick:()=>_(!1),children:e.label},e.label))})]})}},7648:function(e,a,s){"use strict";s.d(a,{default:function(){return l.a}});var t=s(2972),l=s.n(t)},9924:function(e){e.exports={page:"page_page__7nxjA",loading:"page_loading__fw5k2",main:"page_main__JPdsv",container:"page_container__n877s",heroCard:"page_heroCard__RPslb",cover:"page_cover__ARynL",heroInner:"page_heroInner__hvszS",avatar:"page_avatar__MIa8k",avatarImage:"page_avatarImage__BivQR",avatarInitials:"page_avatarInitials__DVXVP",heroMeta:"page_heroMeta__ToP1s",nameRow:"page_nameRow__rj2tl",name:"page_name__G9nOM",username:"page_username__lePzw",headline:"page_headline___9JFt",email:"page_email__igijm",joined:"page_joined__Pv7So",heroActions:"page_heroActions__X6Ws4",primaryButton:"page_primaryButton__OwI7N",secondaryButton:"page_secondaryButton__RuV_b",editButton:"page_editButton__EOXh1",statsRow:"page_statsRow__DL2S6",progressSection:"page_progressSection__MOTXF",adLoadStatus:"page_adLoadStatus__U6xou",adSlotInfo:"page_adSlotInfo__IxIJ1",statChip:"page_statChip__iMIkB",statLabel:"page_statLabel__vZXB_",statValue:"page_statValue__qB9Oc",grid:"page_grid__G25_g",card:"page_card__531ro",cardHeader:"page_cardHeader__HiqAZ",sectionTitle:"page_sectionTitle__W1erW",settingList:"page_settingList__Nrst2",settingItem:"page_settingItem__eH8bF",settingLeft:"page_settingLeft__MBx7c",settingIcon:"page_settingIcon__X1_TN",settingLabel:"page_settingLabel__xEYla",settingArrow:"page_settingArrow__vFIk_",toggle:"page_toggle__ROP25",toggleSlider:"page_toggleSlider__owyl2",signOutButton:"page_signOutButton__LUPPl",deleteButton:"page_deleteButton__zngTf",editForm:"page_editForm__4YCiq",formGroup:"page_formGroup__Axb6m",formLabel:"page_formLabel__ZpjI9",charCount:"page_charCount__IcneL",formInput:"page_formInput__KY_Jk",formTextarea:"page_formTextarea__pI19_",formActions:"page_formActions__CtuBs",cancelButton:"page_cancelButton__jFbMB",saveButton:"page_saveButton__REKG6",errorMessage:"page_errorMessage__fyHF8",successMessage:"page_successMessage__WGMiA"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",links:"Footer_links__cFiYr",link:"Footer_link__TBOP7",right:"Footer_right__s6ko6",copy:"Footer_copy__KUC9W",socials:"Footer_socials__Arjjf",socialButton:"Footer_socialButton__owWdN"}},6914:function(e){e.exports={header:"MainHeader_header__v29oY",brand:"MainHeader_brand__PWSjn",nav:"MainHeader_nav__OWvbh",navLink:"MainHeader_navLink__NUd27",activeLink:"MainHeader_activeLink__YR7BN",actions:"MainHeader_actions__jUZ_j",iconButton:"MainHeader_iconButton__6RFhG",profileCircle:"MainHeader_profileCircle__654Xs",hamburger:"MainHeader_hamburger__9fVCh",mobileNav:"MainHeader_mobileNav__RVDMJ",mobileNavItem:"MainHeader_mobileNavItem__n0yAB"}},3726:function(e){e.exports={wrapper:"XpProgressBar_wrapper__jnHlN",titleRow:"XpProgressBar_titleRow__3rBek",sectionLabel:"XpProgressBar_sectionLabel__2oksW",rankName:"XpProgressBar_rankName__p3B_e",levelText:"XpProgressBar_levelText__mlonf",progressTrack:"XpProgressBar_progressTrack__VYhV9",fill:"XpProgressBar_fill__zW9sj",dailyRow:"XpProgressBar_dailyRow__jjxBB",dailyLabel:"XpProgressBar_dailyLabel__XnXnn",dailyText:"XpProgressBar_dailyText__VHQ3o",dailyPercent:"XpProgressBar_dailyPercent__hQ9VD",dailyTrack:"XpProgressBar_dailyTrack__ZPhGB",dailyFill:"XpProgressBar_dailyFill__9wuSA",actionsRow:"XpProgressBar_actionsRow__dmXZS",buyButton:"XpProgressBar_buyButton__fmKjW",buyActive:"XpProgressBar_buyActive__fIwHI",buyHint:"XpProgressBar_buyHint__bIxBO"}}},function(e){e.O(0,[7123,4977,2972,3145,466,7029,2971,2117,1744],function(){return e(e.s=6384)}),_N_E=e.O()}]);