(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[215],{1215:function(e,t,n){"use strict";n.d(t,{default:function(){return w}});var r=n(7437),o=n(2265),a=n(9376),c=n(9116);let l="patreek_article_";function i(){try{let e=Date.now(),t=[];for(let n=0;n<localStorage.length;n++){let r=localStorage.key(n);if(null==r?void 0:r.startsWith(l))try{let n=localStorage.getItem(r);if(n){let o=JSON.parse(n);e-o.timestamp>6048e5&&t.push(r)}}catch(e){t.push(r)}}t.forEach(e=>localStorage.removeItem(e))}catch(e){console.error("Error clearing expired cache:",e)}}i();var s=n(7648),d=n(3145);function m(e){if(!e||0===e.trim().length)return e;let t=[];t=e.includes("\n\n")?e.split(/\n\s*\n/):e.includes("\n")?e.split(/\n/):[e];let n=[];for(let e of t){let t=e.trim();if(!t)continue;if(t.length<=150){n.push(t);continue}let r=[],o=t.split(/([.!?]+["']?\s+)/),a="";for(let e=0;e<o.length;e++){let t=o[e];t&&(/[.!?]+["']?\s*$/.test(t)?((a+=t).trim()&&r.push(a.trim()),a=""):a+=t)}if(a.trim()&&r.push(a.trim()),r.length<=1||r.some(e=>e.length>1200)){r=t.split(/([.!?]+["']?\s*)/).filter(e=>e.trim().length>0);let e=[];for(let t=0;t<r.length;t++)/^[.!?]+["']?\s*$/.test(r[t])?e.length>0&&(e[e.length-1]+=r[t]):e.push(r[t]);r=e.filter(e=>e.trim().length>0)}if(r.length<=1&&t.length>600&&(r=t.split(/([.;]\s+)/).filter(e=>e.trim().length>0)),r.length<=1||r.some(e=>e.length>900)){let e=t.split(/\s+/).filter(e=>e.length>0),n=Math.ceil(t.length/600),o=Math.max(30,Math.ceil(e.length/n));r=[];for(let t=0;t<e.length;t+=o){let n=e.slice(t,t+o).join(" ");n.trim()&&r.push(n.trim())}}let c="",l=0;for(let e of r){let t=e.trim();if(!t)continue;let r=t.split(/\s+/).filter(e=>e.length>0).length,o=t.length;c&&(c.length+o+1>600||l+r>100)?(c.trim()&&n.push(c.trim()),c=t,l=r):(c+=(c?" ":"")+t,l+=r)}c.trim()&&n.push(c.trim())}return n.join("\n\n")}var h=n(3352),u=n(8349),f=n(1402),g=n.n(f),p=n(7398),_=n.n(p);function A(e){var t;let{article:n}=e,[a,l]=(0,o.useState)(!1),[i,f]=(0,o.useState)([]),[p,A]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");l(e.matches);let t=e=>l(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,o.useEffect)(()=>{(async function(){try{A(!0);let e=await (0,c.lk)(n.id);f(e)}catch(e){console.error("Failed to load comments:",e),f([])}finally{A(!1)}})(),window.ezstandalone&&window.ezstandalone.cmd.push(function(){window.ezstandalone.showAds()})},[n.id]);let w=(t=n.createdAt,_()(t).isSame(_()(),"day"))?"Today in":_()(n.createdAt).format("MMM DD"),x=(0,o.useMemo)(()=>{var e;return(e=n.body)&&0!==e.trim().length?/<[a-z][\s\S]*>/i.test(e)?function(e){if(!e||0===e.trim().length)return e;let t=e.match(/<p[^>]*>[\s\S]*?<\/p>/gi);if(t&&!t.some(e=>e.replace(/<[^>]*>/g,"").trim().length>600)&&t.length>2)return e;let n=e.replace(/<\/p>\s*<p[^>]*>/gi,"\n\n");n=(n=(n=n.replace(/<p[^>]*>/gi,"")).replace(/<\/p>/gi,"")).replace(/<\/?(div|section|article)[^>]*>/gi,"");let r={},o=0,a=m(n=n.replace(/<(\/?)([a-z]+)[^>]*>/gi,(e,t,n)=>{let a="__TAG_".concat(o,"__");return r[a]=e,o++,a}));return Object.keys(r).forEach(e=>{a=a.replace(e,r[e])}),a.split(/\n\s*\n/).filter(e=>e.trim()).map(e=>"<p>".concat(e.trim(),"</p>")).join("\n")}(e):m(e):e},[n.body]);return(0,r.jsxs)("div",{className:"".concat(g().container," ").concat(a?g().dark:""),children:[(0,r.jsx)("header",{className:g().header,children:(0,r.jsxs)("div",{className:g().headerInner,children:[(0,r.jsx)(s.default,{href:"/",className:g().logoLink,children:(0,r.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:50,height:50,className:g().logo})}),(0,r.jsxs)("div",{className:g().headerCenter,children:[(0,r.jsx)("h1",{className:g().categoryName,children:n.categoryName}),(0,r.jsx)("p",{className:g().date,children:w})]})]})}),(0,r.jsx)("main",{className:g().main,children:(0,r.jsxs)("article",{className:g().article,children:[n.imageUrl&&(0,r.jsx)("div",{className:g().imageWrapper,children:(0,r.jsx)("img",{src:n.imageUrl,alt:n.title,className:g().image})}),(0,r.jsx)("h1",{className:g().title,children:n.title}),n.excerpt&&(0,r.jsx)("p",{className:g().description,children:n.excerpt}),(0,r.jsx)(h.Z,{placementId:104,showPlaceholder:!0}),(0,r.jsx)("div",{className:g().content,dangerouslySetInnerHTML:{__html:x}}),(0,r.jsx)(h.Z,{placementId:105,showPlaceholder:!0}),(0,r.jsxs)("div",{className:g().commentsSection,children:[(0,r.jsx)("h2",{className:g().commentsTitle,children:"Comments"}),p?(0,r.jsx)("p",{className:g().commentsLoading,children:"Loading comments..."}):0===i.length?(0,r.jsx)("p",{className:g().noComments,children:"No comments yet."}):(0,r.jsx)("div",{className:g().commentsList,children:i.map((e,t)=>(0,r.jsxs)("div",{className:g().commentItem,children:[(0,r.jsxs)("div",{className:g().commentHeader,children:[e.photoUrl&&(0,r.jsx)("img",{src:e.photoUrl,alt:e.author,className:g().commentAvatar}),(0,r.jsxs)("div",{className:g().commentAuthorInfo,children:[(0,r.jsx)("span",{className:g().commentAuthor,children:e.author}),(0,r.jsx)("span",{className:g().commentDate,children:_()(e.createdAt).format("MMM DD, YYYY")})]})]}),(0,r.jsx)("p",{className:g().commentBody,children:e.body})]},t))})]}),(0,r.jsx)("div",{className:g().unlockBanner,children:(0,r.jsxs)("div",{className:g().unlockBannerContent,children:[(0,r.jsx)("p",{className:g().unlockText,children:"UNLOCK YOUR NEWS FEED"}),(0,r.jsxs)("p",{className:g().unlockDescription,children:["Register to get the latest updates from the topics"," ",(0,r.jsx)("span",{className:g().unlockUnderline,children:"you"})," care about"]}),(0,r.jsxs)("div",{className:g().storeButtons,children:[(0,r.jsx)("a",{href:"https://apps.apple.com/us/app/patreek/id6547858283",target:"_blank",rel:"noopener noreferrer",className:g().storeLink,children:(0,r.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/67a3729b558347b9bf210a5a_Store%3DApp%20Store%2C%20Type%3DDark%2C%20Language%3DEnglish%402x.png",alt:"Download on App Store",width:200,height:60,className:g().storeImage})}),(0,r.jsx)("a",{href:"#",className:g().storeLink,children:(0,r.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/67a3727c8abb3515ab42d712_Store%3DGoogle%20Play%2C%20Type%3DDark%2C%20Language%3DEnglish%402x.png",alt:"Get it on Google Play",width:200,height:60,className:g().storeImage})})]})]})})]})}),(0,r.jsx)(u.Z,{})]})}function w(){let e=(0,a.usePathname)(),[t,n]=(0,o.useState)(null),[s,d]=(0,o.useState)(!0),[m,h]=(0,o.useState)(null);return((0,o.useEffect)(()=>{(async function(){let t=null;{let e=window.location.pathname,n=e.match(/\/article\/(\d+)/);if(n&&(t=parseInt(n[1],10),console.log("[ArticlePage] Extracted article ID from window.location.pathname: ".concat(t," (path: ").concat(e,")"))),!t){let e=window.location.href.match(/\/article\/(\d+)/);e&&(t=parseInt(e[1],10),console.log("[ArticlePage] Extracted article ID from window.location.href: ".concat(t)))}}if(!t&&e){let n=e.match(/\/article\/(\d+)/);n&&(t=parseInt(n[1],10),console.log("[ArticlePage] Extracted article ID from pathname: ".concat(t)))}if(!t||isNaN(t)||t<=0){console.error("[ArticlePage] Invalid article ID:",{articleId:t,pathname:e,windowPathname:window.location.pathname,windowHref:window.location.href,userAgent:window.navigator.userAgent}),h("Invalid article ID"),d(!1);return}try{d(!0),console.log("[ArticlePage] Loading article ".concat(t,"..."));let e=function(e){try{let t="".concat(l).concat(e),n=localStorage.getItem(t);if(!n)return null;let r=JSON.parse(n);if(Date.now()-r.timestamp>6048e5)return localStorage.removeItem(t),null;return r.data}catch(e){return console.error("Error reading from cache:",e),null}}(t);if(e){console.log("[ArticlePage] Using cached article ".concat(t)),n(e),h(null),d(!1);return}console.log("[ArticlePage] Fetching article ".concat(t," from API"));let r=await (0,c.ST)(t);if(!r){let e=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);console.log("[ArticlePage] Article ".concat(t," not found or not public (returned null). Safari: ").concat(e)),e&&console.warn("[ArticlePage] Safari detected - this might be a CORS or fetch issue. Check network tab."),h("Article not found or not available"),setTimeout(()=>{window.location.href="https://links.patreek.com/"},2e3);return}(function(e,t){let n="".concat(l).concat(e),r={data:t,timestamp:Date.now()};try{localStorage.setItem(n,JSON.stringify(r))}catch(e){if(console.error("Error writing to cache:",e),e instanceof DOMException&&"QuotaExceededError"===e.name){i();try{localStorage.setItem(n,JSON.stringify(r))}catch(e){console.error("Failed to cache after cleanup:",e)}}}})(t,r),n(r),h(null),console.log("[ArticlePage] Successfully loaded article ".concat(t,": ").concat(r.title)),window.ezstandalone&&window.ezstandalone.cmd.push(function(){window.ezstandalone.showAds()})}catch(e){console.error("[ArticlePage] Failed to load article:",e),h("Failed to load article. Please try again later.")}finally{d(!1)}})()},[e]),s)?(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333"},children:(0,r.jsx)("p",{children:"Loading article..."})}):m||!t?(0,r.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333",padding:"20px"},children:[(0,r.jsx)("p",{children:m||"Article not found"}),(0,r.jsx)("a",{href:"/",style:{marginTop:"16px",color:"#667eea",textDecoration:"underline"},children:"← Back to Home"})]}):(0,r.jsx)(A,{article:t})}},3352:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(7437),o=n(2265),a=n(9055),c=n.n(a);function l(e){let{placementId:t,showPlaceholder:n=!1}=e,a=(0,o.useRef)(null),l=(0,o.useRef)(!1);return((0,o.useEffect)(()=>{if(l.current)return;let e=()=>{if(a.current)try{if(void 0===window.ezstandalone){setTimeout(e,100);return}window.ezstandalone.cmd.push(function(){window.ezstandalone.showAds(t)}),l.current=!0,console.log("[EzoicAd] ✅ Ad placement ".concat(t," initialized"))}catch(e){console.error("[EzoicAd] ❌ Failed to initialize ad placement ".concat(t,":"),e)}};e()},[t]),n&&!l.current)?(0,r.jsx)("div",{className:c().placeholder,children:(0,r.jsx)("div",{className:c().placeholderContent,children:(0,r.jsx)("span",{className:c().placeholderText,children:"Advertisement"})})}):(0,r.jsx)("div",{className:c().ezoicAd,children:(0,r.jsx)("div",{id:"ezoic-pub-ad-placeholder-".concat(t),ref:a})})}},8349:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437),o=n(7648),a=n(3145),c=n(1468),l=n.n(c);function i(){return(0,r.jsx)("footer",{className:l().footer,children:(0,r.jsxs)("div",{className:l().container,children:[(0,r.jsxs)("div",{className:l().footerGrid,children:[(0,r.jsx)(o.default,{href:"/",className:l().logoLink,children:(0,r.jsx)(a.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:111,height:60,className:l().footerLogo})}),(0,r.jsxs)("div",{className:l().footerColumn,children:[(0,r.jsx)("div",{className:l().columnTitle,children:"Product"}),(0,r.jsx)(o.default,{href:"/",className:l().footerLink,children:"Home"}),(0,r.jsx)("a",{href:"https://patreek.com/features",className:l().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Features"}),(0,r.jsx)("a",{href:"https://patreek.com/pricing",className:l().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Pricing"})]}),(0,r.jsxs)("div",{className:l().footerColumn,children:[(0,r.jsx)("div",{className:l().columnTitle,children:"Company"}),(0,r.jsx)("a",{href:"https://patreek.com/about",className:l().footerLink,target:"_blank",rel:"noopener noreferrer",children:"About"}),(0,r.jsx)("a",{href:"https://patreek.com/contact",className:l().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Contact"}),(0,r.jsx)(o.default,{href:"/privacy",className:l().footerLink,children:"Privacy Policy"}),(0,r.jsx)(o.default,{href:"/terms",className:l().footerLink,children:"Terms & Conditions"})]}),(0,r.jsxs)("div",{className:l().footerColumn,children:[(0,r.jsx)("div",{className:l().columnTitle,children:"Social"}),(0,r.jsx)("a",{href:"https://x.com/",target:"_blank",rel:"noopener noreferrer",className:l().footerLink,children:"X (Twitter)"}),(0,r.jsx)("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",className:l().footerLink,children:"Instagram"}),(0,r.jsx)("a",{href:"https://www.linkedin.com/",target:"_blank",rel:"noopener noreferrer",className:l().footerLink,children:"LinkedIn"})]})]}),(0,r.jsx)("div",{className:l().divider}),(0,r.jsxs)("div",{className:l().footerBottom,children:[(0,r.jsxs)("div",{className:l().copyright,children:["\xa9 ",new Date().getFullYear()," Patreek. All rights reserved."]}),(0,r.jsx)("div",{className:l().companyInfo,children:"Patreek App is owned by Sentigraph Inc."})]})]})})}},9116:function(e,t,n){"use strict";n.d(t,{Dk:function(){return o},ST:function(){return a},lk:function(){return c}});let r="https://api.patreek.com";async function o(){try{let e=new AbortController,t=setTimeout(()=>e.abort(),1e4),n=await fetch("".concat(r,"/api/v1/feeds/public"),{method:"GET",cache:"default",headers:{"Content-Type":"application/json",Accept:"application/json"},signal:e.signal});if(clearTimeout(t),!n.ok)return console.warn("[API] Failed to fetch public feeds: ".concat(n.status)),[];return((await n.json()).content||[]).slice(0,30)}catch(e){return e instanceof Error?"AbortError"===e.name||e.message.includes("timeout")||e.message.includes("TIMED_OUT")?console.warn("[API] Connection timeout while fetching public feeds - backend may be unavailable"):e.message.includes("Failed to fetch")||e.message.includes("ERR_CONNECTION")?console.warn("[API] Connection error while fetching public feeds - backend may be unavailable"):console.warn("[API] Error fetching public feeds:",e.message):console.warn("[API] Unknown error fetching public feeds:",e),[]}}async function a(e){try{let t=new AbortController,n=setTimeout(()=>t.abort(),1e4),o="".concat(r,"/api/v1/feeds/").concat(e);console.log("[API] Fetching article ".concat(e," from: ").concat(o));let a=await fetch(o,{method:"GET",cache:"default",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"omit",mode:"cors",signal:t.signal});if(clearTimeout(n),!a.ok){let t=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);if(404===a.status||403===a.status)return t&&console.error("[API] Safari: Article ".concat(e," returned ").concat(a.status,". Check if this is a CORS issue or if article is actually not found.")),console.warn("[API] Article ".concat(e," not found or not available (").concat(a.status,")")),null;return t&&console.error("[API] Safari: Failed to fetch feed ".concat(e,": ").concat(a.status,". Response headers:"),Object.fromEntries(a.headers.entries())),console.warn("[API] Failed to fetch feed ".concat(e,": ").concat(a.status)),null}let c=a.headers.get("content-type");c&&c.includes("application/json")||console.warn("[API] Unexpected content type: ".concat(c,". Expected application/json"));let l=await a.json();return console.log("[API] Successfully fetched article ".concat(e,":"),l.title),l}catch(t){if(t instanceof Error){let n=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);"AbortError"===t.name||t.message.includes("timeout")||t.message.includes("TIMED_OUT")?console.warn("[API] Connection timeout while fetching article ".concat(e," - backend may be unavailable")):t.message.includes("Failed to fetch")||t.message.includes("ERR_CONNECTION")||t.message.includes("NetworkError")?n?console.error("[API] Safari CORS/Network error while fetching article ".concat(e,". This might be a CORS configuration issue. Error:"),t.message):console.warn("[API] Connection error while fetching article ".concat(e," - backend may be unavailable")):t.message.includes("CORS")||t.message.includes("cross-origin")?console.error("[API] CORS error while fetching article ".concat(e,". Check backend CORS configuration. Error:"),t.message):console.warn("[API] Error fetching feed ".concat(e,":"),t.message)}else console.warn("[API] Unknown error fetching feed ".concat(e,":"),t);return null}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{let o=new AbortController,a=setTimeout(()=>o.abort(),1e4),c=await fetch("".concat(r,"/api/v1/feeds/").concat(e,"/comments?page=").concat(t,"&size=").concat(n),{method:"GET",cache:"default",headers:{"Content-Type":"application/json",Accept:"application/json"},signal:o.signal});if(clearTimeout(a),!c.ok)return console.warn("[API] Failed to fetch comments for feed ".concat(e,": ").concat(c.status)),[];return(await c.json()).content||[]}catch(t){return t instanceof Error?"AbortError"===t.name||t.message.includes("timeout")?console.warn("[API] Connection timeout while fetching comments for feed ".concat(e)):console.warn("[API] Error fetching comments for feed ".concat(e,":"),t.message):console.warn("[API] Unknown error fetching comments for feed ".concat(e,":"),t),[]}}},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}})},1402:function(e){e.exports={container:"ArticleReader_container__jO2L5",dark:"ArticleReader_dark__PbS6A",header:"ArticleReader_header__dbPzK",headerInner:"ArticleReader_headerInner__yrlm4",logoLink:"ArticleReader_logoLink__Kc5xR",logo:"ArticleReader_logo__Ffm7W",headerCenter:"ArticleReader_headerCenter__ju69k",categoryName:"ArticleReader_categoryName__DrJk6",date:"ArticleReader_date__7kari",main:"ArticleReader_main__vwq7A",article:"ArticleReader_article__XHm3G",imageWrapper:"ArticleReader_imageWrapper__NI6E9",image:"ArticleReader_image__pYNG4",title:"ArticleReader_title__0ba_F",description:"ArticleReader_description__FGiUV",content:"ArticleReader_content__KVC5g",unlockBanner:"ArticleReader_unlockBanner__4dPP0",unlockBannerContent:"ArticleReader_unlockBannerContent__xQm1Q",unlockText:"ArticleReader_unlockText__XI_xN",unlockDescription:"ArticleReader_unlockDescription__D8kgb",unlockUnderline:"ArticleReader_unlockUnderline__MRWY0",storeButtons:"ArticleReader_storeButtons__KTAzN",storeLink:"ArticleReader_storeLink__8tyrD",storeImage:"ArticleReader_storeImage__DCJpi",commentsSection:"ArticleReader_commentsSection__rqZOR",commentsTitle:"ArticleReader_commentsTitle__xw6PS",commentsLoading:"ArticleReader_commentsLoading__nu_pR",noComments:"ArticleReader_noComments__eVpLR",commentsList:"ArticleReader_commentsList__I_eEj",commentItem:"ArticleReader_commentItem__h_m06",commentHeader:"ArticleReader_commentHeader__bKesh",commentAvatar:"ArticleReader_commentAvatar___Zlwi",commentAuthorInfo:"ArticleReader_commentAuthorInfo__GWLyj",commentAuthor:"ArticleReader_commentAuthor__CQ3yY",commentDate:"ArticleReader_commentDate__eV3mx",commentBody:"ArticleReader_commentBody__SaDKq"}},9055:function(e){e.exports={ezoicAd:"EzoicAd_ezoicAd__LRHeQ",placeholder:"EzoicAd_placeholder__wTM4Z",placeholderContent:"EzoicAd_placeholderContent__qe4ho",placeholderText:"EzoicAd_placeholderText__LU62A"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",container:"Footer_container__KpDnW",footerGrid:"Footer_footerGrid__K31Dz",footerColumn:"Footer_footerColumn__kGECR",columnTitle:"Footer_columnTitle__WcnMX",footerLink:"Footer_footerLink__xz_wT",logoLink:"Footer_logoLink__Xoc6g",footerLogo:"Footer_footerLogo__4BA6d",divider:"Footer_divider__YAbaq",footerBottom:"Footer_footerBottom__YIYBj",copyright:"Footer_copyright__j4atB",companyInfo:"Footer_companyInfo__xaSgf",dark:"Footer_dark__otfV8"}}}]);