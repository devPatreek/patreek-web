(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8977],{9092:function(e,t,a){Promise.resolve().then(a.bind(a,4253))},4253:function(e,t,a){"use strict";a.d(t,{default:function(){return T}});var r=a(7437),n=a(2265),l=a(3595),o=a(8349),s=a(4482),i=a.n(s);function c(e){let{bannerUrl:t,avatarUrl:a,name:l,username:o,bio:s,joinDate:c,followersCount:d=0,followingCount:u=0,patsReceived:f=0,isFollowing:_=!1,onToggleFollow:m}=e,[h,p]=(0,n.useState)(_),[v,g]=(0,n.useState)(!1),x=async()=>{if(v)return;let e=!h;p(e),g(!0);try{await m(e)}catch(t){p(!e)}finally{g(!1)}};return(0,r.jsxs)("section",{className:i().header,children:[(0,r.jsx)("div",{className:i().banner,children:t?(0,r.jsx)("img",{src:t,alt:"".concat(l," banner")}):null}),(0,r.jsx)("div",{className:i().avatarWrapper,children:a?(0,r.jsx)("img",{src:a,alt:"".concat(l," avatar")}):(0,r.jsx)("div",{className:i().avatarFallback,children:l[0]})}),(0,r.jsxs)("div",{className:i().meta,children:[(0,r.jsxs)("div",{className:i().flexRow,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:l}),(0,r.jsxs)("p",{className:i().handle,children:["@",o]})]}),(0,r.jsx)("button",{className:"".concat(i().followBtn," ").concat(h?i().following:""),onClick:x,disabled:v,children:h?"Following":"Follow"})]}),s&&(0,r.jsx)("p",{className:i().bio,children:s}),(0,r.jsx)("div",{className:i().date,children:c?"Joined ".concat(c):"Joined recently"}),(0,r.jsxs)("div",{className:i().statsRow,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:d.toLocaleString()}),(0,r.jsx)("p",{children:"Followers"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:u.toLocaleString()}),(0,r.jsx)("p",{children:"Following"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:f.toLocaleString()}),(0,r.jsx)("p",{children:"Pats Received"})]})]})]})]})}var d=a(5323),u=a(7996),f=a(8034),_=a(2827),m=a(2558);let h=()=>{},p=h(),v=Object,g=e=>e===p,x=e=>"function"==typeof e,j=new WeakMap,b=e=>v.prototype.toString.call(e),N=(e,t)=>e===`[object ${t}]`,w=0,k=e=>{let t,a;let r=typeof e,n=b(e),l=N(n,"Date"),o=N(n,"RegExp"),s=N(n,"Object");if(v(e)!==e||l||o)t=l?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=j.get(e))return t;if(t=++w+"~",j.set(e,t),Array.isArray(e)){for(a=0,t="@";a<e.length;a++)t+=k(e[a])+",";j.set(e,t)}if(s){t="#";let r=v.keys(e).sort();for(;!g(a=r.pop());)g(e[a])||(t+=a+":"+k(e[a])+",");j.set(e,t)}}return t},y=e=>{if(x(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?k(e):"",t]},C=e=>y(e?e(0,null):null)[0],L=Promise.resolve(),P=(0,_.xD)(d.ZP,e=>(t,a,r)=>{let l;let o=(0,n.useRef)(!1),{cache:s,initialSize:i=1,revalidateAll:c=!1,persistSize:d=!1,revalidateFirstPage:_=!0,revalidateOnMount:h=!1,parallel:p=!1}=r,[,,,v]=u.b.get(u.c);try{(l=C(t))&&(l=f.U+l)}catch(e){}let[g,x,j]=(0,u.z)(s,l),b=(0,n.useCallback)(()=>(0,u.e)(g()._l)?i:g()._l,[s,l,i]);(0,m.useSyncExternalStore)((0,n.useCallback)(e=>l?j(l,()=>{e()}):()=>{},[s,l]),b,b);let N=(0,n.useCallback)(()=>{let e=g()._l;return(0,u.e)(e)?i:e},[l,i]),w=(0,n.useRef)(N());(0,u.u)(()=>{if(!o.current){o.current=!0;return}l&&x({_l:d?w.current:N()})},[l,s]);let k=h&&!o.current,y=e(l,async e=>{let n=g()._i,l=g()._r;x({_r:u.U});let o=[],i=N(),[d]=(0,u.z)(s,e),f=d().data,m=[],h=null;for(let e=0;e<i;++e){let[i,d]=(0,u.s)(t(e,p?null:h));if(!i)break;let[g,x]=(0,u.z)(s,i),j=g().data,b=c||n||(0,u.e)(j)||_&&!e&&!(0,u.e)(f)||k||f&&!(0,u.e)(f[e])&&!r.compare(f[e],j);if(a&&("function"==typeof l?l(j,d):b)){let t=async()=>{if(i in v){let e=v[i];delete v[i],j=await e}else j=await a(d);x({data:j,_k:d}),o[e]=j};p?m.push(t):await t()}else o[e]=j;p||(h=j)}return p&&await Promise.all(m.map(e=>e())),x({_i:u.U}),o},r),P=(0,n.useCallback)(function(e,t){let a="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==a.revalidate;return l?(r&&((0,u.e)(e)?x({_i:!0,_r:a.revalidate}):x({_i:!1,_r:a.revalidate})),arguments.length?y.mutate(e,{...a,revalidate:r}):y.mutate()):L},[l,s]),F=(0,n.useCallback)(e=>{let a;if(!l)return L;let[,r]=(0,u.z)(s,l);if((0,u.a)(e)?a=e(N()):"number"==typeof e&&(a=e),"number"!=typeof a)return L;r({_l:a}),w.current=a;let n=[],[o]=(0,u.z)(s,l),i=null;for(let e=0;e<a;++e){let[a]=(0,u.s)(t(e,i)),[r]=(0,u.z)(s,a),l=a?r().data:u.U;if((0,u.e)(l))return P(o().data);n.push(l),i=l}return P(n)},[l,s,P,N]);return{size:N(),setSize:F,mutate:P,get data(){return y.data},get error(){return y.error},get isValidating(){return y.isValidating},get isLoading(){return y.isLoading}}});var F=a(5561),E=a.n(F);function S(e){let{title:t,summary:a,source:l,createdAt:o,patCount:s,avatarUrl:i,isPattedByCurrentUser:c=!1}=e,[d,u]=(0,n.useState)(!!c),[f,_]=(0,n.useState)(s);(0,n.useEffect)(()=>{_(s)},[s]),(0,n.useEffect)(()=>{u(!!c)},[c]);let m=(0,n.useMemo)(()=>{let e=new Date(o);return Number.isNaN(e.getTime())?o:e.toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[o]),h=(0,n.useMemo)(()=>i?null:t.split(" ").slice(0,2).map(e=>e[0]).join("").toUpperCase(),[t,i]);return(0,r.jsxs)("article",{className:E().card,children:[(0,r.jsx)("div",{className:E().avatar,children:i?(0,r.jsx)("img",{src:i,alt:"Feed avatar",loading:"lazy"}):(0,r.jsx)("span",{children:h||"X"})}),(0,r.jsxs)("div",{className:E().content,children:[(0,r.jsxs)("div",{className:E().header,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:E().title,children:t}),a&&(0,r.jsx)("p",{className:E().summary,children:a})]}),(0,r.jsxs)("button",{className:"".concat(E().patButton," ").concat(d?E().active:""),onClick:()=>{u(e=>{let t=!e;return _(e=>Math.max(0,e+(t?1:-1))),t})},"aria-pressed":d,type:"button",children:[(0,r.jsx)("span",{className:E().emoji,children:d?"\uD83E\uDDE1":"\uD83E\uDD0D"}),(0,r.jsx)("span",{children:null!=f?f:0})]})]}),(0,r.jsxs)("div",{className:E().meta,children:[l&&(0,r.jsx)("span",{className:E().source,children:l}),(0,r.jsx)("span",{className:E().date,children:m})]})]})]})}let U=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to load feed page");return e.json()});function A(e){let{fetchUrl:t,queryKey:a}=e,{data:l,size:o,setSize:s,error:i,isValidating:c}=P((e,r)=>r&&0===r.content.length?null:[a,"".concat(t).concat(t.includes("?")?"&":"?","page=").concat(e,"&size=").concat(10)],U,{revalidateFirstPage:!1}),d=(0,n.useMemo)(()=>{var e;return null!==(e=null==l?void 0:l.flatMap(e=>(null==e?void 0:e.content)||[]))&&void 0!==e?e:[]},[l]),u=!l&&!i,f=c&&o>0,_=l&&l[l.length-1]&&l[l.length-1].content.length<10,m=(0,n.useRef)(null),h=(0,n.useRef)(null);return((0,n.useEffect)(()=>{var e;if(h.current)return null===(e=m.current)||void 0===e||e.disconnect(),m.current=new IntersectionObserver(e=>{!e[0].isIntersecting||f||_||s(e=>e+1)},{rootMargin:"200px"}),m.current.observe(h.current),()=>{var e;null===(e=m.current)||void 0===e||e.disconnect()}},[f,_,s,o]),i)?(0,r.jsx)("p",{style:{color:"#ef4444"},children:"Unable to load content."}):u?(0,r.jsx)("p",{children:"Loading stories…"}):(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[d.map(e=>{var t;return(0,r.jsx)(S,{title:e.title,summary:e.excerpt||e.body,source:e.source||e.categoryName,createdAt:e.createdAt||e.publishedAt,patCount:null!==(t=e.patCount)&&void 0!==t?t:0,avatarUrl:e.authorAvatarUrl||e.avatarUrl,isPattedByCurrentUser:e.hasPatted},e.id)}),(0,r.jsx)("div",{ref:h}),f&&(0,r.jsx)("p",{children:"Loading more…"}),_&&d.length>0&&(0,r.jsx)("p",{style:{color:"#6b7280"},children:"You’ve reached the latest posts."})]})}var D=a(7029),B=a(9799),H=a.n(B);let R=[{key:"curated",label:"Curated Feeds",endpoint:"feeds?tab=curated"},{key:"pats",label:"Pats",endpoint:"pats"},{key:"comments",label:"Comments",endpoint:"comments"}];function T(e){var t,a,s;let{params:i}=e,d=null==i?void 0:i.username,[u,f]=(0,n.useState)(null),[_,m]=(0,n.useState)(!0),[h,p]=(0,n.useState)(""),[v,g]=(0,n.useState)(R[0].key);(0,n.useEffect)(()=>{if(!d)return;let e=!1;return m(!0),p(""),(0,D.Zm)(d).then(t=>{if(!e){if(!t){p("User not found");return}f(t)}}).catch(t=>{e||(console.warn("[Profile] failed to load profile",t),p("Unable to load profile"))}).finally(()=>{e||m(!1)}),()=>{e=!0}},[d]);let x=async e=>{if(!d)throw Error("Username unavailable");if(!(await fetch("/api/v1/users/".concat(d,"/").concat(e?"follow":"unfollow"),{method:e?"POST":"DELETE",credentials:"include"})).ok)throw Error("Failed to update follow status")},j=null==u?void 0:u.bannerUrl,b=(null==u?void 0:u.createdAt)?new Date(u.createdAt).toLocaleDateString(void 0,{month:"short",year:"numeric"}):void 0,N=(0,n.useMemo)(()=>{let e=R.find(e=>e.key===v);return e&&d?"/api/v1/users/".concat(d,"/").concat(e.endpoint):""},[v,d]);return d?(0,r.jsxs)("div",{className:H().page,children:[(0,r.jsx)(l.Z,{}),(0,r.jsxs)("main",{className:H().main,children:[_&&(0,r.jsx)("div",{className:H().bannerLoading,children:"Loading profile…"}),h&&(0,r.jsx)("div",{className:H().bannerError,children:h}),!_&&u&&(0,r.jsx)(c,{bannerUrl:j,avatarUrl:u.avatarUrl,name:u.fullName||u.name||u.username||"Patreek User",username:u.username||d,bio:u.bio||u.headline,joinDate:b,followersCount:null!==(t=u.followersCount)&&void 0!==t?t:0,followingCount:null!==(a=u.followingCount)&&void 0!==a?a:0,patsReceived:null!==(s=u.totalPats)&&void 0!==s?s:0,isFollowing:u.isFollowing,onToggleFollow:x}),(0,r.jsx)("div",{className:H().tabs,children:R.map(e=>(0,r.jsx)("button",{className:"".concat(H().tab," ").concat(v===e.key?H().tabActive:""),onClick:()=>g(e.key),type:"button",children:e.label},e.key))}),N&&(0,r.jsx)("div",{className:H().feedArea,children:(0,r.jsx)(A,{fetchUrl:N,queryKey:"".concat(d,"-").concat(v)})})]}),(0,r.jsx)(o.Z,{})]}):null}},8349:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),n=a(7648),l=a(3145),o=a(1468),s=a.n(o);function i(){return(0,r.jsx)("footer",{className:s().footer,children:(0,r.jsxs)("div",{className:s().container,children:[(0,r.jsxs)("div",{className:s().footerGrid,children:[(0,r.jsx)(n.default,{href:"/",className:s().logoLink,children:(0,r.jsx)(l.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:111,height:60,className:s().footerLogo})}),(0,r.jsxs)("div",{className:s().footerColumn,children:[(0,r.jsx)("div",{className:s().columnTitle,children:"Product"}),(0,r.jsx)(n.default,{href:"/",className:s().footerLink,children:"Home"}),(0,r.jsx)("a",{href:"https://patreek.com/features",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Features"}),(0,r.jsx)("a",{href:"https://patreek.com/pricing",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Pricing"})]}),(0,r.jsxs)("div",{className:s().footerColumn,children:[(0,r.jsx)("div",{className:s().columnTitle,children:"Company"}),(0,r.jsx)("a",{href:"https://patreek.com/about",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"About"}),(0,r.jsx)("a",{href:"https://patreek.com/contact",className:s().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Contact"}),(0,r.jsx)(n.default,{href:"/privacy",className:s().footerLink,children:"Privacy Policy"}),(0,r.jsx)(n.default,{href:"/terms",className:s().footerLink,children:"Terms & Conditions"})]}),(0,r.jsxs)("div",{className:s().footerColumn,children:[(0,r.jsx)("div",{className:s().columnTitle,children:"Social"}),(0,r.jsx)("a",{href:"https://x.com/",target:"_blank",rel:"noopener noreferrer",className:s().footerLink,children:"X (Twitter)"}),(0,r.jsx)("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",className:s().footerLink,children:"Instagram"}),(0,r.jsx)("a",{href:"https://www.linkedin.com/",target:"_blank",rel:"noopener noreferrer",className:s().footerLink,children:"LinkedIn"})]})]}),(0,r.jsx)("div",{className:s().divider}),(0,r.jsxs)("div",{className:s().footerBottom,children:[(0,r.jsxs)("div",{className:s().copyright,children:["\xa9 ",new Date().getFullYear()," Patreek. All rights reserved."]}),(0,r.jsx)("div",{className:s().companyInfo,children:"Patreek App is owned by Sentigraph Inc."})]})]})})}},9799:function(e){e.exports={page:"page_page__bc9x8",main:"page_main__NKoTg",bannerLoading:"page_bannerLoading__bk8_3",bannerError:"page_bannerError__8_WKb",tabs:"page_tabs__peiXs",tab:"page_tab__uQJ_s",tabActive:"page_tabActive__LVwKc",feedArea:"page_feedArea__eeevP"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",container:"Footer_container__KpDnW",footerGrid:"Footer_footerGrid__K31Dz",footerColumn:"Footer_footerColumn__kGECR",columnTitle:"Footer_columnTitle__WcnMX",footerLink:"Footer_footerLink__xz_wT",logoLink:"Footer_logoLink__Xoc6g",footerLogo:"Footer_footerLogo__4BA6d",divider:"Footer_divider__YAbaq",footerBottom:"Footer_footerBottom__YIYBj",copyright:"Footer_copyright__j4atB",companyInfo:"Footer_companyInfo__xaSgf",dark:"Footer_dark__otfV8"}},5561:function(e){e.exports={card:"NewsCard_card__Bm9sO",avatar:"NewsCard_avatar__rgeGd",content:"NewsCard_content__ExVVW",header:"NewsCard_header__dmSwi",title:"NewsCard_title__WyhML",summary:"NewsCard_summary__EYmvD",meta:"NewsCard_meta__7xLcK",source:"NewsCard_source___WCHw",date:"NewsCard_date__tt3Qu",patButton:"NewsCard_patButton__NBU4h",emoji:"NewsCard_emoji__SUdPj",active:"NewsCard_active__yE_Gf"}},4482:function(e){e.exports={header:"ProfileHeader_header__g5kUM",banner:"ProfileHeader_banner__Edbjm",avatarWrapper:"ProfileHeader_avatarWrapper__K_duL",avatarFallback:"ProfileHeader_avatarFallback__LuCn4",meta:"ProfileHeader_meta__U5wn_",flexRow:"ProfileHeader_flexRow__JbUlk",handle:"ProfileHeader_handle__Tgfeg",bio:"ProfileHeader_bio__6Y4vv",date:"ProfileHeader_date__kQPnO",statsRow:"ProfileHeader_statsRow__g3e5L",followBtn:"ProfileHeader_followBtn__wQY_g",following:"ProfileHeader_following__4NyFh"}}},function(e){e.O(0,[3912,2972,5726,7446,7029,3595,2971,2117,1744],function(){return e(e.s=9092)}),_N_E=e.O()}]);