(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8654],{2782:function(e,a,s){Promise.resolve().then(s.bind(s,1169))},1169:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var t=s(7437),r=s(2265),o=s(9376),n=s(3595),i=s(8349),l=s(7029),c=s(306),d=s.n(c);function m(){let e=(0,o.useRouter)(),[a,s]=(0,r.useState)(!0),[c,m]=(0,r.useState)(!1),[h,_]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),[u,x]=(0,r.useState)(!1),[f,j]=(0,r.useState)(0),[N,v]=(0,r.useState)(!0),[k,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{if((await (0,l.checkSessionStatus)()).authenticated){m(!0);let e=await (0,l.getUserProfile)();_(e);let a="true"===localStorage.getItem("darkMode");y(a)}else e.replace("/registration")}catch(a){console.error("Error checking session:",a),e.replace("/registration")}finally{s(!1)}})()},[e]),(0,r.useEffect)(()=>{c&&(async()=>{x(!0);try{let e=await (0,l.t0)(f,20);0===f?p(e.content):p(a=>[...a,...e.content]),v(20===e.content.length&&f<e.totalPages-1)}catch(e){console.error("Error loading messages:",e)}finally{x(!1)}})()},[c,f]);let b=e=>{if(!e)return"";try{let a=new Date(e),s=new Date().getTime()-a.getTime(),t=Math.floor(s/6e4),r=Math.floor(s/36e5),o=Math.floor(s/864e5);if(t<1)return"now";if(t<60)return"".concat(t,"m");if(r<24)return"".concat(r,"h");if(o<7)return"".concat(o,"d");return a.toLocaleDateString()}catch(a){return e}},w=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch(a){return e}},S=e=>e?e.split(" ").map(e=>{var a;return null===(a=e[0])||void 0===a?void 0:a.toUpperCase()}).join("").slice(0,2):"U";return a?(0,t.jsxs)("div",{className:"".concat(d().page," ").concat(k?d().dark:""),children:[(0,t.jsx)(n.Z,{hasSession:!0}),(0,t.jsx)("div",{className:d().loading,children:(0,t.jsx)("p",{children:"Loading your nest..."})}),(0,t.jsx)(i.Z,{})]}):c?(0,t.jsxs)("div",{className:"".concat(d().page," ").concat(k?d().dark:""),children:[(0,t.jsx)(n.Z,{hasSession:!0}),(0,t.jsx)("main",{className:d().main,children:(0,t.jsxs)("div",{className:d().container,children:[(0,t.jsxs)("header",{className:d().header,children:[(0,t.jsx)("h1",{className:d().title,children:"Message Nest"}),(0,t.jsx)("p",{className:d().subtitle,children:"Your conversations"})]}),(0,t.jsx)("div",{className:d().messagesList,children:u&&0===g.length?(0,t.jsx)("div",{className:d().emptyState,children:(0,t.jsx)("p",{children:"Loading messages..."})}):0===g.length?(0,t.jsxs)("div",{className:d().emptyState,children:[(0,t.jsx)("p",{children:"No messages yet."}),(0,t.jsx)("p",{className:d().emptySubtext,children:"Start a conversation with someone!"})]}):g.map(e=>{let a=e.senderId===(null==h?void 0:h.id)?{name:e.recipientName,username:e.recipientUsername,id:e.recipientId}:{name:e.senderName,username:e.senderUsername,id:e.senderId};return(0,t.jsxs)("article",{className:d().messageCard,children:[(0,t.jsxs)("div",{className:d().messageHeader,children:[(0,t.jsx)("div",{className:d().messageAvatar,children:a.name?(0,t.jsx)("span",{className:d().avatarInitials,children:S(a.name)}):(0,t.jsx)("span",{className:d().avatarInitials,children:"U"})}),(0,t.jsxs)("div",{className:d().messageMeta,children:[(0,t.jsxs)("div",{className:d().messageNameRow,children:[(0,t.jsx)("span",{className:d().messageName,children:a.name||a.username||"Unknown User"}),a.username&&(0,t.jsxs)("span",{className:d().messageUsername,children:["@",a.username]}),(0,t.jsx)("span",{className:d().messageTime,children:b(e.createdAt)})]}),e.subject&&(0,t.jsx)("div",{className:d().messageSubject,children:e.subject})]}),(0,t.jsx)("div",{className:d().messageActions,children:(0,t.jsx)("button",{className:d().actionButton,"aria-label":"More options",children:(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,t.jsx)("circle",{cx:"12",cy:"5",r:"1"}),(0,t.jsx)("circle",{cx:"12",cy:"19",r:"1"})]})})})]}),(0,t.jsx)("div",{className:d().messageBody,children:(0,t.jsx)("p",{className:d().messageText,children:e.body})}),(0,t.jsxs)("div",{className:d().messageFooter,children:[(0,t.jsx)("button",{className:d().footerButton,"aria-label":"Reply",children:(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),(0,t.jsx)("path",{d:"M21 3v5h-5"}),(0,t.jsx)("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),(0,t.jsx)("path",{d:"M3 21v-5h5"})]})}),(0,t.jsx)("button",{className:d().footerButton,"aria-label":"Share",children:(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,t.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,t.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),(0,t.jsx)("button",{className:d().footerButton,"aria-label":"Bookmark",children:(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}),(0,t.jsx)("span",{className:d().messageDate,children:w(e.createdAt)})]})]},e.id)})}),N&&(0,t.jsx)("div",{className:d().loadMore,children:(0,t.jsx)("button",{className:d().loadMoreButton,onClick:()=>j(e=>e+1),disabled:u,children:u?"Loading...":"Load more"})})]})}),(0,t.jsx)(i.Z,{})]}):null}},8349:function(e,a,s){"use strict";s.d(a,{Z:function(){return l}});var t=s(7437),r=s(7648),o=s(3145),n=s(1468),i=s.n(n);function l(){return(0,t.jsx)("footer",{className:i().footer,children:(0,t.jsxs)("div",{className:i().container,children:[(0,t.jsxs)("div",{className:i().footerGrid,children:[(0,t.jsx)(r.default,{href:"/",className:i().logoLink,children:(0,t.jsx)(o.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:111,height:60,className:i().footerLogo})}),(0,t.jsxs)("div",{className:i().footerColumn,children:[(0,t.jsx)("div",{className:i().columnTitle,children:"Product"}),(0,t.jsx)(r.default,{href:"/",className:i().footerLink,children:"Home"}),(0,t.jsx)("a",{href:"https://patreek.com/features",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Features"}),(0,t.jsx)("a",{href:"https://patreek.com/pricing",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Pricing"})]}),(0,t.jsxs)("div",{className:i().footerColumn,children:[(0,t.jsx)("div",{className:i().columnTitle,children:"Company"}),(0,t.jsx)("a",{href:"https://patreek.com/about",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"About"}),(0,t.jsx)("a",{href:"https://patreek.com/contact",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Contact"}),(0,t.jsx)(r.default,{href:"/privacy",className:i().footerLink,children:"Privacy Policy"}),(0,t.jsx)(r.default,{href:"/terms",className:i().footerLink,children:"Terms & Conditions"})]}),(0,t.jsxs)("div",{className:i().footerColumn,children:[(0,t.jsx)("div",{className:i().columnTitle,children:"Social"}),(0,t.jsx)("a",{href:"https://x.com/",target:"_blank",rel:"noopener noreferrer",className:i().footerLink,children:"X (Twitter)"}),(0,t.jsx)("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",className:i().footerLink,children:"Instagram"}),(0,t.jsx)("a",{href:"https://www.linkedin.com/",target:"_blank",rel:"noopener noreferrer",className:i().footerLink,children:"LinkedIn"})]})]}),(0,t.jsx)("div",{className:i().divider}),(0,t.jsxs)("div",{className:i().footerBottom,children:[(0,t.jsxs)("div",{className:i().copyright,children:["\xa9 ",new Date().getFullYear()," Patreek. All rights reserved."]}),(0,t.jsx)("div",{className:i().companyInfo,children:"Patreek App is owned by Sentigraph Inc."})]})]})})}},306:function(e){e.exports={page:"page_page__itoSM",dark:"page_dark__Lf8Sd",main:"page_main__iS3Fz",container:"page_container__gohJh",header:"page_header__iNAxZ",title:"page_title__lixyV",subtitle:"page_subtitle__2yz2c",loading:"page_loading__rxRIz",emptyState:"page_emptyState__8KOx2",emptySubtext:"page_emptySubtext__7w0Xf",messagesList:"page_messagesList__4aKVo",messageCard:"page_messageCard__8e7fF",messageHeader:"page_messageHeader__bUeJC",messageAvatar:"page_messageAvatar__EVRYD",avatarInitials:"page_avatarInitials__7yJAM",messageMeta:"page_messageMeta__tyk1P",messageNameRow:"page_messageNameRow__2IVKE",messageName:"page_messageName__fDD3i",messageUsername:"page_messageUsername__nXD7l",messageTime:"page_messageTime__uyx0W",messageSubject:"page_messageSubject__pBP4y",messageActions:"page_messageActions__I_IvT",actionButton:"page_actionButton__lFK8p",messageBody:"page_messageBody__EJkDi",messageText:"page_messageText__lyKWq",messageFooter:"page_messageFooter__HsWe7",footerButton:"page_footerButton__ZTegW",messageDate:"page_messageDate__e_xvR",loadMore:"page_loadMore__1vdkB",loadMoreButton:"page_loadMoreButton__AzHmG"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",container:"Footer_container__KpDnW",footerGrid:"Footer_footerGrid__K31Dz",footerColumn:"Footer_footerColumn__kGECR",columnTitle:"Footer_columnTitle__WcnMX",footerLink:"Footer_footerLink__xz_wT",logoLink:"Footer_logoLink__Xoc6g",footerLogo:"Footer_footerLogo__4BA6d",divider:"Footer_divider__YAbaq",footerBottom:"Footer_footerBottom__YIYBj",copyright:"Footer_copyright__j4atB",companyInfo:"Footer_companyInfo__xaSgf",dark:"Footer_dark__otfV8"}}},function(e){e.O(0,[2210,2972,5726,7029,3595,2971,2117,1744],function(){return e(e.s=2782)}),_N_E=e.O()}]);