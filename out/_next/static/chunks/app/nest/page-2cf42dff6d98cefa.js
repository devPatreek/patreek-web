(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8654],{2782:function(e,t,a){Promise.resolve().then(a.bind(a,1169))},1169:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(7437),s=a(2265),n=a(9376),o=a(3595),i=a(8349),c=a(7029),l=a(306),d=a.n(l);function m(){let e=(0,n.useRouter)(),[t,a]=(0,s.useState)(!0),[l,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[g,f]=(0,s.useState)([]),[_,p]=(0,s.useState)(!1),[x,j]=(0,s.useState)(0),[v,N]=(0,s.useState)(!0),[y,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{if((await (0,c.checkSessionStatus)()).authenticated){m(!0);let e=await (0,c.getUserProfile)();h(e);let t="true"===localStorage.getItem("darkMode");k(t)}else e.replace("/registration")}catch(t){console.error("Error checking session:",t),e.replace("/registration")}finally{a(!1)}})()},[e]),(0,s.useEffect)(()=>{l&&(async()=>{p(!0);try{let e=await (0,c.t0)(x,20);0===x?f(e.content):f(t=>[...t,...e.content]),N(20===e.content.length&&x<e.totalPages-1)}catch(e){console.error("Error loading messages:",e)}finally{p(!1)}})()},[l,x]);let b=e=>{if(!e)return"";try{let t=new Date(e),a=new Date().getTime()-t.getTime(),r=Math.floor(a/6e4),s=Math.floor(a/36e5),n=Math.floor(a/864e5);if(r<1)return"now";if(r<60)return"".concat(r,"m");if(s<24)return"".concat(s,"h");if(n<7)return"".concat(n,"d");return t.toLocaleDateString()}catch(t){return e}},w=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},L=e=>e?e.split(" ").map(e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toUpperCase()}).join("").slice(0,2):"U";return t?(0,r.jsxs)("div",{className:"".concat(d().page," ").concat(y?d().dark:""),children:[(0,r.jsx)(o.Z,{hasSession:!0}),(0,r.jsx)("div",{className:d().loading,children:(0,r.jsx)("p",{children:"Loading your nest..."})}),(0,r.jsx)(i.Z,{})]}):l?(0,r.jsxs)("div",{className:"".concat(d().page," ").concat(y?d().dark:""),children:[(0,r.jsx)(o.Z,{hasSession:!0}),(0,r.jsx)("main",{className:d().main,children:(0,r.jsxs)("div",{className:d().container,children:[(0,r.jsxs)("header",{className:d().header,children:[(0,r.jsx)("h1",{className:d().title,children:"Message Nest"}),(0,r.jsx)("p",{className:d().subtitle,children:"Your conversations"})]}),(0,r.jsx)("div",{className:d().messagesList,children:_&&0===g.length?(0,r.jsx)("div",{className:d().emptyState,children:(0,r.jsx)("p",{children:"Loading messages..."})}):0===g.length?(0,r.jsxs)("div",{className:d().emptyState,children:[(0,r.jsx)("p",{children:"No messages yet."}),(0,r.jsx)("p",{className:d().emptySubtext,children:"Start a conversation with someone!"})]}):g.map(e=>{let t=e.senderId===(null==u?void 0:u.id)?{name:e.recipientName,username:e.recipientUsername,id:e.recipientId}:{name:e.senderName,username:e.senderUsername,id:e.senderId};return(0,r.jsxs)("article",{className:d().messageCard,children:[(0,r.jsxs)("div",{className:d().messageHeader,children:[(0,r.jsx)("div",{className:d().messageAvatar,children:t.name?(0,r.jsx)("span",{className:d().avatarInitials,children:L(t.name)}):(0,r.jsx)("span",{className:d().avatarInitials,children:"U"})}),(0,r.jsxs)("div",{className:d().messageMeta,children:[(0,r.jsxs)("div",{className:d().messageNameRow,children:[(0,r.jsx)("span",{className:d().messageName,children:t.name||t.username||"Unknown User"}),t.username&&(0,r.jsxs)("span",{className:d().messageUsername,children:["@",t.username]}),(0,r.jsx)("span",{className:d().messageTime,children:b(e.createdAt)})]}),e.subject&&(0,r.jsx)("div",{className:d().messageSubject,children:e.subject})]}),(0,r.jsx)("div",{className:d().messageActions,children:(0,r.jsx)("button",{className:d().actionButton,"aria-label":"More options",children:(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,r.jsx)("circle",{cx:"12",cy:"5",r:"1"}),(0,r.jsx)("circle",{cx:"12",cy:"19",r:"1"})]})})})]}),(0,r.jsx)("div",{className:d().messageBody,children:(0,r.jsx)("p",{className:d().messageText,children:e.body})}),(0,r.jsxs)("div",{className:d().messageFooter,children:[(0,r.jsx)("button",{className:d().footerButton,"aria-label":"Reply",children:(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),(0,r.jsx)("path",{d:"M21 3v5h-5"}),(0,r.jsx)("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),(0,r.jsx)("path",{d:"M3 21v-5h5"})]})}),(0,r.jsx)("button",{className:d().footerButton,"aria-label":"Share",children:(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,r.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,r.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),(0,r.jsx)("button",{className:d().footerButton,"aria-label":"Bookmark",children:(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}),(0,r.jsx)("span",{className:d().messageDate,children:w(e.createdAt)})]})]},e.id)})}),v&&(0,r.jsx)("div",{className:d().loadMore,children:(0,r.jsx)("button",{className:d().loadMoreButton,onClick:()=>j(e=>e+1),disabled:_,children:_?"Loading...":"Load more"})})]})}),(0,r.jsx)(i.Z,{})]}):null}},8349:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(7437),s=a(7648),n=a(3145),o=a(1468),i=a.n(o);function c(){return(0,r.jsx)("footer",{className:i().footer,children:(0,r.jsxs)("div",{className:i().container,children:[(0,r.jsxs)("div",{className:i().footerGrid,children:[(0,r.jsx)(s.default,{href:"/",className:i().logoLink,children:(0,r.jsx)(n.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:111,height:60,className:i().footerLogo})}),(0,r.jsxs)("div",{className:i().footerColumn,children:[(0,r.jsx)("div",{className:i().columnTitle,children:"Product"}),(0,r.jsx)(s.default,{href:"/",className:i().footerLink,children:"Home"}),(0,r.jsx)("a",{href:"https://patreek.com/features",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Features"}),(0,r.jsx)("a",{href:"https://patreek.com/pricing",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Pricing"})]}),(0,r.jsxs)("div",{className:i().footerColumn,children:[(0,r.jsx)("div",{className:i().columnTitle,children:"Company"}),(0,r.jsx)("a",{href:"https://patreek.com/about",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"About"}),(0,r.jsx)("a",{href:"https://patreek.com/contact",className:i().footerLink,target:"_blank",rel:"noopener noreferrer",children:"Contact"}),(0,r.jsx)(s.default,{href:"/privacy",className:i().footerLink,children:"Privacy Policy"}),(0,r.jsx)(s.default,{href:"/terms",className:i().footerLink,children:"Terms & Conditions"})]}),(0,r.jsxs)("div",{className:i().footerColumn,children:[(0,r.jsx)("div",{className:i().columnTitle,children:"Social"}),(0,r.jsx)("a",{href:"https://x.com/",target:"_blank",rel:"noopener noreferrer",className:i().footerLink,children:"X (Twitter)"}),(0,r.jsx)("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",className:i().footerLink,children:"Instagram"}),(0,r.jsx)("a",{href:"https://www.linkedin.com/",target:"_blank",rel:"noopener noreferrer",className:i().footerLink,children:"LinkedIn"})]})]}),(0,r.jsx)("div",{className:i().divider}),(0,r.jsxs)("div",{className:i().footerBottom,children:[(0,r.jsxs)("div",{className:i().copyright,children:["\xa9 ",new Date().getFullYear()," Patreek. All rights reserved."]}),(0,r.jsx)("div",{className:i().companyInfo,children:"Patreek App is owned by Sentigraph Inc."})]})]})})}},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,t,a){"use strict";var r,s;e.exports=(null==(r=a.g.process)?void 0:r.env)&&"object"==typeof(null==(s=a.g.process)?void 0:s.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,r,s=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var c=[],l=!1,d=-1;function m(){l&&r&&(l=!1,r.length?c=r.concat(c):d=-1,c.length&&u())}function u(){if(!l){var e=i(m);l=!0;for(var t=c.length;t;){for(r=c,c=[];++d<t;)r&&r[d].run();d=-1,t=c.length}r=null,l=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new h(e,t)),1!==c.length||l||i(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},a={};function r(e){var s=a[e];if(void 0!==s)return s.exports;var n=a[e]={exports:{}},o=!0;try{t[e](n,n.exports,r),o=!1}finally{o&&delete a[e]}return n.exports}r.ab="//";var s=r(229);e.exports=s}()},306:function(e){e.exports={page:"page_page__itoSM",dark:"page_dark__Lf8Sd",main:"page_main__iS3Fz",container:"page_container__gohJh",header:"page_header__iNAxZ",title:"page_title__lixyV",subtitle:"page_subtitle__2yz2c",loading:"page_loading__rxRIz",emptyState:"page_emptyState__8KOx2",emptySubtext:"page_emptySubtext__7w0Xf",messagesList:"page_messagesList__4aKVo",messageCard:"page_messageCard__8e7fF",messageHeader:"page_messageHeader__bUeJC",messageAvatar:"page_messageAvatar__EVRYD",avatarInitials:"page_avatarInitials__7yJAM",messageMeta:"page_messageMeta__tyk1P",messageNameRow:"page_messageNameRow__2IVKE",messageName:"page_messageName__fDD3i",messageUsername:"page_messageUsername__nXD7l",messageTime:"page_messageTime__uyx0W",messageSubject:"page_messageSubject__pBP4y",messageActions:"page_messageActions__I_IvT",actionButton:"page_actionButton__lFK8p",messageBody:"page_messageBody__EJkDi",messageText:"page_messageText__lyKWq",messageFooter:"page_messageFooter__HsWe7",footerButton:"page_footerButton__ZTegW",messageDate:"page_messageDate__e_xvR",loadMore:"page_loadMore__1vdkB",loadMoreButton:"page_loadMoreButton__AzHmG"}},1468:function(e){e.exports={footer:"Footer_footer__pQtti",container:"Footer_container__KpDnW",footerGrid:"Footer_footerGrid__K31Dz",footerColumn:"Footer_footerColumn__kGECR",columnTitle:"Footer_columnTitle__WcnMX",footerLink:"Footer_footerLink__xz_wT",logoLink:"Footer_logoLink__Xoc6g",footerLogo:"Footer_footerLogo__4BA6d",divider:"Footer_divider__YAbaq",footerBottom:"Footer_footerBottom__YIYBj",copyright:"Footer_copyright__j4atB",companyInfo:"Footer_companyInfo__xaSgf",dark:"Footer_dark__otfV8"}}},function(e){e.O(0,[3370,2972,5726,7029,3595,2971,2117,1744],function(){return e(e.s=2782)}),_N_E=e.O()}]);