(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{2705:function(e,t,a){Promise.resolve().then(a.bind(a,4440))},4440:function(e,t,a){"use strict";a.d(t,{default:function(){return _}});var r=a(7437),n=a(2265),c=a(5475),l=a(9116);let i="patreek_article_";function o(){try{let e=Date.now(),t=[];for(let a=0;a<localStorage.length;a++){let r=localStorage.key(a);if(null==r?void 0:r.startsWith(i))try{let a=localStorage.getItem(r);if(a){let n=JSON.parse(a);e-n.timestamp>6048e5&&t.push(r)}}catch(e){t.push(r)}}t.forEach(e=>localStorage.removeItem(e))}catch(e){console.error("Error clearing expired cache:",e)}}o();var s=a(7648),d=a(3145),u=a(1402),h=a.n(u),m=a(7398),f=a.n(m);function g(e){var t;let{article:a}=e,[c,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");l(e.matches);let t=e=>l(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);let i=(t=a.createdAt,f()(t).isSame(f()(),"day"))?"Today in":f()(a.createdAt).format("MMM DD");return(0,r.jsxs)("div",{className:"".concat(h().container," ").concat(c?h().dark:""),children:[(0,r.jsx)("header",{className:h().header,children:(0,r.jsxs)("div",{className:h().headerInner,children:[(0,r.jsx)(s.default,{href:"/",className:h().logoLink,children:(0,r.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:50,height:50,className:h().logo})}),(0,r.jsxs)("div",{className:h().headerCenter,children:[(0,r.jsx)("h1",{className:h().categoryName,children:a.categoryName}),(0,r.jsx)("p",{className:h().date,children:i})]})]})}),(0,r.jsx)("main",{className:h().main,children:(0,r.jsxs)("article",{className:h().article,children:[a.imageUrl&&(0,r.jsx)("div",{className:h().imageWrapper,children:(0,r.jsx)("img",{src:a.imageUrl,alt:a.title,className:h().image})}),(0,r.jsx)("h1",{className:h().title,children:a.title}),a.description&&(0,r.jsx)("p",{className:h().description,children:a.description}),(0,r.jsx)("div",{className:h().content,dangerouslySetInnerHTML:{__html:a.content}}),(0,r.jsx)("div",{className:h().unlockBanner,children:(0,r.jsxs)("div",{className:h().unlockBannerContent,children:[(0,r.jsx)("p",{className:h().unlockText,children:"UNLOCK YOUR NEWS FEED"}),(0,r.jsxs)("p",{className:h().unlockDescription,children:["Register to get the latest updates from the topics"," ",(0,r.jsx)("span",{className:h().unlockUnderline,children:"you"})," care about"]}),(0,r.jsxs)("div",{className:h().storeButtons,children:[(0,r.jsx)("a",{href:"https://apps.apple.com/us/app/patreek/id6547858283",target:"_blank",rel:"noopener noreferrer",className:h().storeLink,children:(0,r.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/67a3729b558347b9bf210a5a_Store%3DApp%20Store%2C%20Type%3DDark%2C%20Language%3DEnglish%402x.png",alt:"Download on App Store",width:200,height:60,className:h().storeImage})}),(0,r.jsx)("a",{href:"#",className:h().storeLink,children:(0,r.jsx)(d.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/67a3727c8abb3515ab42d712_Store%3DGoogle%20Play%2C%20Type%3DDark%2C%20Language%3DEnglish%402x.png",alt:"Get it on Google Play",width:200,height:60,className:h().storeImage})})]})]})})]})})]})}function _(){let e=(0,c.usePathname)(),[t,a]=(0,n.useState)(null),[s,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);return((0,n.useEffect)(()=>{async function t(){let t=null==e?void 0:e.match(/\/article\/(\d+)/);if(!t){h("Invalid article ID"),d(!1);return}let r=parseInt(t[1],10);if(isNaN(r)||r<=0){h("Invalid article ID"),d(!1);return}try{d(!0);let e=function(e){try{let t="".concat(i).concat(e),a=localStorage.getItem(t);if(!a)return null;let r=JSON.parse(a);if(Date.now()-r.timestamp>6048e5)return localStorage.removeItem(t),null;return r.data}catch(e){return console.error("Error reading from cache:",e),null}}(r);if(e){console.log("[ArticlePage] Using cached article ".concat(r)),a(e),h(null),d(!1);return}console.log("[ArticlePage] Fetching article ".concat(r," from API"));let t=await (0,l.S)(r);t?(function(e,t){let a="".concat(i).concat(e),r={data:t,timestamp:Date.now()};try{localStorage.setItem(a,JSON.stringify(r))}catch(e){if(console.error("Error writing to cache:",e),e instanceof DOMException&&"QuotaExceededError"===e.name){o();try{localStorage.setItem(a,JSON.stringify(r))}catch(e){console.error("Failed to cache after cleanup:",e)}}}}(r,t),a(t),h(null)):h("Article not found or not available")}catch(e){console.error("Failed to load article:",e),h("Failed to load article. Please try again later.")}finally{d(!1)}}e&&t()},[e]),s)?(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333"},children:(0,r.jsx)("p",{children:"Loading article..."})}):u||!t?(0,r.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333",padding:"20px"},children:[(0,r.jsx)("p",{children:u||"Article not found"}),(0,r.jsx)("a",{href:"/",style:{marginTop:"16px",color:"#667eea",textDecoration:"underline"},children:"â† Back to Home"})]}):(0,r.jsx)(g,{article:t})}},9116:function(e,t,a){"use strict";a.d(t,{D:function(){return n},S:function(){return c}});let r="https://patreekbackend-env.eba-ifvfvi7q.us-east-1.elasticbeanstalk.com";async function n(){try{let e=new AbortController,t=setTimeout(()=>e.abort(),1e4),a=await fetch("".concat(r,"/api/v1/feeds/public"),{cache:"default",headers:{"Cache-Control":"public, max-age=3600"},signal:e.signal});if(clearTimeout(t),!a.ok)return console.warn("[API] Failed to fetch public feeds: ".concat(a.status)),[];return((await a.json()).content||[]).slice(0,30)}catch(e){return e instanceof Error?"AbortError"===e.name||e.message.includes("timeout")||e.message.includes("TIMED_OUT")?console.warn("[API] Connection timeout while fetching public feeds - backend may be unavailable"):e.message.includes("Failed to fetch")||e.message.includes("ERR_CONNECTION")?console.warn("[API] Connection error while fetching public feeds - backend may be unavailable"):console.warn("[API] Error fetching public feeds:",e.message):console.warn("[API] Unknown error fetching public feeds:",e),[]}}async function c(e){try{let t=new AbortController,a=setTimeout(()=>t.abort(),1e4),n=await fetch("".concat(r,"/api/v1/feeds/public/").concat(e),{cache:"default",headers:{"Cache-Control":"public, max-age=604800"},signal:t.signal});if(clearTimeout(a),!n.ok){if(404===n.status||403===n.status)return null;return console.warn("[API] Failed to fetch public feed ".concat(e,": ").concat(n.status)),null}return await n.json()}catch(t){return t instanceof Error?"AbortError"===t.name||t.message.includes("timeout")||t.message.includes("TIMED_OUT")?console.warn("[API] Connection timeout while fetching article ".concat(e," - backend may be unavailable")):t.message.includes("Failed to fetch")||t.message.includes("ERR_CONNECTION")?console.warn("[API] Connection error while fetching article ".concat(e," - backend may be unavailable")):console.warn("[API] Error fetching public feed ".concat(e,":"),t.message):console.warn("[API] Unknown error fetching public feed ".concat(e,":"),t),null}}},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var r=a(2972),n=a.n(r)},1402:function(e){e.exports={container:"ArticleReader_container__jO2L5",dark:"ArticleReader_dark__PbS6A",header:"ArticleReader_header__dbPzK",headerInner:"ArticleReader_headerInner__yrlm4",logoLink:"ArticleReader_logoLink__Kc5xR",logo:"ArticleReader_logo__Ffm7W",headerCenter:"ArticleReader_headerCenter__ju69k",categoryName:"ArticleReader_categoryName__DrJk6",date:"ArticleReader_date__7kari",main:"ArticleReader_main__vwq7A",article:"ArticleReader_article__XHm3G",imageWrapper:"ArticleReader_imageWrapper__NI6E9",image:"ArticleReader_image__pYNG4",title:"ArticleReader_title__0ba_F",description:"ArticleReader_description__FGiUV",content:"ArticleReader_content__KVC5g",unlockBanner:"ArticleReader_unlockBanner__4dPP0",unlockBannerContent:"ArticleReader_unlockBannerContent__xQm1Q",unlockText:"ArticleReader_unlockText__XI_xN",unlockDescription:"ArticleReader_unlockDescription__D8kgb",unlockUnderline:"ArticleReader_unlockUnderline__MRWY0",storeButtons:"ArticleReader_storeButtons__KTAzN",storeLink:"ArticleReader_storeLink__8tyrD",storeImage:"ArticleReader_storeImage__DCJpi"}}},function(e){e.O(0,[872,990,972,145,971,117,744],function(){return e(e.s=2705)}),_N_E=e.O()}]);