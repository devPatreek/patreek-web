(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2363],{4669:function(e,s,a){Promise.resolve().then(a.bind(a,878))},878:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(7437),n=a(2265),r=a(7648),l=a(9376),i=a(3595),c=a(556),o=a.n(c);function u(){let e=(0,l.useSearchParams)(),s=(0,l.useRouter)(),[a,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),[p,_]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1),[f,g]=(0,n.useState)(""),[x,b]=(0,n.useState)("");(0,n.useEffect)(()=>{c((null==e?void 0:e.get("token"))||"")},[e]);let w=async e=>{if(e.preventDefault(),b(""),g(""),!a){b("Reset link is missing or invalid.");return}if(u.length<8){b("Password must be at least 8 characters.");return}if(u!==p){b("Passwords do not match.");return}m(!0);try{let e=await fetch("/api/v1/auth/reset-confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,newPassword:u})});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error((null==s?void 0:s.message)||"Unable to reset password. The link may have expired.")}g("Password updated successfully. You can sign in with your new password."),setTimeout(()=>s.push("/registration"),1200)}catch(e){b((null==e?void 0:e.message)||"Unable to reset password. The link may have expired.")}finally{m(!1)}};return(0,t.jsxs)("div",{className:o().page,children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)("div",{className:o().content,children:(0,t.jsxs)("div",{className:o().card,children:[(0,t.jsx)("h1",{className:o().title,children:"Set a new password"}),(0,t.jsx)("p",{className:o().subtitle,children:"Create a strong password to secure your account."}),(0,t.jsxs)("form",{className:o().form,onSubmit:w,children:[(0,t.jsxs)("label",{className:o().label,children:["New password",(0,t.jsx)("input",{className:o().input,type:"password",value:u,onChange:e=>d(e.target.value),placeholder:"••••••••",required:!0})]}),(0,t.jsxs)("label",{className:o().label,children:["Confirm password",(0,t.jsx)("input",{className:o().input,type:"password",value:p,onChange:e=>_(e.target.value),placeholder:"••••••••",required:!0})]}),(0,t.jsx)("button",{className:o().button,type:"submit",disabled:h,children:h?"Saving...":"Update password"})]}),f&&(0,t.jsx)("div",{className:"".concat(o().card," ").concat(o().success),children:f}),x&&(0,t.jsx)("div",{className:"".concat(o().card," ").concat(o().error),children:x}),(0,t.jsxs)("p",{className:o().note,children:["Done? ",(0,t.jsx)(r.default,{className:o().link,href:"/registration",children:"Go to sign in"})]})]})})]})}function d(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsxs)("div",{className:o().page,children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)("div",{className:o().content,children:"Loading..."})]}),children:(0,t.jsx)(u,{})})}},556:function(e){e.exports={page:"page_page__p5qk2",content:"page_content__fmxWV",card:"page_card__fxLP0",title:"page_title__N9kyP",subtitle:"page_subtitle__ID5_S",form:"page_form__tzXkl",label:"page_label__nPczt",input:"page_input__Ovt1H",button:"page_button__MzskL",success:"page_success__UrA_4",error:"page_error__bc4wz",note:"page_note__d2ZVQ",link:"page_link__5fTrq"}}},function(e){e.O(0,[4103,2972,5726,7029,3595,2971,2117,1744],function(){return e(e.s=4669)}),_N_E=e.O()}]);