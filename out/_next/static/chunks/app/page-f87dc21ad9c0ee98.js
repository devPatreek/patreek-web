(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6995:function(e,t,a){Promise.resolve().then(a.bind(a,3360))},4038:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var l=a(7437),s=a(2265),i=a(9376),n=a(9116),o=a(4422),r=a(5148);function c(){let e=(0,i.usePathname)(),[t,a]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async function(){let t=null;{let e=window.location.pathname,a=e.match(/\/article\/(\d+)/);if(a&&(t=parseInt(a[1],10),console.log("[ArticlePage] Extracted article ID from window.location.pathname: ".concat(t," (path: ").concat(e,")"))),!t){let e=window.location.href.match(/\/article\/(\d+)/);e&&(t=parseInt(e[1],10),console.log("[ArticlePage] Extracted article ID from window.location.href: ".concat(t)))}}if(!t&&e){let a=e.match(/\/article\/(\d+)/);a&&(t=parseInt(a[1],10),console.log("[ArticlePage] Extracted article ID from pathname: ".concat(t)))}if(!t||isNaN(t)||t<=0){console.error("[ArticlePage] Invalid article ID:",{articleId:t,pathname:e,windowPathname:window.location.pathname,windowHref:window.location.href,userAgent:window.navigator.userAgent}),h("Invalid article ID"),d(!1);return}try{d(!0),console.log("[ArticlePage] Loading article ".concat(t,"..."));let e=(0,o.A)(t);if(e){console.log("[ArticlePage] Using cached article ".concat(t)),a(e),h(null),d(!1);return}console.log("[ArticlePage] Fetching article ".concat(t," from API"));let l=await (0,n.ST)(t);if(!l){let e=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);console.log("[ArticlePage] Article ".concat(t," not found or not public (returned null). Safari: ").concat(e)),e&&console.warn("[ArticlePage] Safari detected - this might be a CORS or fetch issue. Check network tab."),h("Article not found or not available"),setTimeout(()=>{window.location.href="https://patreek.com/public/pats/"},2e3);return}(0,o.t)(t,l),a(l),h(null),console.log("[ArticlePage] Successfully loaded article ".concat(t,": ").concat(l.title))}catch(e){console.error("[ArticlePage] Failed to load article:",e),h("Failed to load article. Please try again later.")}finally{d(!1)}})()},[e]),c)?(0,l.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333"},children:(0,l.jsx)("p",{children:"Loading article..."})}):u||!t?(0,l.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#333",padding:"20px"},children:[(0,l.jsx)("p",{children:u||"Article not found"}),(0,l.jsx)("a",{href:"/",style:{marginTop:"16px",color:"#667eea",textDecoration:"underline"},children:"← Back to Home"})]}):(0,l.jsx)(r.Z,{article:t})}},3360:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var l=a(7437),s=a(2265),i=a(9376),n=a(9116),o=a(6777),r=a.n(o),c=a(3145),d=a(4038),u=a(8349),h=a(7715),m=a.n(h);function p(e){let{open:t,onClose:a,onSuccess:i}=e,[o,r]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,g]=(0,s.useState)([]),[f,x]=(0,s.useState)([]),[j,_]=(0,s.useState)(!1),[N,y]=(0,s.useState)(!1),[S,b]=(0,s.useState)({type:"idle"});if((0,s.useEffect)(()=>{if(!t)return;let e=!0;return _(!0),(0,n.CP)().then(t=>{e&&g(t||[])}).finally(()=>{e&&_(!1)}),()=>{e=!1}},[t]),(0,s.useEffect)(()=>{t||(b({type:"idle"}),y(!1))},[t]),!t)return null;let w=f.length<5,v=e=>{f.includes(e)?x(f.filter(t=>t!==e)):w&&x([...f,e])},C=async e=>{if(e.preventDefault(),!o.trim()||!c.trim()||!u.trim()){b({type:"error",message:"Please fill in name, email, and password."});return}if(0===f.length){b({type:"error",message:"Pick at least one category (up to 5)."});return}y(!0),b({type:"idle"});let t={name:o.trim(),email:c.trim(),password:u,categoryIds:f};try{await (0,n.a$)(t),b({type:"success",message:"Account created! Redirecting…"}),null==i||i()}catch(e){b({type:"error",message:e instanceof Error?e.message:"Unable to sign up right now. Please try again."})}finally{y(!1)}},P=e=>{let t=window.location.origin+"/",a=(0,n.Bu)(e,t);window.location.href=a},k=(0,s.useMemo)(()=>j?(0,l.jsx)("div",{className:m().muted,children:"Loading categories…"}):p.length?(0,l.jsx)("div",{className:m().categoryGrid,children:p.map(e=>{let t=f.includes(e.id),a=!t&&!w;return(0,l.jsx)("button",{type:"button",className:[m().chip,t?m().chipSelected:"",a?m().chipDisabled:""].join(" "),onClick:()=>v(e.id),disabled:a,"aria-pressed":t,children:e.name},e.id)})}):(0,l.jsx)("div",{className:m().muted,children:"Categories will load here once available."}),[p,f,w,j]);return(0,l.jsx)("div",{className:m().backdrop,role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:m().modal,children:[(0,l.jsx)("div",{className:m().side,children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:m().sideTitle,children:"Personalized pats in minutes."}),(0,l.jsx)("p",{className:m().sideText,children:"Sign up, choose up to 5 categories, and we'll build your lane of headlines—just like the mobile experience."}),(0,l.jsxs)("ul",{className:m().sideList,children:[(0,l.jsx)("li",{className:m().sideListItem,children:"⚡ Instant access"}),(0,l.jsx)("li",{className:m().sideListItem,children:"\uD83D\uDCF1 Mirror mobile onboarding"}),(0,l.jsx)("li",{className:m().sideListItem,children:"\uD83C\uDFAF Curated by your picks"})]})]})}),(0,l.jsxs)("div",{className:m().main,children:[(0,l.jsxs)("div",{className:m().header,children:[(0,l.jsx)("h2",{className:m().title,children:"Create your Patreek account"}),(0,l.jsx)("button",{className:m().closeButton,"aria-label":"Close signup",onClick:a,children:"\xd7"})]}),(0,l.jsxs)("form",{className:m().form,onSubmit:C,children:[(0,l.jsxs)("div",{className:m().fieldGroup,children:[(0,l.jsx)("label",{className:m().label,htmlFor:"name",children:"Full name"}),(0,l.jsx)("input",{id:"name",className:m().input,value:o,onChange:e=>r(e.target.value),placeholder:"Jane Doe",autoComplete:"name"})]}),(0,l.jsxs)("div",{className:m().fieldGroup,children:[(0,l.jsx)("label",{className:m().label,htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{id:"email",className:m().input,value:c,onChange:e=>d(e.target.value),placeholder:"you@example.com",autoComplete:"email",type:"email"})]}),(0,l.jsxs)("div",{className:m().fieldGroup,children:[(0,l.jsx)("label",{className:m().label,htmlFor:"password",children:"Password"}),(0,l.jsx)("input",{id:"password",className:m().input,value:u,onChange:e=>h(e.target.value),placeholder:"••••••••",type:"password",autoComplete:"new-password"})]}),(0,l.jsxs)("div",{className:m().fieldGroup,children:[(0,l.jsx)("div",{className:m().label,children:"Pick up to 5 categories"}),(0,l.jsx)("div",{className:m().categories,children:k}),(0,l.jsxs)("div",{className:m().muted,children:[f.length," / 5 selected"]})]}),"success"===S.type&&(0,l.jsx)("div",{className:m().status,children:S.message}),"error"===S.type&&(0,l.jsx)("div",{className:"".concat(m().status," ").concat(m().error),children:S.message}),(0,l.jsxs)("div",{className:m().actions,children:[(0,l.jsx)("button",{type:"submit",className:m().primaryButton,disabled:N,children:N?"Signing you up…":"Sign up"}),(0,l.jsx)("button",{type:"button",className:m().secondaryButton,onClick:()=>P("google"),children:"Continue with Google"}),(0,l.jsx)("button",{type:"button",className:m().secondaryButton,onClick:()=>P("apple"),children:"Continue with Apple"})]})]})]})]})})}var g=a(5857);function f(){let e=(0,i.usePathname)(),[t,a]=(0,s.useState)(!1),[n,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{a(!0);{let e=window.location.pathname;o(e),console.log("[RootPage] Initial path detected:",e)}},[]),(0,s.useEffect)(()=>{if(t){let e=window.location.pathname;o(e),console.log("[RootPage] Path updated:",e)}},[e,t]);let r=(()=>{let t=window.location.pathname;return t&&/^\/article\/\d+/.test(t)?(console.log("[RootPage] Article route detected from window.location:",t),!0):!!(e&&/^\/article\/\d+/.test(e))&&(console.log("[RootPage] Article route detected from pathname:",e),!0)})();return(console.log("[RootPage] Rendering - mounted:",t,"isArticleRoute:",r,"pathname:",e,"actualPath:",n),r)?(0,l.jsx)(d.default,{}):(0,l.jsx)(x,{})}function x(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[h,m]=(0,s.useState)(null),[f,x]=(0,s.useState)(!1),j=(0,s.useRef)(null),[_,N]=(0,s.useState)(!1),[y,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{!async function(){try{d(!0),m(null);let e=await (0,n.Dk)();a(e)}catch(e){console.warn("[HomePage] Failed to load feeds:",e),a([])}finally{d(!1)}}()},[]);let b=(0,s.useMemo)(()=>{let e=new Map;return t.forEach(t=>{let a=t.categoryName||"Other",l=e.get(a)||[];l.push(t),e.set(a,l)}),Array.from(e.entries()).map(e=>{let[t,a]=e;return{category:t,items:[...a].sort((e,t)=>{let a=e.createdAt?new Date(e.createdAt).getTime():0;return(t.createdAt?new Date(t.createdAt).getTime():0)-a})}})},[t]),w=g.default,v=e=>g[e]||w,C=t=>{e.push("/public/pats/".concat(t))},P=()=>{let e=j.current;if(!e)return;let{scrollLeft:t,clientWidth:a,scrollWidth:l}=e;N(t>8),S(t+a<l-8)};(0,s.useEffect)(()=>{P();let e=j.current;if(!e)return;let t=()=>P();return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[b.length]);let k=e=>{let t=j.current;if(!t)return;let a=t.querySelector(".".concat(r().categoryCard)),l=a?a.offsetWidth+16:320;t.scrollBy({left:"left"===e?-l:l,behavior:"smooth"})};return(0,l.jsxs)("div",{className:r().container,children:[(0,l.jsx)(p,{open:f,onClose:()=>x(!1),onSuccess:()=>x(!1)}),(0,l.jsx)("header",{className:r().header,children:(0,l.jsxs)("div",{className:r().headerInner,children:[(0,l.jsx)("div",{className:r().logoSection,children:(0,l.jsx)(c.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:60,height:60,className:r().logo,priority:!0})}),(0,l.jsxs)("div",{className:r().headerTitle,children:[(0,l.jsx)("h2",{className:r().title,children:"Latest pats by category"}),(0,l.jsx)("p",{className:r().subtitle,children:"Compact lanes of what's trending now"})]})]})}),(0,l.jsxs)("div",{className:r().signupBanner,children:[(0,l.jsxs)("div",{className:r().signupBannerText,children:[(0,l.jsx)("p",{className:r().signupHeadline,children:"Sign up to get personalized pats specially curated for you!"}),(0,l.jsx)("p",{className:r().signupSubhead,children:"Mirror the mobile experience with category picks, SSO, and your own timeline."})]}),(0,l.jsx)("button",{className:r().signupButton,onClick:()=>x(!0),children:"Sign Up"})]}),(0,l.jsx)("main",{className:r().main,children:o?(0,l.jsx)("div",{className:r().loadingState,children:(0,l.jsx)("p",{children:"Loading articles..."})}):h?(0,l.jsxs)("div",{className:r().emptyState,children:[(0,l.jsx)("p",{children:h}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:r().retryButton,children:"Retry"})]}):0===b.length?(0,l.jsxs)("div",{className:r().emptyState,children:[(0,l.jsx)("p",{children:"No articles available at the moment."}),(0,l.jsx)("p",{className:r().registerPrompt,children:"Register to get the latest updates from the topics you care about"})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:r().carouselShell,children:[(0,l.jsx)("button",{className:"".concat(r().navButton," ").concat(_?"":r().navButtonDisabled),onClick:()=>k("left"),"aria-label":"Scroll categories left",disabled:!_,children:"‹"}),(0,l.jsx)("div",{className:r().categoryTrack,ref:j,onScroll:P,children:b.map(e=>{let[t,...a]=e.items;return t?(0,l.jsxs)("div",{className:r().categoryCard,children:[(0,l.jsxs)("div",{className:r().categoryHeader,children:[(0,l.jsx)("span",{className:r().categoryIcon,dangerouslySetInnerHTML:{__html:v(e.category)},"aria-hidden":"true"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:r().categoryLabel,children:"Category"}),(0,l.jsx)("h3",{className:r().categoryTitle,children:e.category})]})]}),(0,l.jsxs)("button",{className:r().hero,onClick:()=>C(t.id),"aria-label":"Open ".concat(t.title),children:[(0,l.jsx)("div",{className:r().heroImageWrapper,children:(0,l.jsx)("img",{src:t.imageUrl||"https://insideskills.pl/wp-content/uploads/2024/01/placeholder-6.png",alt:t.title,className:r().heroImage})}),(0,l.jsx)("div",{className:r().heroContent,children:(0,l.jsx)("h4",{className:r().heroTitle,children:t.title})})]}),(0,l.jsx)("div",{className:r().headlines,children:a.map(e=>(0,l.jsxs)("button",{className:r().headlineRow,onClick:()=>C(e.id),children:[(0,l.jsx)("span",{className:r().headlineBullet,children:"•"}),(0,l.jsx)("span",{className:r().headlineText,children:e.title})]},e.id))})]},e.category):null})}),(0,l.jsx)("button",{className:"".concat(r().navButton," ").concat(y?"":r().navButtonDisabled),onClick:()=>k("right"),"aria-label":"Scroll categories right",disabled:!y,children:"›"})]})})}),(0,l.jsx)(u.Z,{})]})}},7715:function(e){e.exports={backdrop:"SignupModal_backdrop__Tz3qR",modal:"SignupModal_modal__cSh5M",side:"SignupModal_side__fTJNm",sideTitle:"SignupModal_sideTitle__9fTCT",sideText:"SignupModal_sideText__WKkOo",sideList:"SignupModal_sideList__2Paeo",sideListItem:"SignupModal_sideListItem__udgs9",main:"SignupModal_main__8o56v",header:"SignupModal_header__wRrlG",title:"SignupModal_title__JwKrZ",closeButton:"SignupModal_closeButton__1Ei2W",form:"SignupModal_form__RRIk6",fieldGroup:"SignupModal_fieldGroup__D_2lu",label:"SignupModal_label__HgDgw",input:"SignupModal_input__jUVr1",categories:"SignupModal_categories__DIUSt",categoryGrid:"SignupModal_categoryGrid__2uvBb",chip:"SignupModal_chip__pfZuq",chipSelected:"SignupModal_chipSelected__tsQ3h",chipDisabled:"SignupModal_chipDisabled__hjWcq",actions:"SignupModal_actions__ICZHX",primaryButton:"SignupModal_primaryButton__f1Z4Q",secondaryButton:"SignupModal_secondaryButton__qhZ3g",muted:"SignupModal_muted__P5DC3",status:"SignupModal_status__kD0QR",error:"SignupModal_error__G_h6A"}}},function(e){e.O(0,[891,990,972,726,662,761,971,117,744],function(){return e(e.s=6995)}),_N_E=e.O()}]);