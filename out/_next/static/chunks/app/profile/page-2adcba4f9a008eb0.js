(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{6384:function(e,s,a){Promise.resolve().then(a.bind(a,112))},112:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(7437),n=a(2265),l=a(9376),i=a(7648),c=a(3145),r=a(9924),o=a.n(r),d=a(3595),m=a(8349),h=a(7029);function g(){var e,s,a,r;let g=(0,l.useRouter)(),[u,_]=(0,n.useState)(!0),[p,x]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[v,f]=(0,n.useState)(!1),[L,b]=(0,n.useState)(!1),[C,I]=(0,n.useState)(""),[w,D]=(0,n.useState)(""),[S,B]=(0,n.useState)(!1),[A,y]=(0,n.useState)(null),[k,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{if((await (0,h.checkSessionStatus)()).authenticated){x(!0);let e=await (0,h.getUserProfile)();N(e),I((null==e?void 0:e.name)||""),D((null==e?void 0:e.headline)||"")}else g.replace("/registration")}catch(e){console.error("Error checking session:",e),g.replace("/registration")}finally{_(!1)}})()},[g]);let M=async()=>{try{await (0,h.w7)(),window.location.href="https://patreek.com"}catch(e){console.error("Error signing out:",e),window.location.href="https://patreek.com"}},T=async()=>{if(j){B(!0),y(null),P(!1);try{let e={name:C.trim()||void 0,headline:w.trim()||void 0},s=await (0,h.ck)(e);N(s),b(!1),P(!0),setTimeout(()=>P(!1),3e3)}catch(e){y(e instanceof Error?e.message:"Failed to update profile")}finally{B(!1)}}};if(u)return(0,t.jsxs)("div",{className:o().page,children:[(0,t.jsx)(d.Z,{hasSession:!0}),(0,t.jsx)("div",{className:o().loading,children:(0,t.jsx)("p",{children:"Loading your profile…"})}),(0,t.jsx)(m.Z,{})]});if(!p)return null;let F=(null==j?void 0:j.name)?j.name.split(" ").map(e=>{var s;return null===(s=e[0])||void 0===s?void 0:s.toUpperCase()}).join("").slice(0,2):"P";return(0,t.jsxs)("div",{className:o().page,children:[(0,t.jsx)(d.Z,{hasSession:!0}),(0,t.jsx)("main",{className:o().main,children:(0,t.jsxs)("div",{className:o().container,children:[(0,t.jsxs)("section",{className:o().heroCard,children:[(0,t.jsx)("div",{className:o().cover}),(0,t.jsxs)("div",{className:o().heroInner,children:[(0,t.jsx)("div",{className:o().avatar,children:(null==j?void 0:j.avatarUrl)?(0,t.jsx)(c.default,{src:j.avatarUrl,alt:j.name||"Profile",width:96,height:96,className:o().avatarImage}):(0,t.jsx)("span",{className:o().avatarInitials,children:F})}),(0,t.jsx)("div",{className:o().heroMeta,children:L?(0,t.jsxs)("div",{className:o().editForm,children:[(0,t.jsxs)("div",{className:o().formGroup,children:[(0,t.jsx)("label",{htmlFor:"name",className:o().formLabel,children:"Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:C,onChange:e=>I(e.target.value),className:o().formInput,maxLength:255,placeholder:"Your name"})]}),(0,t.jsxs)("div",{className:o().formGroup,children:[(0,t.jsxs)("label",{htmlFor:"headline",className:o().formLabel,children:["Headline",(0,t.jsxs)("span",{className:o().charCount,children:[w.length,"/150"]})]}),(0,t.jsx)("textarea",{id:"headline",value:w,onChange:e=>{e.target.value.length<=150&&D(e.target.value)},className:o().formTextarea,maxLength:150,placeholder:"What you do for a living (e.g., Software Engineer at Tech Corp)",rows:3})]}),A&&(0,t.jsx)("div",{className:o().errorMessage,children:A}),k&&(0,t.jsx)("div",{className:o().successMessage,children:"Profile updated successfully!"}),(0,t.jsxs)("div",{className:o().formActions,children:[(0,t.jsx)("button",{onClick:()=>{b(!1),I((null==j?void 0:j.name)||""),D((null==j?void 0:j.headline)||""),y(null),P(!1)},className:o().cancelButton,disabled:S,children:"Cancel"}),(0,t.jsx)("button",{onClick:T,className:o().saveButton,disabled:S,children:S?"Saving...":"Save"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:o().nameRow,children:[(0,t.jsx)("h1",{className:o().name,children:(null==j?void 0:j.name)||"Patreek User"}),(null==j?void 0:j.username)&&(0,t.jsxs)("p",{className:o().username,children:["@",j.username]})]}),(null==j?void 0:j.headline)&&(0,t.jsx)("p",{className:o().headline,children:j.headline}),(null==j?void 0:j.email)&&(0,t.jsx)("p",{className:o().email,children:j.email}),(null==j?void 0:j.createdAt)&&(0,t.jsxs)("p",{className:o().joined,children:["Joined ",new Date(j.createdAt).toLocaleDateString()]}),(0,t.jsxs)("div",{className:o().heroActions,children:[(0,t.jsx)("button",{onClick:()=>{b(!0),I((null==j?void 0:j.name)||""),D((null==j?void 0:j.headline)||""),y(null),P(!1)},className:o().editButton,children:"Edit Profile"}),(0,t.jsx)(i.default,{href:"/home",className:o().primaryButton,children:"View your pats"}),(0,t.jsx)(i.default,{href:"/profile/categories",className:o().secondaryButton,children:"Manage categories"})]})]})})]}),(0,t.jsxs)("div",{className:o().statsRow,children:[(0,t.jsxs)("div",{className:o().statChip,children:[(0,t.jsx)("span",{className:o().statLabel,children:"Pats"}),(0,t.jsx)("span",{className:o().statValue,children:null!==(e=null==j?void 0:j.totalPats)&&void 0!==e?e:0})]}),(0,t.jsxs)("div",{className:o().statChip,children:[(0,t.jsx)("span",{className:o().statLabel,children:"Comments"}),(0,t.jsx)("span",{className:o().statValue,children:null!==(s=null==j?void 0:j.totalComments)&&void 0!==s?s:0})]}),(0,t.jsxs)("div",{className:o().statChip,children:[(0,t.jsx)("span",{className:o().statLabel,children:"Shares"}),(0,t.jsx)("span",{className:o().statValue,children:null!==(a=null==j?void 0:j.totalShares)&&void 0!==a?a:0})]}),(0,t.jsxs)("div",{className:o().statChip,children:[(0,t.jsx)("span",{className:o().statLabel,children:"Pat Coins"}),(0,t.jsx)("span",{className:o().statValue,children:null!==(r=null==j?void 0:j.coins)&&void 0!==r?r:0})]})]})]}),(0,t.jsxs)("div",{className:o().grid,children:[(0,t.jsxs)("div",{className:o().card,children:[(0,t.jsx)("div",{className:o().cardHeader,children:(0,t.jsx)("h2",{className:o().sectionTitle,children:"Account"})}),(0,t.jsxs)("div",{className:o().settingList,children:[(0,t.jsxs)(i.default,{href:"/profile/settings",className:o().settingItem,children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83D\uDC64"}),(0,t.jsx)("span",{className:o().settingLabel,children:"Profile settings"})]}),(0,t.jsx)("span",{className:o().settingArrow,children:"→"})]}),(0,t.jsxs)(i.default,{href:"/profile/categories",className:o().settingItem,children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83D\uDCF0"}),(0,t.jsx)("span",{className:o().settingLabel,children:"News categories"})]}),(0,t.jsx)("span",{className:o().settingArrow,children:"→"})]})]})]}),(0,t.jsxs)("div",{className:o().card,children:[(0,t.jsx)("div",{className:o().cardHeader,children:(0,t.jsx)("h2",{className:o().sectionTitle,children:"Preferences"})}),(0,t.jsx)("div",{className:o().settingList,children:(0,t.jsxs)("div",{className:o().settingItem,children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83C\uDF19"}),(0,t.jsx)("span",{className:o().settingLabel,children:"Dark mode"})]}),(0,t.jsxs)("label",{className:o().toggle,children:[(0,t.jsx)("input",{type:"checkbox",checked:v,onChange:()=>{f(!v)}}),(0,t.jsx)("span",{className:o().toggleSlider})]})]})})]}),(0,t.jsxs)("div",{className:o().card,children:[(0,t.jsx)("div",{className:o().cardHeader,children:(0,t.jsx)("h2",{className:o().sectionTitle,children:"Support"})}),(0,t.jsxs)("div",{className:o().settingList,children:[(0,t.jsxs)(i.default,{href:"/terms",className:o().settingItem,children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83D\uDCC4"}),(0,t.jsx)("span",{className:o().settingLabel,children:"Terms & Conditions"})]}),(0,t.jsx)("span",{className:o().settingArrow,children:"→"})]}),(0,t.jsxs)(i.default,{href:"/contact",className:o().settingItem,children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83D\uDCAC"}),(0,t.jsx)("span",{className:o().settingLabel,children:"Help & Support"})]}),(0,t.jsx)("span",{className:o().settingArrow,children:"→"})]})]})]}),(0,t.jsxs)("div",{className:o().card,children:[(0,t.jsx)("div",{className:o().cardHeader,children:(0,t.jsx)("h2",{className:o().sectionTitle,children:"Account actions"})}),(0,t.jsxs)("div",{className:o().settingList,children:[(0,t.jsxs)("button",{onClick:M,className:"".concat(o().settingItem," ").concat(o().signOutButton),children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83D\uDEAA"}),(0,t.jsx)("span",{className:o().settingLabel,children:"Sign out"})]}),(0,t.jsx)("span",{className:o().settingArrow,children:"→"})]}),(0,t.jsxs)("button",{className:"".concat(o().settingItem," ").concat(o().deleteButton),onClick:()=>{confirm("Are you sure you want to delete your account? This action cannot be undone.")&&console.log("Delete account")},children:[(0,t.jsxs)("div",{className:o().settingLeft,children:[(0,t.jsx)("span",{className:o().settingIcon,children:"\uD83D\uDDD1️"}),(0,t.jsx)("span",{className:o().settingLabel,children:"Delete account"})]}),(0,t.jsx)("span",{className:o().settingArrow,children:"→"})]})]})]})]})]})}),(0,t.jsx)(m.Z,{})]})}},9924:function(e){e.exports={page:"page_page__7nxjA",loading:"page_loading__fw5k2",main:"page_main__JPdsv",container:"page_container__n877s",heroCard:"page_heroCard__RPslb",cover:"page_cover__ARynL",heroInner:"page_heroInner__hvszS",avatar:"page_avatar__MIa8k",avatarImage:"page_avatarImage__BivQR",avatarInitials:"page_avatarInitials__DVXVP",heroMeta:"page_heroMeta__ToP1s",nameRow:"page_nameRow__rj2tl",name:"page_name__G9nOM",username:"page_username__lePzw",headline:"page_headline___9JFt",email:"page_email__igijm",joined:"page_joined__Pv7So",heroActions:"page_heroActions__X6Ws4",primaryButton:"page_primaryButton__OwI7N",secondaryButton:"page_secondaryButton__RuV_b",editButton:"page_editButton__EOXh1",statsRow:"page_statsRow__DL2S6",statChip:"page_statChip__iMIkB",statLabel:"page_statLabel__vZXB_",statValue:"page_statValue__qB9Oc",grid:"page_grid__G25_g",card:"page_card__531ro",cardHeader:"page_cardHeader__HiqAZ",sectionTitle:"page_sectionTitle__W1erW",settingList:"page_settingList__Nrst2",settingItem:"page_settingItem__eH8bF",settingLeft:"page_settingLeft__MBx7c",settingIcon:"page_settingIcon__X1_TN",settingLabel:"page_settingLabel__xEYla",settingArrow:"page_settingArrow__vFIk_",toggle:"page_toggle__ROP25",toggleSlider:"page_toggleSlider__owyl2",signOutButton:"page_signOutButton__LUPPl",deleteButton:"page_deleteButton__zngTf",editForm:"page_editForm__4YCiq",formGroup:"page_formGroup__Axb6m",formLabel:"page_formLabel__ZpjI9",charCount:"page_charCount__IcneL",formInput:"page_formInput__KY_Jk",formTextarea:"page_formTextarea__pI19_",formActions:"page_formActions__CtuBs",cancelButton:"page_cancelButton__jFbMB",saveButton:"page_saveButton__REKG6",errorMessage:"page_errorMessage__fyHF8",successMessage:"page_successMessage__WGMiA"}}},function(e){e.O(0,[5832,563,2972,5726,1908,7611,2971,2117,1744],function(){return e(e.s=6384)}),_N_E=e.O()}]);