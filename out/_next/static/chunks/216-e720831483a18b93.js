(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{5148:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(7437),n=r(2265),l=r(7648),c=r(3145),s=r(9116);function i(e){if(!e||0===e.trim().length)return e;let t=[];t=e.includes("\n\n")?e.split(/\n\s*\n/):e.includes("\n")?e.split(/\n/):[e];let r=[];for(let e of t){let t=e.trim();if(!t)continue;if(t.length<=150){r.push(t);continue}let a=[],n=t.split(/([.!?]+["']?\s+)/),l="";for(let e=0;e<n.length;e++){let t=n[e];t&&(/[.!?]+["']?\s*$/.test(t)?((l+=t).trim()&&a.push(l.trim()),l=""):l+=t)}if(l.trim()&&a.push(l.trim()),a.length<=1||a.some(e=>e.length>1200)){a=t.split(/([.!?]+["']?\s*)/).filter(e=>e.trim().length>0);let e=[];for(let t=0;t<a.length;t++)/^[.!?]+["']?\s*$/.test(a[t])?e.length>0&&(e[e.length-1]+=a[t]):e.push(a[t]);a=e.filter(e=>e.trim().length>0)}if(a.length<=1&&t.length>600&&(a=t.split(/([.;]\s+)/).filter(e=>e.trim().length>0)),a.length<=1||a.some(e=>e.length>900)){let e=t.split(/\s+/).filter(e=>e.length>0),r=Math.ceil(t.length/600),n=Math.max(30,Math.ceil(e.length/r));a=[];for(let t=0;t<e.length;t+=n){let r=e.slice(t,t+n).join(" ");r.trim()&&a.push(r.trim())}}let c="",s=0;for(let e of a){let t=e.trim();if(!t)continue;let a=t.split(/\s+/).filter(e=>e.length>0).length,n=t.length;c&&(c.length+n+1>600||s+a>100)?(c.trim()&&r.push(c.trim()),c=t,s=a):(c+=(c?" ":"")+t,s+=a)}c.trim()&&r.push(c.trim())}return r.join("\n\n")}var o=r(8349),m=r(1402),d=r.n(m),h=r(7398),_=r.n(h);function u(e){var t;let{article:r}=e,[m,h]=(0,n.useState)(!1),[u,p]=(0,n.useState)([]),[g,f]=(0,n.useState)(!0),[x,A]=(0,n.useState)("idle");(0,n.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");h(e.matches);let t=e=>h(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,n.useEffect)(()=>{(async function(){try{f(!0);let e=await (0,s.lk)(r.id);p(e)}catch(e){console.error("Failed to load comments:",e),p([])}finally{f(!1)}})()},[r.id]);let N=(0,n.useMemo)(()=>window.location.href,[r.id]);(0,n.useEffect)(()=>{if("idle"===x)return;let e=setTimeout(()=>A("idle"),2500);return()=>clearTimeout(e)},[x]);let j=e=>{let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},R=async()=>{try{var e,t;(null===(t=navigator)||void 0===t?void 0:null===(e=t.clipboard)||void 0===e?void 0:e.writeText)?await navigator.clipboard.writeText(N):j(N),A("copied")}catch(e){try{j(N),A("copied")}catch(e){console.error("Failed to copy article link",e),A("error")}}},y="copied"===x?"Link copied!":"error"===x?"Unable to copy":"Copy pat link",k=(t=r.createdAt,_()(t).isSame(_()(),"day"))?"Today in":_()(r.createdAt).format("MMM DD"),v=(0,n.useMemo)(()=>{var e;return(e=r.body)&&0!==e.trim().length?/<[a-z][\s\S]*>/i.test(e)?function(e){if(!e||0===e.trim().length)return e;let t=e.match(/<p[^>]*>[\s\S]*?<\/p>/gi);if(t&&!t.some(e=>e.replace(/<[^>]*>/g,"").trim().length>600)&&t.length>2)return e;let r=e.replace(/<\/p>\s*<p[^>]*>/gi,"\n\n");r=(r=(r=r.replace(/<p[^>]*>/gi,"")).replace(/<\/p>/gi,"")).replace(/<\/?(div|section|article)[^>]*>/gi,"");let a={},n=0,l=i(r=r.replace(/<(\/?)([a-z]+)[^>]*>/gi,(e,t,r)=>{let l="__TAG_".concat(n,"__");return a[l]=e,n++,l}));return Object.keys(a).forEach(e=>{l=l.replace(e,a[e])}),l.split(/\n\s*\n/).filter(e=>e.trim()).map(e=>"<p>".concat(e.trim(),"</p>")).join("\n")}(e):i(e):e},[r.body]);return(0,a.jsxs)("div",{className:"".concat(d().container," ").concat(m?d().dark:""),children:[(0,a.jsx)("header",{className:d().header,children:(0,a.jsxs)("div",{className:d().headerInner,children:[(0,a.jsx)(l.default,{href:"/",className:d().logoLink,children:(0,a.jsx)(c.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/675caa3a2f73ad268a86b51a_Patreek%20logo_slogan.png",alt:"Patreek",width:50,height:50,className:d().logo})}),(0,a.jsxs)("div",{className:d().headerCenter,children:[(0,a.jsx)("h1",{className:d().categoryName,children:r.categoryName}),(0,a.jsx)("p",{className:d().date,children:k})]})]})}),(0,a.jsx)("main",{className:d().main,children:(0,a.jsxs)("article",{className:d().article,children:[r.imageUrl&&(0,a.jsx)("div",{className:d().imageWrapper,children:(0,a.jsx)("img",{src:r.imageUrl,alt:r.title,className:d().image})}),(0,a.jsx)("h1",{className:d().title,children:r.title}),r.excerpt&&(0,a.jsx)("p",{className:d().description,children:r.excerpt}),(0,a.jsx)("div",{className:d().content,dangerouslySetInnerHTML:{__html:v}}),(0,a.jsxs)("div",{className:d().commentsSection,children:[(0,a.jsx)("h2",{className:d().commentsTitle,children:"Comments"}),(0,a.jsxs)("div",{className:d().shareBar,children:[(0,a.jsx)("p",{className:d().shareLabel,children:"Share this Pat"}),(0,a.jsxs)("button",{type:"button",className:"".concat(d().shareButton," ").concat("copied"===x?d().shareButtonSuccess:""," ").concat("error"===x?d().shareButtonError:""),onClick:R,"aria-live":"polite",title:y,children:[(0,a.jsxs)("svg",{viewBox:"0 0 32 32","aria-hidden":"true",className:d().shareIcon,children:[(0,a.jsx)("path",{d:"M18.586 5.414a5 5 0 0 1 7.071 7.071l-3 3a1 1 0 0 1-1.414-1.414l3-3a3 3 0 1 0-4.243-4.243l-3 3a1 1 0 1 1-1.414-1.414l3-3z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M13.414 26.586a5 5 0 0 1-7.071-7.071l3-3a1 1 0 0 1 1.414 1.414l-3 3a3 3 0 1 0 4.243 4.243l3-3a1 1 0 1 1 1.414 1.414l-3 3z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M20.586 11.586l-8 8a1 1 0 0 1-1.414-1.414l8-8a1 1 0 0 1 1.414 1.414z",fill:"currentColor"})]}),(0,a.jsx)("span",{className:d().shareText,children:y})]})]}),g?(0,a.jsx)("p",{className:d().commentsLoading,children:"Loading comments..."}):0===u.length?(0,a.jsx)("p",{className:d().noComments,children:"No comments yet."}):(0,a.jsx)("div",{className:d().commentsList,children:u.map((e,t)=>(0,a.jsxs)("div",{className:d().commentItem,children:[(0,a.jsxs)("div",{className:d().commentHeader,children:[e.photoUrl&&(0,a.jsx)("img",{src:e.photoUrl,alt:e.author,className:d().commentAvatar}),(0,a.jsxs)("div",{className:d().commentAuthorInfo,children:[(0,a.jsx)("span",{className:d().commentAuthor,children:e.author}),(0,a.jsx)("span",{className:d().commentDate,children:_()(e.createdAt).format("MMM DD, YYYY")})]})]}),(0,a.jsx)("p",{className:d().commentBody,children:e.body})]},t))})]}),(0,a.jsx)("div",{className:d().unlockBanner,children:(0,a.jsxs)("div",{className:d().unlockBannerContent,children:[(0,a.jsx)("p",{className:d().unlockText,children:"UNLOCK YOUR PATS"}),(0,a.jsxs)("p",{className:d().unlockDescription,children:["Register to get the latest updates from the topics"," ",(0,a.jsx)("span",{className:d().unlockUnderline,children:"you"})," care about"]}),(0,a.jsxs)("div",{className:d().storeButtons,children:[(0,a.jsx)("a",{href:"https://apps.apple.com/us/app/patreek/id6547858283",target:"_blank",rel:"noopener noreferrer",className:d().storeLink,children:(0,a.jsx)(c.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/67a3729b558347b9bf210a5a_Store%3DApp%20Store%2C%20Type%3DDark%2C%20Language%3DEnglish%402x.png",alt:"Download on App Store",width:200,height:60,className:d().storeImage})}),(0,a.jsx)("a",{href:"#",className:d().storeLink,children:(0,a.jsx)(c.default,{src:"https://cdn.prod.website-files.com/675ca775325477a121669e3c/67a3727c8abb3515ab42d712_Store%3DGoogle%20Play%2C%20Type%3DDark%2C%20Language%3DEnglish%402x.png",alt:"Get it on Google Play",width:200,height:60,className:d().storeImage})})]})]})})]})}),(0,a.jsx)(o.Z,{})]})}},4422:function(e,t,r){"use strict";r.d(t,{A:function(){return n},t:function(){return l}});let a="patreek_article_";function n(e){try{let t="".concat(a).concat(e),r=localStorage.getItem(t);if(!r)return null;let n=JSON.parse(r);if(Date.now()-n.timestamp>6048e5)return localStorage.removeItem(t),null;return n.data}catch(e){return console.error("Error reading from cache:",e),null}}function l(e,t){let r="".concat(a).concat(e),n={data:t,timestamp:Date.now()};try{localStorage.setItem(r,JSON.stringify(n))}catch(e){if(console.error("Error writing to cache:",e),e instanceof DOMException&&"QuotaExceededError"===e.name){c();try{localStorage.setItem(r,JSON.stringify(n))}catch(e){console.error("Failed to cache after cleanup:",e)}}}}function c(){try{let e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){let n=localStorage.key(r);if(null==n?void 0:n.startsWith(a))try{let r=localStorage.getItem(n);if(r){let a=JSON.parse(r);e-a.timestamp>6048e5&&t.push(n)}}catch(e){t.push(n)}}t.forEach(e=>localStorage.removeItem(e))}catch(e){console.error("Error clearing expired cache:",e)}}c()},1402:function(e){e.exports={container:"ArticleReader_container__jO2L5",dark:"ArticleReader_dark__PbS6A",header:"ArticleReader_header__dbPzK",headerInner:"ArticleReader_headerInner__yrlm4",logoLink:"ArticleReader_logoLink__Kc5xR",logo:"ArticleReader_logo__Ffm7W",headerCenter:"ArticleReader_headerCenter__ju69k",categoryName:"ArticleReader_categoryName__DrJk6",date:"ArticleReader_date__7kari",main:"ArticleReader_main__vwq7A",article:"ArticleReader_article__XHm3G",imageWrapper:"ArticleReader_imageWrapper__NI6E9",image:"ArticleReader_image__pYNG4",title:"ArticleReader_title__0ba_F",description:"ArticleReader_description__FGiUV",content:"ArticleReader_content__KVC5g",unlockBanner:"ArticleReader_unlockBanner__4dPP0",unlockBannerContent:"ArticleReader_unlockBannerContent__xQm1Q",unlockText:"ArticleReader_unlockText__XI_xN",unlockDescription:"ArticleReader_unlockDescription__D8kgb",unlockUnderline:"ArticleReader_unlockUnderline__MRWY0",storeButtons:"ArticleReader_storeButtons__KTAzN",storeLink:"ArticleReader_storeLink__8tyrD",storeImage:"ArticleReader_storeImage__DCJpi",shareBar:"ArticleReader_shareBar__wqAA0",shareLabel:"ArticleReader_shareLabel__PHJAa",shareButton:"ArticleReader_shareButton__5ySjX",shareButtonSuccess:"ArticleReader_shareButtonSuccess__87EY7",shareButtonError:"ArticleReader_shareButtonError__Zsnhj",shareIcon:"ArticleReader_shareIcon__7cF3c",shareText:"ArticleReader_shareText__1pe4m",commentsSection:"ArticleReader_commentsSection__rqZOR",commentsTitle:"ArticleReader_commentsTitle__xw6PS",commentsLoading:"ArticleReader_commentsLoading__nu_pR",noComments:"ArticleReader_noComments__eVpLR",commentsList:"ArticleReader_commentsList__I_eEj",commentItem:"ArticleReader_commentItem__h_m06",commentHeader:"ArticleReader_commentHeader__bKesh",commentAvatar:"ArticleReader_commentAvatar___Zlwi",commentAuthorInfo:"ArticleReader_commentAuthorInfo__GWLyj",commentAuthor:"ArticleReader_commentAuthor__CQ3yY",commentDate:"ArticleReader_commentDate__eV3mx",commentBody:"ArticleReader_commentBody__SaDKq"}}}]);